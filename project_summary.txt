üìã **PROJECT STATUS: UPDATED 2025-01-27**

**Recent Updates:**
- ‚úÖ **Next.js 16 Upgrade:** Successfully upgraded from Next.js 14.2.33 to 16.1.1
- ‚úÖ **React 19:** Updated to React 19.2.3 and React DOM 19.2.3
- ‚úÖ **ESLint 9:** Updated to ESLint 9.39.2 (required for Next.js 16)
- ‚úÖ **Async Params:** All dynamic routes updated for Next.js 16 async params requirement
- ‚úÖ **Cache API:** Updated revalidateTag calls to include required cache profile parameter
- ‚úÖ Added 7 new location pages (Benoni, Kempton Park, Alberton, Johannesburg North, Serengeti Estate, Ebotse Estate, Meyersdal Estate)
- ‚úÖ Added 5 new service pages (roof-painting, interior-painting, parking-garage-painting, road-marking, warehouse-painting)
- ‚úÖ Added new blog article (peeling-paint-repair) to structural-remediation pillar
- ‚úÖ Enhanced keywords with 15+ new high-intent terms
- ‚úÖ Updated sitemap to include all new pages
- ‚úÖ Build successful: 63 pages generated (Next.js 16)
- ‚úÖ All SEO requirements verified and complete
- ‚úÖ Zero SEO regressions after upgrade

**Total Pages:** 63 (13 new pages added, 1 removed due to Next.js 16 edge runtime)
**Location Pages:** 11 (expanded from 4)
**Service Pages:** 9 painting pages (expanded from 4)
**Blog Articles:** 8 total (1 new problem-solution article)
**Next.js Version:** 16.1.1 (upgraded from 14.2.33)
**React Version:** 19.2.3 (upgraded from 18.3.1)

====================================================================================================

üìÅ **PROJECT FILE TREE: mvvppaint**
‚îú‚îÄ‚îÄ üìÑ .env.local
‚îú‚îÄ‚îÄ üìÑ .eslintrc.json
‚îú‚îÄ‚îÄ üìÑ .gitignore
‚îú‚îÄ‚îÄ üìÑ README.md
‚îú‚îÄ‚îÄ üìÑ components.json
‚îú‚îÄ‚îÄ üìÑ mvvp_project_scanner.py
‚îú‚îÄ‚îÄ üìÑ next-env.d.ts
‚îú‚îÄ‚îÄ üìÑ next.config.mjs
‚îú‚îÄ‚îÄ üìÑ package.json
‚îú‚îÄ‚îÄ üìÑ postcss.config.mjs
‚îú‚îÄ‚îÄ üìÑ safe_seo_installer.py
‚îú‚îÄ‚îÄ üìÑ tailwind.config.ts
‚îú‚îÄ‚îÄ üìÑ tsconfig.json
‚îú‚îÄ‚îÄ üìÑ undo_seo_changes.py
‚îú‚îÄ‚îÄ üìÅ docs
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ revalidation-webhook.md
‚îú‚îÄ‚îÄ üìÅ public
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ images
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ WhatsApp.svg.webp
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ~partytown
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-atomics.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-media.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-sw.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ debug
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-atomics.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-media.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-sandbox-sw.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-sw.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-ww-atomics.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown-ww-sw.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown.js
‚îú‚îÄ‚îÄ üìÅ src
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ app
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ globals.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ layout.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ robots.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ sitemap.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ about-us
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ access-solutions
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ accreditations
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ api
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ auth
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [...nextauth]
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ route.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ revalidate
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ route.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ blog
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [pillar]
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ layout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [cluster]
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ opengraph-image.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ coatings
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ hygienic-food-grade-flooring
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ contact
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ damp-proofing-services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ fonts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ GeistMonoVF.woff
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ GeistVF.woff
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ locations
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [city]
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ our-process-independent-qa
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ body-corporate-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ commercial-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ high-volume-commercial-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ industrial-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ interior-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ parking-garage-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ road-marking
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ roof-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ warehouse-painting
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ painting-services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ privacy
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ projects
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [slug]
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ solutions
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ for-body-corporates
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ for-developers
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ for-homeowners
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ specialized-coatings
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ structural-repairs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ terms
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ waterproofing-services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ accreditations-strip.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ client-logo-strip.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ cta-final-strip.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ cta-strip-module.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ hero-contact-form.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ hero-section.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ mobile-trust-carousel.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ project-showcase-image-card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ project-showcase-module.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ qa-process-module.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ service-expertise-grid.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ service-grid-item.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ trust-strip-mobile-carousel.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ analytics
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ gtm-partytown.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ layout
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ footer.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ header.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ mobile-nav.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ui
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ button.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ card.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ content
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillars.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ pillars
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ industrial
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clusters
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ fast-curing-floors.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ ohs-access-liability.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ zinc-primer-corrosion-control.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ structural-remediation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clusters
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ concrete-spalling-repair.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ peeling-paint-repair.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ waterproofing
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clusters
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ leaking-balcony-fixes.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ liquid-vs-torch-on.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ rising-damp-guide.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ locations.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillars.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ projects.ts
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ lib
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ auth.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ cache-tags.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ db.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ metadata.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ pillars.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ seo.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ utils.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ db
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ schema.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ hooks
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ useIntervalWhenVisible.ts
‚îú‚îÄ‚îÄ üìÅ types
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ partytown.d.ts


====================================================================================================

üìÑ **INDIVIDUAL FILE CONTENTS**

====================================================================================================

--------------------------------------------------------------------------------üìÑ FILE PATH: .env.local--------------------------------------------------------------------------------```# ==============================================================================
# üö® BUILD-TIME PLACEHOLDERS (REQUIRED FOR DB/AUTH CLIENT INITIALIZATION)
# NOTE: The values must be set, but they don't need to be real yet.
# ==============================================================================

# 1. DATABASE CONNECTION STRING
# Next.js must see this variable set during the build process.
DATABASE_URL="postgresql://placeholder:placeholder@host:5432/placeholder"

# 2. NEXT-AUTH CORE SECRET
# Must be set for security and session token signing.
AUTH_SECRET="insecure_placeholder_change_this_immediately" 

# 3. GITHUB OAUTH PROVIDER CREDENTIALS
# These need to exist to avoid configuration errors in src/lib/auth.ts.
GITHUB_ID="placeholder_github_id"
GITHUB_SECRET="placeholder_github_secret"```

--------------------------------------------------------------------------------üìÑ FILE PATH: .eslintrc.json--------------------------------------------------------------------------------```{
  "extends": ["next/core-web-vitals", "next/typescript"]
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: .gitignore--------------------------------------------------------------------------------```# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js
.yarn/install-state.gz

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
```

--------------------------------------------------------------------------------üìÑ FILE PATH: README.md--------------------------------------------------------------------------------```# ‚ö° mvvppaint: Production-Ready Next.js 16 Boilerplate

[![GitHub Workflow Status (main)](https://img.shields.io/github/actions/workflow/status/Franksmittt/fcsmittemplate/main.yml?branch=main&label=Build%20Status)](https://github.com/Franksmittt/fcsmittemplate/actions)
[![GitHub last commit](https://img.shields.io/github/last-commit/Franksmittt/fcsmittemplate)](https://github.com/Franksmittt/fcsmittemplate/commits/main)
[![Next.js Version](https://img.shields.io/badge/Next.js-16.1.1-000000.svg)](https://nextjs.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

**Live Demo:** [https://fcsmittemplate.vercel.app/](https://fcsmittemplate.vercel.app/)

---

## üéØ 1. Project Philosophy & Stack Overview

This project is a **Minimum Viable Production-Ready** template, built to institutionalize best practices for performance, scalability, and maintainability.

### The Modern "Server-First" Stack

| Layer | Technology | Rationale & Best Practice |
| :--- | :--- | :--- |
| **Framework** | **Next.js 16.1.1** | [cite_start]The **App Router** is used exclusively, embracing the **Server-First Paradigm**[cite: 864]. This minimizes client-side JavaScript, leading to faster initial page loads (Lighthouse Core Web Vitals). Next.js 16 introduces async params, improved caching APIs, and enhanced performance optimizations. |
| **Styling** | **Tailwind CSS (v3.4)** | Utility-first framework for rapid, conflict-free UI development. |
| **UI Components** | **shadcn/ui (New York Style)** | [cite_start]Uses the "copy, don't install" philosophy for **Architectural Sovereignty**[cite: 1040, 1120]. Components are locally owned and styled with Tailwind, ensuring zero runtime CSS-in-JS overhead. |
| **Language** | **TypeScript (v5)** | Essential for building robust, scalable applications by catching type errors at compile time, enforcing the strictest project quality gate. |
| **Auth & DB (Planned)**| **Auth.js** & **Drizzle ORM** | Dependencies installed (`next-auth`, `@auth/drizzle-adapter`) to provide a self-hosted, highly flexible authentication system backed by the modern, type-safe Drizzle SQL query builder. |
| **Forms** | **React Hook Form & Zod** | Used for high-performance form state management and robust, type-safe schema validation. |

---

## üõ†Ô∏è 2. Local Setup & Development

### 2.1 Prerequisites

Ensure you have the following installed on your system:

1.  **Node.js LTS** (v20.x or later is strongly recommended).
2.  [cite_start]**pnpm** (The chosen package manager for superior peer dependency handling and performance [cite: 1065, 1074]).
3.  **A PostgreSQL Database** connection string for the data layer.

### 2.2 Project Initialization & Installation

First, clone the repository and install dependencies using `pnpm`.

```bash
# 1. Clone the repository
git clone [https://github.com/Franksmittt/fcsmittemplate.git](https://github.com/Franksmittt/fcsmittemplate.git) mvvppaint
cd mvvppaint

# 2. Install all dependencies using pnpm
pnpm install

### 2.3 Configure On-Demand Revalidation

1. Define a strong shared secret in your environment (e.g. `.env.local`):

   ```
   REVALIDATE_SECRET="replace_with_random_string"
   ```

2. Point your CMS/webhook provider at `POST /api/revalidate` with JSON like:

   ```json
   {
     "secret": "replace_with_random_string",
     "scope": "pillar",
     "pillar": "waterproofing"
   }
   ```

   - `scope`: `"all" | "pillar" | "cluster"` (defaults to `"all"`).
   - `pillar`: slug from `src/lib/pillars.ts`.
   - `cluster`: required only for `scope: "cluster"`.

Every successful request purges the relevant static routes and cache tags so updated content publishes instantly.```

--------------------------------------------------------------------------------üìÑ FILE PATH: components.json--------------------------------------------------------------------------------```{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: mvvp_project_scanner.py--------------------------------------------------------------------------------```import os

# --- Configuration ---
# Set the root directory for your project
# MODIFIED: Set to your new project root
PROJECT_ROOT = r"C:\Users\User1\mvvppaint" 
# Set the name for the output file
OUTPUT_FILENAME = "project_summary.txt"

# Folders to completely ignore during the scan
EXCLUDE_DIRS = [
    'node_modules',
    '.next',
    '.git',      # Often large and not relevant to the code
    '__pycache__', # Python-specific cache
    '.vscode',   # IDE/Editor configuration
    'venv',      # Python virtual environment
    'dist',      # Build output directory
    'build'      # Another common build output directory
]

# File extensions to ignore (images, compiled files, archives, etc.)
EXCLUDE_EXTENSIONS = (
    '.jpg', '.jpeg', '.png', '.gif', '.bmp', '.svg', '.ico', # Images
    '.bin', '.dat', '.dll', '.exe', '.obj', '.so', '.wasm',  # Binaries/Compiled
    '.zip', '.rar', '.7z', '.tar', '.gz', '.pdf', '.doc', '.docx', # Archives/Documents
    '.lock',                                                 # Lock files
    '.log'                                                   # Log files
)

# Individual files to always ignore if found in the root or subfolders
EXCLUDE_FILES = [
    OUTPUT_FILENAME, # Don't try to read the file we are writing to
    'pnpm-lock.yaml',
    'package-lock.json', # npm lock file
    'yarn.lock'          # yarn lock file
]

# --- Core Logic ---

def generate_file_tree(root_dir):
    """Generates a string representation of the file tree, excluding specific paths."""
    # Using a more standard file tree visual for clarity
    tree_lines = [f"üìÅ **PROJECT FILE TREE: {os.path.basename(root_dir)}**"]
    
    for root, dirs, files in os.walk(root_dir):
        # Modify dirs in-place to skip excluded folders in future iterations
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]
        
        # Calculate the current level in the tree
        # Adjusting level calculation to start correctly after root_dir
        relative_path = os.path.relpath(root, root_dir)
        if relative_path == '.':
            level = 0
        else:
            # Count separators in the relative path, which gives the depth
            level = relative_path.count(os.sep) + 1 

        indent = '‚îÇ   ' * (level - 1)
        
        # Add the directory to the tree, only if it's not the root itself
        if root != root_dir:
            dir_name = os.path.basename(root)
            # Determine prefix: '‚îî‚îÄ‚îÄ' for the last sibling, '‚îú‚îÄ‚îÄ' otherwise (simplified to '‚îú‚îÄ‚îÄ' for general output)
            dir_prefix = '‚îî‚îÄ‚îÄ ' if len(dirs) == 0 and len(files) == 0 else '‚îú‚îÄ‚îÄ ' # Simple heuristic
            tree_lines.append(f"{indent}{dir_prefix}üìÅ {dir_name}")
            indent = '‚îÇ   ' * level # Increase indent for files inside this directory
        
        # Add files in the current directory
        # Filter files to exclude the ones we don't want
        filtered_files = sorted([
            file for file in files
            if file.lower() not in EXCLUDE_FILES and not file.lower().endswith(EXCLUDE_EXTENSIONS)
        ])

        # Add files in the current directory with correct indentation
        for i, file in enumerate(filtered_files):
            # Check if this is the last file/dir combo for the current directory
            is_last_item = (i == len(filtered_files) - 1)
            file_prefix = '‚îî‚îÄ‚îÄ ' if is_last_item else '‚îú‚îÄ‚îÄ '
            
            # Correct the indentation based on the current level
            current_indent = '‚îÇ   ' * level
            if root == root_dir:
                 # Adjust for files directly in the root
                current_indent = ''
                file_prefix = '‚îú‚îÄ‚îÄ ' # Or whatever style you prefer for root items
            else:
                 # Standard indentation for files inside subdirectories
                 current_indent = '‚îÇ   ' * (level -1)
                 # Determine the connection line for the file
                 if level > 0:
                     # This logic is complex for perfect tree drawing, simplifying here
                     pass

            
            tree_lines.append(f"{current_indent}{file_prefix}üìÑ {file}")
    
    # Re-running the os.walk logic with clearer indentation control, as the above can be tricky.
    # Reverting to the simpler, more robust indentation from the original file for file content, 
    # but using the more visual tree structure.
    
    # SIMPLIFIED TREE GENERATION FOR ROBUSTNESS
    tree_lines = [f"üìÅ **PROJECT FILE TREE: {os.path.basename(root_dir)}**"]
    for root, dirs, files in os.walk(root_dir):
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]
        
        # Determine the depth
        rel_path = os.path.relpath(root, root_dir)
        level = rel_path.count(os.sep) if rel_path != '.' else 0
        
        # Indentation for current level's directories/files
        current_indent = '‚îÇ   ' * level

        # Directory name (if not root)
        if root != root_dir:
            tree_lines.append(f"{current_indent}‚îú‚îÄ‚îÄ üìÅ {os.path.basename(root)}")
            # Indent for files *inside* this directory
            file_indent = '‚îÇ   ' * (level + 1)
        else:
            file_indent = current_indent # Files in root directory

        # Files
        filtered_files = sorted([
            file for file in files
            if file.lower() not in EXCLUDE_FILES and not file.lower().endswith(EXCLUDE_EXTENSIONS)
        ])
        
        for file in filtered_files:
            if root == root_dir:
                # Special handling for files directly in the root folder
                tree_lines.append(f"‚îú‚îÄ‚îÄ üìÑ {file}")
            else:
                # Standard handling for files in subfolders
                tree_lines.append(f"{file_indent}‚îú‚îÄ‚îÄ üìÑ {file}")
    # END SIMPLIFIED TREE GENERATION
    
    return "\n".join(tree_lines) + "\n\n"

def get_file_contents(root_dir):
    """Iterates through files and reads their content."""
    content_output = []
    
    for root, dirs, files in os.walk(root_dir):
        # Modify dirs in-place to skip excluded folders in future iterations (same as tree generation)
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]
        
        for file in sorted(files):
            file_path = os.path.join(root, file)
            relative_path = os.path.relpath(file_path, root_dir)
            
            # Skip excluded files/extensions (same as tree generation)
            if file.lower() in EXCLUDE_FILES or file.lower().endswith(EXCLUDE_EXTENSIONS):
                continue
            
            # Try to read the file content
            try:
                with open(file_path, 'r', encoding='utf-8') as f:
                    content = f.read()
                
                # Format the file path and content
                content_output.append("-" * 80)
                content_output.append(f"üìÑ FILE PATH: {relative_path}") # Use relative path for cleaner output
                content_output.append("-" * 80)
                # Use a code block style for the file content
                content_output.append("```")
                content_output.append(content)
                content_output.append("```")
                content_output.append("\n\n") # Add extra space after content for separation

            except UnicodeDecodeError:
                # File is likely a binary file or uses an unsupported encoding, skip it
                print(f"Skipping binary/unreadable file: {relative_path}")
            except Exception as e:
                print(f"Error reading file {relative_path}: {e}")

    return "".join(content_output)

def main():
    """Main function to run the script."""
    # The output file is placed in the project root
    output_path = os.path.join(PROJECT_ROOT, OUTPUT_FILENAME)

    print(f"Scanning project root: {PROJECT_ROOT}")
    
    # 1. Generate the file tree
    tree_section = generate_file_tree(PROJECT_ROOT)
    
    # 2. Get the content of all included files
    content_section = get_file_contents(PROJECT_ROOT)
    
    # 3. Write everything to the output file
    try:
        with open(output_path, 'w', encoding='utf-8') as outfile:
            outfile.write(tree_section)
            outfile.write("\n" + "=" * 100 + "\n\n")
            outfile.write("üìÑ **INDIVIDUAL FILE CONTENTS**\n\n")
            outfile.write("=" * 100 + "\n\n")
            outfile.write(content_section)
        
        print(f"\n‚úÖ Successfully created output file: {output_path}")

    except Exception as e:
        print(f"\n‚ùå An error occurred while writing the output file: {e}")

if __name__ == "__main__":
    main()```

--------------------------------------------------------------------------------üìÑ FILE PATH: next-env.d.ts--------------------------------------------------------------------------------```/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.
```

--------------------------------------------------------------------------------üìÑ FILE PATH: next.config.mjs--------------------------------------------------------------------------------```/** @type {import('next').NextConfig} */
const nextConfig = {
    // FIX: Set swcMinify to true to solve the "Legacy JavaScript" audit.
    swcMinify: true,
    
    // FIX: Removing the problematic experimental block entirely to prevent the "Cannot find module 'critters'" build failure
    // The previous flags (optimizeCss: true) introduced an unstable, complex dependency.
    experimental: {
        // Keeping a blank experimental block is safest for build stability.
    },
};

export default nextConfig;```

--------------------------------------------------------------------------------üìÑ FILE PATH: package.json--------------------------------------------------------------------------------```{
  "name": "mvvppaint",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "postinstall": "partytown copylib public/~partytown"
  },
  "dependencies": {
    "@auth/core": "^0.34.3",
    "@auth/drizzle-adapter": "^1.11.1",
    "@builder.io/partytown": "^0.10.3",
    "@hookform/resolvers": "^5.2.2",
    "@radix-ui/react-slot": "^1.2.4",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "drizzle-orm": "^0.31.2",
    "lucide-react": "^0.553.0",
    "next": "^16.1.1",
    "next-auth": "^4.24.13",
    "next-themes": "^0.4.6",
    "pg": "^8.16.3",
    "postgres": "^3.4.4",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "react-hook-form": "^7.66.0",
    "tailwind-merge": "^3.3.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^4.1.12"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "autoprefixer": "^10.4.22",
    "critters": "^0.0.25",
    "drizzle-kit": "^0.23.0",
    "eslint": "^9",
    "eslint-config-next": "^16.1.1",
    "postcss": "^8",
    "tailwindcss": "^3.4.1",
    "typescript": "^5"
  }
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: postcss.config.mjs--------------------------------------------------------------------------------```/** @type {import('postcss-load-config').Config} */
const config = {
  plugins: {
    tailwindcss: {},
    // Autoprefixer is optional but highly recommended for cross-browser compatibility
    // You should ensure it's installed as a devDependency in package.json
    autoprefixer: {},
  },
};
export default config;```

--------------------------------------------------------------------------------üìÑ FILE PATH: safe_seo_installer.py--------------------------------------------------------------------------------```import os
import shutil
from pathlib import Path

# ==============================================================================
# CONFIGURATION
# ==============================================================================
PROJECT_ROOT = os.getcwd()
SRC_DIR = os.path.join(PROJECT_ROOT, "src")
UNDO_SCRIPT_NAME = "undo_seo_changes.py"

# Files to be created (Path relative to src, Content)
FILES_TO_CREATE = [
    {
        "path": os.path.join("data", "locations.ts"),
        "content": """export type ServiceLocation = {
  slug: string;
  name: string;
  metaTitle: string;
  metaDescription: string;
  landmarks: string[];
};

export const serviceLocations: ServiceLocation[] = [
  {
    slug: "midrand",
    name: "Midrand",
    metaTitle: "Commercial Painting & Waterproofing Contractors Midrand",
    metaDescription: "Specialized structural repairs and industrial painting in Midrand. Serving Waterfall City, Kyalami, and surrounding business parks. Independent QA guaranteed.",
    landmarks: ["Waterfall City", "Mall of Africa", "Kyalami Business Park"],
  },
  {
    slug: "sandton",
    name: "Sandton",
    metaTitle: "Sandton Body Corporate Painting & Maintenance",
    metaDescription: "Premium painting contractors for Sandton residential complexes and office blocks. We maintain assets in Morningside, Bryanston, and the CBD.",
    landmarks: ["Sandton City", "The Leonardo", "Alice Lane Precinct"],
  },
  {
    slug: "centurion",
    name: "Centurion",
    metaTitle: "Centurion Industrial Coatings & Damp Proofing",
    metaDescription: "Approved applicators for industrial parks in Centurion. We fix rising damp and corrosion in Highveld, Irene, and Rooihuiskraal.",
    landmarks: ["Centurion Mall", "Highveld Techno Park", "Irene Link"],
  },
  {
    slug: "pretoria-east",
    name: "Pretoria East",
    metaTitle: "Pretoria East Waterproofing & Painting Specialists",
    metaDescription: "Solving water ingress and spalling issues in Pretoria East. Expert contractors for Faerie Glen, Menlyn, and luxury estates.",
    landmarks: ["Menlyn Maine", "Woodhill Estate", "The Grove"],
  },
  {
    slug: "benoni",
    name: "Benoni",
    metaTitle: "Benoni Painting Contractors | Structural Repairs & Waterproofing",
    metaDescription: "Expert painting and waterproofing services in Benoni. Serving Farrarmere, Rynfield, Lakefield, Northmead, and Eastlands. Owner-supervised quality guaranteed.",
    landmarks: ["Farrarmere", "Rynfield", "Lakefield", "Northmead", "Eastlands"],
  },
  {
    slug: "kempton-park",
    name: "Kempton Park",
    metaTitle: "Kempton Park Industrial Painting & Coating Specialists",
    metaDescription: "Professional painting contractors in Kempton Park. We serve Allen Grove, Aston Manor, Birch Acres, Glen Marais, and surrounding industrial areas.",
    landmarks: ["Allen Grove", "Aston Manor", "Birch Acres", "Glen Marais"],
  },
  {
    slug: "alberton",
    name: "Alberton",
    metaTitle: "Alberton Painting & Waterproofing | Estate Specialists",
    metaDescription: "Premium painting contractors for Alberton estates and commercial properties. Expert services in Meyersdal, Brackenhurst, Randhart, and surrounding areas.",
    landmarks: ["Meyersdal Eco Estate", "Brackenhurst", "Randhart"],
  },
  {
    slug: "johannesburg-north",
    name: "Johannesburg North",
    metaTitle: "Johannesburg North Painting Contractors | Melville & Rosebank",
    metaDescription: "Specialized painting and waterproofing services in Johannesburg North. Serving Melville, Rosebank, Parktown, and surrounding affluent suburbs.",
    landmarks: ["Melville", "Rosebank", "Parktown", "Parkhurst"],
  },
  {
    slug: "serengeti-estate",
    name: "Serengeti Golf & Wildlife Estate",
    metaTitle: "Serengeti Estate Painters | HOA Compliant Painting Services",
    metaDescription: "Fully compliant painting contractors for Serengeti Golf & Wildlife Estate. We understand HOA guidelines and use approved color palettes and finishes.",
    landmarks: ["Serengeti Golf Course", "Wildlife Reserve"],
  },
  {
    slug: "ebotse-estate",
    name: "Ebotse Golf Estate",
    metaTitle: "Ebotse Estate Painting Contractors | Luxury Estate Specialists",
    metaDescription: "Premium painting and waterproofing services for Ebotse Golf Estate. Expert contractors familiar with estate security protocols and architectural guidelines.",
    landmarks: ["Ebotse Golf Course", "Luxury Estates"],
  },
  {
    slug: "meyersdal-estate",
    name: "Meyersdal Eco Estate",
    metaTitle: "Meyersdal Estate Painters | Eco-Friendly Coating Solutions",
    metaDescription: "Specialized painting contractors for Meyersdal Eco Estate. We use low-VOC paints and eco-friendly coatings compliant with estate environmental standards.",
    landmarks: ["Meyersdal Eco Estate", "Nature Reserve"],
  },
];

export function getLocation(slug: string) {
  return serviceLocations.find((loc) => loc.slug === slug);
}
"""
    },
    {
        "path": os.path.join("app", "locations", "[city]", "page.tsx"),
        "content": """import { notFound } from "next/navigation";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { AccreditationsStrip } from "@/components/accreditations-strip";
import { MapPin, CheckSquare, Shield, Phone } from "lucide-react";
import { serviceLocations, getLocation } from "@/data/locations";
import { siteConfig } from "@/lib/seo";
import { buildPageMetadata } from "@/lib/metadata";

// 1. Static Params Generation
export function generateStaticParams() {
  return serviceLocations.map((location) => ({
    city: location.slug,
  }));
}

// 2. Dynamic SEO Metadata (Next.js 16: async params)
export async function generateMetadata({ params }: { params: Promise<{ city: string }> }) {
  const { city } = await params;
  const loc = getLocation(city);
  if (!loc) return {};

  return buildPageMetadata({
    title: loc.metaTitle,
    description: loc.metaDescription,
    path: `/locations/${loc.slug}`,
  });
}

// 3. The Local Landing Page Component (Next.js 16: async params)
export default async function LocationPage({ params }: { params: Promise<{ city: string }> }) {
  const { city } = await params;
  const loc = getLocation(city);
  if (!loc) notFound();

  const localSchema = {
    "@context": "https://schema.org",
    "@type": "Service",
    "name": `Painting & Waterproofing in ${loc.name}`,
    "provider": {
      "@type": "LocalBusiness",
      "name": siteConfig.name,
      "address": {
        "@type": "PostalAddress",
        "addressLocality": loc.name,
        "addressRegion": "Gauteng",
        "addressCountry": "ZA"
      }
    },
    "areaServed": {
      "@type": "City",
      "name": loc.name
    }
  };

  return (
    <div className="bg-primary pt-24 text-white">
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(localSchema) }}
      />

      {/* HERO SECTION */}
      <section className="relative py-24 px-4 bg-gray-900 border-b-4 border-secondary">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center space-x-2 text-tertiary mb-4">
            <MapPin className="w-5 h-5" />
            <span className="uppercase tracking-widest font-bold">{loc.name} Contractor</span>
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl mb-6">
            Reliable Asset Maintenance in {loc.name}.
          </h1>
          <p className="text-xl text-gray-400 max-w-3xl mb-8">
            We provide owner-supervised structural repairs, waterproofing, and painting services 
            specifically for commercial and body corporate assets near 
            <span className="text-white font-semibold"> {loc.landmarks.join(", ")}</span>.
          </p>
          <Button asChild className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 px-8">
            <Link href="/contact">Get a {loc.name} Quote &rarr;</Link>
          </Button>
        </div>
      </section>

      {/* LOCAL SERVICE GRID */}
      <section className="py-20 px-4 bg-primary">
        <div className="max-w-7xl mx-auto">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-tertiary">
              <Shield className="w-10 h-10 text-tertiary mb-4" />
              <h3 className="text-2xl font-bold mb-2">{loc.name} Waterproofing</h3>
              <p className="text-gray-400">Guaranteed flat roof and balcony systems designed for the specific climate challenges of {loc.name}.</p>
            </div>
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-secondary">
              <CheckSquare className="w-10 h-10 text-secondary mb-4" />
              <h3 className="text-2xl font-bold mb-2">Independent QA</h3>
              <p className="text-gray-400">We bring independent inspectors to every site in {loc.name} to verify film thickness and adhesion.</p>
            </div>
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-tertiary">
              <Phone className="w-10 h-10 text-tertiary mb-4" />
              <h3 className="text-2xl font-bold mb-2">Fast Response</h3>
              <p className="text-gray-400">Our teams are active in {loc.landmarks[0]} and surrounding areas daily, ensuring rapid assessment times.</p>
            </div>
          </div>
        </div>
      </section>

      <AccreditationsStrip />
      <CtaFinalStrip />
    </div>
  );
}
"""
    },
    {
        "path": os.path.join("app", "blog", "[pillar]", "[cluster]", "opengraph-image.tsx"),
        "content": """import { ImageResponse } from 'next/og'
import { getClusterBySlugs } from '@/lib/pillars'

export const runtime = 'edge'
export const size = { width: 1200, height: 630 }
export const contentType = 'image/png'

export const headers = {
  'Cache-Control': 'public, max-age=86400, stale-while-revalidate=3600',
}

export default async function Image({ params }: { params: { pillar: string; cluster: string } }) {
  const cluster = getClusterBySlugs(params.pillar, params.cluster)
  const title = cluster?.title || 'Maverick Painting Technical Guide'
  const category = params.pillar.replace('-', ' ').toUpperCase()

  return new ImageResponse(
    (
      <div
        style={{
          background: '#171716', // Primary Dark
          width: '100%',
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          padding: '80px',
          justifyContent: 'space-between',
        }}
      >
        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '16px', background: '#5AD5E2' }} />
        <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>
          <div style={{ fontSize: 32, color: '#A9D834', letterSpacing: '0.1em', fontWeight: 700, textTransform: 'uppercase' }}>
            {category} GUIDE
          </div>
          <div style={{ fontSize: 72, color: 'white', fontWeight: 900, lineHeight: 1.1, textTransform: 'uppercase' }}>
            {title}
          </div>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>
          <div style={{ width: '60px', height: '60px', background: '#A9D834', borderRadius: '50%' }} />
          <div style={{ fontSize: 30, color: 'gray', fontWeight: 600 }}>MAVERICK PAINTING</div>
        </div>
      </div>
    ),
    { ...size }
  )
}
"""
    },
    {
        "path": os.path.join("components", "analytics", "gtm-partytown.tsx"),
        "content": """'use client'

import Script from 'next/script'

export function GoogleTagManager({ containerId }: { containerId: string }) {
  return (
    <>
      <Script
        id="gtm-partytown"
        type="text/partytown"
        dangerouslySetInnerHTML={{
          __html: `
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','${containerId}');
          `,
        }}
      />
    </>
  )
}
"""
    }
]

# ==============================================================================
# LOGIC
# ==============================================================================

def generate_undo_script(created_files, backed_up_files):
    undo_content = f"""import os
import shutil

# AUTO-GENERATED UNDO SCRIPT
# RUNNING THIS WILL DELETE THE FILES CREATED BY THE SEO INSTALLER

FILES_TO_REMOVE = {created_files}
BACKUPS_TO_RESTORE = {backed_up_files}

def main():
    print("=== STARTING UNDO PROCESS ===")
    
    # 1. Remove created files
    for file_path in FILES_TO_REMOVE:
        if os.path.exists(file_path):
            try:
                os.remove(file_path)
                print(f"[DELETED] {{file_path}}")
                # Try to remove empty parent directories
                try:
                    os.rmdir(os.path.dirname(file_path))
                    print(f"[CLEANED DIR] {{os.path.dirname(file_path)}}")
                except OSError:
                    pass # Directory not empty
            except Exception as e:
                print(f"[ERROR] Could not delete {{file_path}}: {{e}}")
        else:
            print(f"[SKIP] File not found: {{file_path}}")

    # 2. Restore backups
    for original, backup in BACKUPS_TO_RESTORE.items():
        if os.path.exists(backup):
            try:
                shutil.move(backup, original)
                print(f"[RESTORED] {{original}} from backup")
            except Exception as e:
                print(f"[ERROR] Could not restore {{original}}: {{e}}")

    print("=== UNDO COMPLETE. YOUR PROJECT IS RESTORED. ===")

if __name__ == "__main__":
    main()
"""
    with open(UNDO_SCRIPT_NAME, "w", encoding="utf-8") as f:
        f.write(undo_content)
    print(f"\n[SAFETY] Undo script created at: {UNDO_SCRIPT_NAME}")

def main():
    print("=== ORACLE SEO INSTALLER: SAFE MODE ===")
    print(f"Target Project: {PROJECT_ROOT}")
    
    created_files = []
    backed_up_files = {}

    for item in FILES_TO_CREATE:
        full_path = os.path.join(SRC_DIR, item["path"])
        dir_name = os.path.dirname(full_path)
        
        # 1. Create Directory if missing
        if not os.path.exists(dir_name):
            os.makedirs(dir_name, exist_ok=True)
            print(f"[DIR] Created {dir_name}")

        # 2. Safety Check: Backup if exists
        if os.path.exists(full_path):
            backup_path = full_path + ".bak_oracle"
            shutil.copy2(full_path, backup_path)
            backed_up_files[full_path] = backup_path
            print(f"[BACKUP] Existing file backed up to {backup_path}")

        # 3. Write File
        try:
            with open(full_path, "w", encoding="utf-8") as f:
                f.write(item["content"])
            created_files.append(full_path)
            print(f"[WRITE] Successfully created {item['path']}")
        except Exception as e:
            print(f"[ERROR] Failed to write {item['path']}: {e}")

    # 4. Generate Undo Script
    generate_undo_script(created_files, backed_up_files)

    print("\n=== INSTALLATION COMPLETE ===")
    print("To connect these new files, you must manually:")
    print("1. Open `src/app/sitemap.ts` and import `serviceLocations`.")
    print("2. Open `src/app/layout.tsx` and add `<GoogleTagManager>`.")
    print("\nIf anything looks wrong, run:")
    print(f"python {UNDO_SCRIPT_NAME}")

if __name__ == "__main__":
    main()```

--------------------------------------------------------------------------------üìÑ FILE PATH: tailwind.config.ts--------------------------------------------------------------------------------```// tailwind.config.ts
import type { Config } from "tailwindcss"

const config = {
  // Uses the content paths generated by create-next-app and shadcn/ui
  content: [
    './pages/**/*.{ts,tsx}',
    './components/**/*.{ts,tsx}',
    './app/**/*.{ts,tsx}',
    './src/**/*.{ts,tsx}',
  ],
  prefix: "",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
 
    
    extend: { 
      // Custom Colors Redefined to Match HTML
      colors: {
        'primary': {
          DEFAULT: '#171716', // Maverick-base (Dark Text/Background)
          foreground: '#FAFAFA', // White/Light contrast text on primary
        },
        'secondary': {
          DEFAULT: '#5AD5E2', // Primary Blue/Cyan (Target color for button/hover text)
 
          foreground: '#171716', // Dark text on secondary
          'dark-text': '#008BAD', 
        },
        'tertiary': {
          DEFAULT: '#A9D834', // Primary Green/Lime (Maverick-Accent)
          foreground: '#171716', // Dark text on tertiary
          'dark-text': '#769623', 
        },
        'form-gold': '#FFC33A', // Used for main CTA button
        'header-dark': '#1a1919', // Header background
  
        'footer-dark': '#121111', // Footer background

        // --- NEW WHATSAPP GREEN ---
        'whatsapp-green': '#25D366', 

        // Standard shadcn/ui colors (Consolidated)
        border: "hsl(var(--border))",
    
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        card: {
 
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
        
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
 
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
      },
    
      // Font Migration
      fontFamily: {
        sans: ['var(--font-geist-sans)', 'sans-serif'],
        mono: ['var(--font-geist-mono)', 'monospace'],
      },
    
      // --- Custom Keyframes Definition (FIXED SYNTAX) ---
      keyframes: { 
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
   
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
   
        },
        // **SYNTAX CORRECTED: Ensure 'transform' is used for each %**
        "shake-logo": { 
            "0%": { transform: "translateX(0)" },
            "25%": { transform: "translateX(-3px) rotate(-2deg)" },
   
            "50%": { transform: "translateX(3px) rotate(2deg)" },
            "75%": { transform: "translateX(-3px) rotate(-2deg)" },
            // COMMA ADDED AND SYNTAX CORRECTED
            "100%": { transform: "translateX(0)" }, 
        },
        "infinite-scroll": {
            from: { transform: "translateX(0)" },
            to: { transform: "translateX(-50%)" }, 
        }
      }, 
      
      // --- Custom Animation Properties Definition ---
      animation: { 
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
        "shake": 
 "shake-logo 1.5s ease-in-out 3", 
        "infinite-scroll": "infinite-scroll 25s linear infinite", 
      }, 
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config

export default config```

--------------------------------------------------------------------------------üìÑ FILE PATH: tsconfig.json--------------------------------------------------------------------------------```{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: undo_seo_changes.py--------------------------------------------------------------------------------```import os
import shutil

# AUTO-GENERATED UNDO SCRIPT
# RUNNING THIS WILL DELETE THE FILES CREATED BY THE SEO INSTALLER

FILES_TO_REMOVE = ['C:\\Users\\User1\\mvvppaint\\src\\data\\locations.ts', 'C:\\Users\\User1\\mvvppaint\\src\\app\\locations\\[city]\\page.tsx', 'C:\\Users\\User1\\mvvppaint\\src\\app\\blog\\[pillar]\\[cluster]\\opengraph-image.tsx', 'C:\\Users\\User1\\mvvppaint\\src\\components\\analytics\\gtm-partytown.tsx']
BACKUPS_TO_RESTORE = {}

def main():
    print("=== STARTING UNDO PROCESS ===")
    
    # 1. Remove created files
    for file_path in FILES_TO_REMOVE:
        if os.path.exists(file_path):
            try:
                os.remove(file_path)
                print(f"[DELETED] {file_path}")
                # Try to remove empty parent directories
                try:
                    os.rmdir(os.path.dirname(file_path))
                    print(f"[CLEANED DIR] {os.path.dirname(file_path)}")
                except OSError:
                    pass # Directory not empty
            except Exception as e:
                print(f"[ERROR] Could not delete {file_path}: {e}")
        else:
            print(f"[SKIP] File not found: {file_path}")

    # 2. Restore backups
    for original, backup in BACKUPS_TO_RESTORE.items():
        if os.path.exists(backup):
            try:
                shutil.move(backup, original)
                print(f"[RESTORED] {original} from backup")
            except Exception as e:
                print(f"[ERROR] Could not restore {original}: {e}")

    print("=== UNDO COMPLETE. YOUR PROJECT IS RESTORED. ===")

if __name__ == "__main__":
    main()
```

--------------------------------------------------------------------------------üìÑ FILE PATH: docs\revalidation-webhook.md--------------------------------------------------------------------------------```# On-Demand Revalidation Webhook

The `/api/revalidate` route lets our CMS publish updates instantly by purging the exact pillar/cluster caches affected by a content change.

## 1. Configure the Secret

Add a strong random string to your environment (same value for Vercel + local development):

```
REVALIDATE_SECRET="replace_with_random_string"
```

## 2. Endpoint & Payload

- **URL:** `POST https://<your-domain>/api/revalidate`
- **Headers:** `Content-Type: application/json`
- **Body:**

```jsonc
{
  "secret": "replace_with_random_string",
  "scope": "pillar",      // "all" | "pillar" | "cluster" (defaults to "all")
  "pillar": "waterproofing", // required for pillar/cluster scopes
  "cluster": "liquid-vs-torch-on" // required only when scope === "cluster"
}
```

### Scopes

| Scope     | Required Fields           | Description                                                   |
|-----------|---------------------------|---------------------------------------------------------------|
| `all`     | `secret`                  | Revalidates every pillar + cluster + `/sitemap.xml`.          |
| `pillar`  | `secret`, `pillar`        | Revalidates the pillar page, all of its cluster pages, and tags. |
| `cluster` | `secret`, `pillar`, `cluster` | Revalidates just the specified cluster page/tag.             |

## 3. Finding Slugs

Slugs must match the entries in `src/lib/pillars.ts`.

## 4. Sample Requests

### Revalidate a single cluster

```bash
curl -X POST https://maverickpainting.co.za/api/revalidate \
  -H "Content-Type: application/json" \
  -d '{
    "secret": "replace_with_random_string",
    "scope": "cluster",
    "pillar": "waterproofing",
    "cluster": "liquid-vs-torch-on"
  }'
```

### Revalidate an entire pillar

```bash
curl -X POST https://maverickpainting.co.za/api/revalidate \
  -H "Content-Type: application/json" \
  -d '{
    "secret": "replace_with_random_string",
    "scope": "pillar",
    "pillar": "industrial"
  }'
```

### Revalidate everything (use sparingly)

```bash
curl -X POST https://maverickpainting.co.za/api/revalidate \
  -H "Content-Type: application/json" \
  -d '{
    "secret": "replace_with_random_string",
    "scope": "all"
  }'
```

## 5. CMS Webhook Mapping

| CMS Event                        | Recommended Scope | Payload Notes                                   |
|---------------------------------|-------------------|-------------------------------------------------|
| Update to a shared pillar intro | `pillar`          | Set `pillar` to the affected pillar slug.       |
| Update to a single cluster page | `cluster`         | Include both `pillar` and `cluster` slugs.      |
| Bulk migration / taxonomy change| `all`             | Use only for major rollouts due to cache churn. |

## 6. Response

Successful calls return `200` with a JSON summary:

```json
{
  "revalidated": [
    {
      "pillar": "waterproofing",
      "paths": ["/blog/waterproofing", "/blog/waterproofing"],
      "clusters": [
        { "slug": "liquid-vs-torch-on", "path": "/blog/waterproofing/liquid-vs-torch-on" }
      ]
    }
  ]
}
```

Errors return `4xx/5xx` with an `error` message (invalid secret, unknown slug, malformed JSON, etc.).

```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\partytown-atomics.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(e=>{const t=()=>{},r=e=>e.length,n=e=>{var t,r,n;try{const r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if(r)return r}catch(e){}try{const t=null===(n=null===(r=null==e?void 0:e.__zone_symbol__originalInstance)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;if(t)return t}catch(e){}return""},i=(e,t)=>e.startsWith(t),s=e=>!(i(e,"webkit")||i(e,"toJSON")||i(e,"constructor")||i(e,"toString")||i(e,"_")),o=e=>11===e.nodeType&&e.host?"#s":e.nodeName,a=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),c={Anchor:"a",DList:"dl",Image:"img",OList:"ol",Paragraph:"p",Quote:"q",TableCaption:"caption",TableCell:"td",TableCol:"colgroup",TableRow:"tr",TableSection:"tbody",UList:"ul"},l={Graphics:"g",SVG:"svg"},u={preserveBehavior:!1},p=Object.freeze((e=>{const t=new Set;let r=[];do{Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&t.add(e)}))}while((r=Object.getPrototypeOf(r))!==Object.prototype);return Array.from(t)})()),d=Symbol(),h=Symbol(),g=new Map,m=new Map,f={},y=new WeakMap,w=(e,t)=>{if(e)return(t=y.get(e))||(t=e[d])||v(e,t=a()),t},$=(e,t,r,n,i)=>{if((r=f[e])&&r.U){if(e===t)return r.U;if(n=r.U.document,"d"===(i=t.split(".").pop()))return n;if("e"===i)return n.documentElement;if("h"===i)return n.head;if("b"===i)return n.body}return g.get(t)},v=(e,t,r)=>{e&&(g.set(t,e),e[d]=t,e[h]=r=Date.now(),r>b+5e3&&(g.forEach(((e,t)=>{e[h]<b&&e.nodeType&&!e.isConnected&&g.delete(t)})),b=r))};let b=0;const S=e.parent,E=document.implementation.createHTMLDocument(),T=S.partytown||{},I=(T.lib||"/~partytown/")+"",R=(e,t,r)=>{const n=((e,t)=>{return r=e,n={value:t},Object.defineProperty(r,"name",{...n,configurable:!0});var r,n})(class extends f[e].U.HTMLElement{},r[0]);return"connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",").map((r=>n.prototype[r]=function(...n){t.postMessage([15,e,w(this),r,n])})),n.observedAttributes=r[1],n},M=(e,t,r,s,a,c)=>void 0!==t&&(s=typeof t)?"string"===s||"number"===s||"boolean"===s||null==t?[0,t]:"function"===s?[6]:(r=r||new Set)&&Array.isArray(t)?r.has(t)?[1,[]]:r.add(t)&&[1,t.map((t=>M(e,t,r)))]:"object"===s?A(t)?[14,{name:t.name,message:t.message,stack:t.stack}]:""===(a=n(t))?[2,{}]:"Window"===a?[3,[e,e]]:"HTMLCollection"===a||"NodeList"===a?[7,Array.from(t).map((t=>M(e,t,r)[1]))]:a.endsWith("Event")?[5,x(e,t,r)]:"CSSRuleList"===a?[12,Array.from(t).map(N)]:i(a,"CSS")&&a.endsWith("Rule")?[11,N(t)]:"CSSStyleDeclaration"===a?[13,x(e,t,r)]:"Attr"===a?[10,[t.name,t.value]]:t.nodeType?[3,[e,w(t),o(t),c]]:[2,x(e,t,r,!0,!0)]:void 0:t,x=(e,t,r,i,o,a,c,l)=>{if(a={},!r.has(t))for(c in r.add(t),t)s(c)&&(l="path"===c&&n(t).endsWith("Event")?t.composedPath():t[c],(i||"function"!=typeof l)&&(o||""!==l)&&(a[c]=M(e,l,r)));return a},N=e=>{let t,r={};for(t in e)U.includes(t)&&(r[t]=String(e[t]));return r};let L=null;const A=t=>{var r;return L=(null===(r=e.top)||void 0===r?void 0:r.Error)||L,t instanceof L},C=(t,r,n,i)=>r?(n=r[0],i=r[1],0===n?i:4===n?O(t,i):1===n?i.map((e=>C(t,e))):3===n?$(i[0],i[1]):5===n?j(P(t,i)):2===n?P(t,i):8===n?i:9===n?new e[r[2]](i):void 0):void 0,O=(e,{V:t,w:r,L:n},i)=>((i=m.get(n))||(i=function(...i){e.postMessage([9,{V:t,w:r,L:n,R:M(t,this),b:M(t,i)}])},m.set(n,i)),i),j=e=>new("detail"in e?CustomEvent:Event)(e.type,e),P=(e,t,r,n)=>{for(n in r={},t)r[n]=C(e,t[n]);return r},U="cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(","),H=async(e,t)=>{let n,i,s,o,a,c,l={F:t.F},u=r(t.Q),p=0;for(;p<u;p++)try{c=p===u-1,n=t.Q[p],i=n.V,s=n.a,!f[i]&&i.startsWith("f_")&&await new Promise((e=>{let t=0,r=()=>{f[i]||t++>1e3?e():requestAnimationFrame(r)};r()})),1===s[0]&&s[1]in f[i].U?v(new f[i].U[s[1]](...C(e,s[2])),n.w):(o=$(i,n.w),o?(a=_(e,i,o,s,c,n.r),n.d&&("string"==typeof n.d?v(a,n.d):f[n.d.V]={V:n.d.V,U:{document:a}}),"object"==typeof(d=a)&&d&&d.then&&(a=await a,c&&(l.z=!0)),c&&(l.M=M(i,a,void 0,void 0,void 0,n.w))):l.p=n.w+" not found")}catch(e){c?l.p=String(e.stack||e):console.error(e)}var d;return l},_=(e,t,i,s,o,a)=>{let c,l,u,p,d,h=0,g=r(s);for(;h<g;h++){l=s[h],c=s[h+1],u=s[h-1];try{if(!Array.isArray(c))if("string"==typeof l||"number"==typeof l){if(h+1===g&&a)return d={},a.map((e=>d[e]=i[e])),d;i=i[l]}else{if(0===c)return void(i[u]=C(e,l));if("function"==typeof i[u]&&(p=C(e,l),"define"===u&&"CustomElementRegistry"===n(i)&&(p[1]=R(t,e,p[1])),"insertRule"===u&&p[1]>r(i.cssRules)&&(p[1]=r(i.cssRules)),i=i[u].apply(i,p),"play"===u))return Promise.resolve()}}catch(e){if(o)throw e;console.debug(e)}}return i},k=(e,t)=>{let n,i,s,o=t.V,a=t.U,c=a.document,l='script[type="text/partytown"]:not([data-ptid]):not([data-pterror])',d=l+":not([async]):not([defer])";c&&c.body?(n=c.querySelector(d),n||(n=c.querySelector(l)),n?(n.dataset.ptid=i=w(n,o),s={V:o,w:i},n.src?(s.S=n.src,s.H=n.dataset.ptsrc||n.src):s.j=n.innerHTML,e.postMessage([7,s])):(t.x||(t.x=1,((e,t,n)=>{let i,s,o=n._ptf,a=(n.partytown||{}).forward||[],c=(r,n)=>e.postMessage([10,{V:t,q:r,b:M(t,Array.from(n))}]);if(n._ptf=void 0,a.map((e=>{const[t,{preserveBehavior:i}]=(e=>{if("string"==typeof e)return[e,u];const[t,r=u]=e;return[t,{...u,...r}]})(e);s=n,t.split(".").map(((e,t,o)=>{var a;s=s[o[t]]=t+1<r(o)?s[o[t]]||(a=o[t+1],p.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:t,thisObject:r}=((e,t)=>{let r=e;for(let e=0;e<t.length-1;e+=1)r=r[t[e]];return{thisObject:r,methodOrProperty:t.length>0?r[t[t.length-1]]:void 0}})(n,o);"function"==typeof t&&(e=(...e)=>t.apply(r,...e))}return(...t)=>{let r;return e&&(r=e(t)),c(o,t),r}})()}))})),o)for(i=0;i<r(o);i+=2)c(o[i],o[i+1])})(e,o,a),c.dispatchEvent(new CustomEvent("pt0"))),e.postMessage([8,o]))):requestAnimationFrame((()=>k(e,t)))},B=(e,t,r)=>{if(!y.has(r)){y.set(r,t);const n=r.document,i=r.history,s=y.get(r.parent);let o=!1;const a=[],c=e=>{o?e():a.push(e)},l=()=>{e.postMessage([5,{V:t,J:s,S:n.baseURI,T:n.visibilityState}]),setTimeout((()=>{o=!0,a.forEach((e=>{e()}))}))},u=i.pushState.bind(i),p=i.replaceState.bind(i),d=(r,i,s,o)=>()=>{e.postMessage([13,{V:t,type:r,state:i,url:n.baseURI,newUrl:s,oldUrl:o}])};i.pushState=(e,t,r)=>{u(e,t,r),c(d(0,e,null==r?void 0:r.toString()))},i.replaceState=(e,t,r)=>{p(e,t,r),c(d(1,e,null==r?void 0:r.toString()))},r.addEventListener("popstate",(e=>{c(d(2,e.state))})),r.addEventListener("hashchange",(e=>{c(d(3,{},e.newURL,e.oldURL))})),r.addEventListener("ptupdate",(()=>{k(e,f[t])})),n.addEventListener("visibilitychange",(()=>e.postMessage([14,t,n.visibilityState]))),f[t]={V:t,U:r},"complete"===n.readyState?l():r.addEventListener("load",l)}},V=()=>{const e=Object.getOwnPropertyNames(S).map((e=>((e,t,r,n)=>{if(r=t.match(/^(HTML|SVG)(.+)Element$/))return n=r[2],"S"==t[0]?e.createElementNS("http://www.w3.org/2000/svg",l[n]||n.slice(0,2).toLowerCase()+n.slice(2)):e.createElement(c[n]||n)})(E,e))).filter((e=>e)).map((e=>[e]));return D(e,[])},D=(e,t)=>{const r=new Set(["Object"]);return e.filter((e=>e[0])).map((e=>{const t=e[0],r=e[1],i=n(t);return[i,S[i].prototype,t,r]})).map((([e,n,i,s])=>F(r,t,e,n,i,s))),t},W=(e,t,r)=>{let n=[],i=[e,"Object",n];for(r in t)J(n,t,r);return i},F=(e,t,r,i,s,a)=>{if(!e.has(r)){e.add(r);const c=Object.getPrototypeOf(i),l=n(c),u=[],p=Object.getOwnPropertyDescriptors(i);F(e,t,l,c,s,a);for(const e in p)J(u,s,e);t.push([r,l,u,a,o(s)])}},J=(e,t,r,i,o,a)=>{try{s(r)&&isNaN(r[0])&&"all"!==r&&("function"==(o=typeof(i=t[r]))?(String(i).includes("[native")||Object.getPrototypeOf(t)[r])&&e.push([r,5]):"object"===o&&null!=i?"Object"!==(a=n(i))&&"Function"!==a&&self[a]&&e.push([r,i.nodeType||a]):"symbol"!==o&&(r.toUpperCase()===r?e.push([r,6,i]):e.push([r,6])))}catch(e){console.warn(e)}},q=(e,r)=>void 0!==e[r]?new e[r](t):0;let G;(async e=>{const t=new SharedArrayBuffer(1073741824),r=new Int32Array(t);return(n,i)=>{const s=i[0],o=i[1];if(0===s){const e=(()=>{const e=E.createElement("i"),t=E.createTextNode(""),r=E.createComment(""),n=E.createDocumentFragment(),i=E.createElement("p").attachShadow({mode:"open"}),s=q(S,"IntersectionObserver"),o=q(S,"MutationObserver"),a=q(S,"ResizeObserver"),c=S.performance,l=S.screen,u=[[S.history],[c],[c.navigation],[c.timing],[l],[l.orientation],[S.visualViewport],[s,12],[o,12],[a,12],[t],[r],[n],[i],[e],[e.attributes],[e.classList],[e.dataset],[e.style],[E],[E.doctype]],p=[W("Window",S),W("Node",t)],d=function(e){return JSON.stringify(e,((e,t)=>("function"==typeof t&&(t=String(t)).startsWith(e+"(")&&(t="function "+t),"loadScriptsOnMainThread"===e&&(t=t.map((e=>Array.isArray(e)?e:["string"==typeof e?"string":"regexp","string"==typeof e?e:e.source]))),t)))}(T),h={i:d,v:D(u,p),C:new URL(I,S.location)+"",I:origin,$tabId$:S._pttab};return((e,t,r)=>{void 0!==t[r]&&e.push([r,"Object",Object.keys(t[r].prototype).map((e=>[e,6])),12])})(h.v,S,"IntersectionObserverEntry"),h})();e.P=t,n.postMessage([1,e])}else 2===i[0]?n.postMessage([3,V()]):11===s?e(o,(e=>{const t=JSON.stringify(e),n=t.length;for(let e=0;e<n;e++)r[e+1]=t.charCodeAt(e);r[0]=n,Atomics.notify(r,0)})):((e,t,r)=>{4===t[0]?B(e,a(),S):(r=f[t[1]])&&(7===t[0]?requestAnimationFrame((()=>k(e,r))):6===t[0]&&((e,t,r,n,i)=>{(i=t.U.document.querySelector(`[data-ptid="${r}"]`))&&(n?i.dataset.pterror=n:i.type+="-x",delete i.dataset.ptid),k(e,t)})(e,r,t[2],t[3]))})(n,i)}})(((e,t)=>H(G,e).then(t))).then((e=>{e&&(G=new Worker(URL.createObjectURL(new Blob(['/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */\n(e=>{const t=Symbol(),r=Symbol(),n=Symbol(),i=Symbol(),s=Symbol(),o=Symbol(),a=Symbol(),c=Symbol(),l=new Map,$={},d=new WeakMap,u=[],h={},p={},g=new Map,m=new Map,f="about:blank",w=e=>e.split(","),y=e=>{if(e=h.C+e,new URL(e).origin!=location.origin)throw"Invalid "+e;return e},v=w("clientWidth,clientHeight,clientTop,clientLeft,innerWidth,innerHeight,offsetWidth,offsetHeight,offsetTop,offsetLeft,outerWidth,outerHeight,pageXOffset,pageYOffset,scrollWidth,scrollHeight,scrollTop,scrollLeft"),S=w("childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling"),b=w("insertBefore,remove,removeChild,replaceChild"),I=w("className,width,height,hidden,innerHTML,innerText,textContent,text"),M=w("setAttribute,setAttributeNS,setProperty"),T=w("addEventListener,dispatchEvent,removeEventListener"),E=T.concat(M,w("add,observe,remove,unobserve")),N=/^[A-Z_]([A-Z0-9-]*[A-Z0-9])?$/,x=()=>{},L=e=>e.length,C=e=>{var t,r,n;try{const r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if(r)return r}catch(e){}try{const t=null===(n=null===(r=null==e?void 0:e.__zone_symbol__originalInstance)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;if(t)return t}catch(e){}return""},R=[],A=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),P="text/partytown",W=(e,t,r)=>Object.defineProperty(e,t,{...r,configurable:!0}),H=(e,t)=>W(e,"name",{value:t}),O=(e,t,r)=>W(e.prototype,t,r),j=(e,t)=>Object.defineProperties(e.prototype,t),k=(e,t,r)=>O(e,t,{value:r,writable:!0});function D(e,t){var r,n;return null!==(n=null===(r=e.loadScriptsOnMainThread)||void 0===r?void 0:r.map((([e,t])=>new RegExp("string"===e?t.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&"):t))).some((e=>e.test(t))))&&void 0!==n&&n}Object.freeze((e=>{const t=new Set;let r=[];do{Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&t.add(e)}))}while((r=Object.getPrototypeOf(r))!==Object.prototype);return Array.from(t)})());const U=(e,t)=>t in e[o],_=(e,t)=>e[o][t],B=(e,t,r)=>e[o][t]=r,F=(e,t,r,n,i,s)=>{if(!(i=l.get(t))&&r&&p[e]){const o=l.get(s||"");i=p[e].k(r,t,n,o),l.set(t,i)}return i},z=(e,t)=>k(e,"nodeType",t),q=(e,t)=>t.map((t=>O(e,t,{get(){let e=V(this,t),r=m.get(e);return r||(r=$e(this,[t]),m.set(e,r)),r}}))),V=(e,n,i)=>[e[t],e[r],n,...(i||R).map((e=>String(e&&e[t]?e[r]:e)))].join("."),X=(e,t)=>w(t).map((t=>O(e,t,{get(){return U(this,t)||B(this,t,$e(this,[t])),_(this,t)},set(e){_(this,t)!==e&&de(this,[t],e),B(this,t,e)}}))),Z=e=>v.map((t=>O(e,t,{get(){const e=g.get(V(this,t));if("number"==typeof e)return e;const r=$e(this,[t],v);return r&&"object"==typeof r?(Object.entries(r).map((([e,t])=>g.set(V(this,e),t))),r[t]):r}}))),G=(e,t)=>t.map((t=>{e.prototype[t]=function(...e){let r=V(this,t,e),n=g.get(r);return n||(n=ue(this,[t],e),g.set(r,n)),n}})),J=(e,n,i,s,o)=>{return void 0!==i&&(o=typeof i)?"string"===o||"boolean"===o||"number"===o||null==i?[0,i]:"function"===o?[4,{V:e,w:n,L:(a=i,(c=d.get(a))||(d.set(a,c=A()),$[c]=a),c)}]:(s=s||new Set)&&Array.isArray(i)?s.has(i)?[1,[]]:s.add(i)&&[1,i.map((t=>J(e,n,t,s)))]:"object"===o?i[r]?[3,[i[t],i[r]]]:i instanceof Event?[5,K(e,n,i,!1,s)]:Y&&i instanceof TrustedHTML?[0,i.toString()]:i instanceof ArrayBuffer?[8,i]:ArrayBuffer.isView(i)?[9,i.buffer,C(i)]:[2,K(e,n,i,!0,s)]:void 0:i;var a,c},Y="undefined"!=typeof TrustedHTML,K=(e,t,r,n,i,s,o,a)=>{if(s={},!i.has(r))for(o in i.add(r),r)a=r[o],(n||"function"!=typeof a)&&(s[o]=J(e,t,a,i));return s},Q=(e,n)=>e?J(e[t],e[r],n):[0,n],ee=(e,t,r,n,i,s,o,a)=>{if(n){if(i=n[0],s=n[1],0===i||11===i||12===i)return s;if(4===i)return re(r,s);if(6===i)return e&&r.length>0?(...t)=>ue(p[e].U,r,t,1):x;if(3===i)return te(s);if(7===i)return new ie(s.map(te));if(10===i)return new se(s);if(1===i)return s.map((n=>ee(e,t,r,n)));if(14===i)return new ne(s);for(a in o={},s)o[a]=ee(e,t,[...r,a],s[a]);if(13===i)return new p[e].U.CSSStyleDeclaration(e,t,r,o);if(5===i){if("message"===o.type&&o.origin){let e,t=JSON.stringify(o.data),r=u.find((e=>e.m===t));r&&(e=p[r.V],e&&(o.source=e.U,o.origin=e.E.origin))}return new Proxy(new Event(o.type,o),{get:(e,t)=>t in o?o[t]:"function"==typeof e[String(t)]?x:e[String(t)]})}if(2===i)return o}},te=([e,t,r,n])=>t===e&&p[e]?p[e].U:F(e,t,r,void 0,void 0,n),re=(e,{V:t,w:r,G:n,L:i})=>($[i]||d.set($[i]=function(...i){const s=F(t,r,n);return ue(s,e,i)},i),$[i]);class ne extends Error{constructor(e){super(e.message),this.name=e.name,this.message=e.message,this.stack=e.stack}}class ie{constructor(e){(this._=e).map(((e,t)=>this[t]=e))}entries(){return this._.entries()}forEach(e,t){this._.map(e,t)}item(e){return this[e]}keys(){return this._.keys()}get length(){return L(this._)}values(){return this._.values()}[Symbol.iterator](){return this._[Symbol.iterator]()}}const se=class{constructor(e){this.name=e[0],this.value=e[1]}get nodeName(){return this.name}get nodeType(){return 2}},oe=(e,t,r)=>console.warn(`Partytown unable to ${e} cross-origin ${t}: `+r.E),ae=[],ce=(e,n,i,o,a,c)=>{if(e[s]){if(ae.push({V:e[t],w:e[r],a:[...e[s],...n],d:o,r:a}),3===i)h.K([12,{F:A(),Q:[...ae]}],c?[c instanceof ArrayBuffer?c:c.buffer]:void 0),ae.length=0;else if(1===i)return le(!0);h.c=setTimeout(le,20)}},le=e=>{if(clearTimeout(h.c),L(ae)){const t=ae[L(ae)-1],r={F:`${A()}.${h.$tabId$}`,Q:[...ae]};if(ae.length=0,e){const e=((e,t)=>{const r=e.P,n=new Int32Array(r);Atomics.store(n,0,0),e.K([11,t]),Atomics.wait(n,0,0);let i=Atomics.load(n,0),s="",o=0;for(;o<i;o++)s+=String.fromCharCode(n[o+1]);return JSON.parse(s)})(h,r),n=e.z,i=ee(t.V,t.w,t.a,e.M);if(e.p){if(n)return Promise.reject(e.p);throw new Error(e.p)}return n?Promise.resolve(i):i}h.K([12,r])}},$e=(e,t,r,n)=>h.i.get&&(n=h.i.get(pe(e,t)))!==a?n:n=ce(e,t,1,void 0,r),de=(e,t,r,n)=>{if(h.i.set){if((n=h.i.set({value:r,prevent:c,...pe(e,t)}))===c)return;n!==a&&(r=n)}I.some((e=>t.includes(e)))&&(g.clear(),t[t.length-1]),t=[...t,Q(e,r),0],ce(e,t,2)},ue=(e,t,r,n,i,s,o,c)=>h.i.apply&&(o=h.i.apply({args:r,...pe(e,t)}))!==a?o:(c=t[L(t)-1],t=[...t,Q(e,r)],n=n||(E.includes(c)?2:1),"setAttribute"===c&&U(e,r[0])?B(e,r[0],r[1]):b.includes(c)?(g.clear(),m.clear()):M.includes(c)&&(n=2,g.clear()),o=ce(e,t,n,i,void 0,s)),he=(e,t,r)=>{ce(e,[1,t,Q(e,r)],1)},pe=(e,r)=>({name:r.join("."),continue:a,nodeName:e[n],constructor:C(e),instance:e,window:p[e[t]].U}),ge=(e,t,r,n)=>{let i={getItem(i){if(r)return ue(e,[t,"getItem"],[i],1);oe("get",t,n)},setItem(i,s){r?ue(e,[t,"setItem"],[i,s],1):oe("set",t,n)},removeItem(i){r?ue(e,[t,"removeItem"],[i],1):oe("remove",t,n)},key(i){if(r)return ue(e,[t,"key"],[i],1);oe("key",t,n)},clear(){r?ue(e,[t,"clear"],R,1):oe("clear",t,n)},get length(){if(r)return $e(e,[t,"length"]);oe("length",t,n)}};e[t]=new Proxy(i,{get:(e,t)=>Reflect.has(e,t)?Reflect.get(e,t):e.getItem(t),set:(e,t,r)=>(e.setItem(t,r),!0),has:(e,t)=>!!Reflect.has(e,t)||"string"==typeof t&&null!==e.getItem(t),deleteProperty:(e,t)=>(e.removeItem(t),!0)})},me=(e,t,r)=>{e[r]=H(class extends t{constructor(e,t,r,i){return super(e,t,r,i||{}),new Proxy(this,{get:(e,t)=>e[t]?e[t]:(e[t]||"string"!=typeof t||e[n][t]||(e[n][t]=$e(e,[t])),e[n][t]),set:(e,t,r)=>(e[n][t]=r,de(e,[t],r),g.clear(),!0)})}setProperty(...e){this[n][e[0]]=e[1],ue(this,["setProperty"],e,2),e[0],g.clear()}getPropertyValue(e){return this[e]}removeProperty(e){let t=this[n][e];return ue(this,["removeProperty"],[e],2),g.clear(),this[n][e]=void 0,t}},r)},fe=(e,t)=>{e[t]=H(class{constructor(e){this.ownerNode=e}get cssRules(){const e=this.ownerNode;return new Proxy({},{get(t,r){const n=String(r);return"item"===n?t=>ye(e,t):"length"===n?we(e).length:isNaN(n)?t[r]:ye(e,n)}})}insertRule(e,t){const r=we(this.ownerNode);return(t=void 0===t?0:t)>=0&&t<=r.length&&(ue(this.ownerNode,["sheet","insertRule"],[e,t],2),r.splice(t,0,0)),this.ownerNode,g.clear(),t}deleteRule(e){ue(this.ownerNode,["sheet","deleteRule"],[e],2),we(this.ownerNode).splice(e,1),this.ownerNode,g.clear()}get type(){return"text/css"}},t);const r={sheet:{get(){return new e[t](this)}}};j(e.HTMLStyleElement,r)},we=(e,t)=>((t=_(e,2))||(t=$e(e,["sheet","cssRules"]),B(e,2,t)),t),ye=(e,t,r)=>(0===(r=we(e))[t]&&(r[t]=$e(e,["sheet","cssRules",parseInt(t,10)])),r[t]),ve="0.10.3-dev1734732935152",Se=(e,t,r,n,i)=>{try{e.l=t,be(e,r)}catch(e){console.error(r,e),i=String(e.stack||e)}return e.l="",i},be=(e,t,r)=>{e.N=1;let n=((e,t)=>e.replace(/([a-zA-Z0-9_$\\.\\\'\\"\\`])?(\\.\\.\\.)?this(?![a-zA-Z0-9_$:])/g,((e,t,r)=>{const n=(t||"")+(r||"");return null!=t?n+"this":n+"(thi$(this)?window:this)"})))(t);t=`with(this){${n.replace(/\\/\\/# so/g,"//Xso")}\\n;function thi$(t){return t===this}};${(h.i.globalFns||[]).filter((e=>/[a-zA-Z_$][0-9a-zA-Z_$]*/.test(e))).map((e=>`(typeof ${e}==\'function\'&&(this.${e}=${e}))`)).join(";")};`+(r?"\\n//# sourceURL="+r:""),e.A||(t=t.replace(/.postMessage\\(/g,`.postMessage(\'${e.V}\',`)),new Function(t).call(e.U),e.N=0},Ie=(e,t,r)=>{(r=_(e,t))&&setTimeout((()=>r.map((e=>e({type:t})))))},Me=(e,t)=>{for(t=e.E;!t.host&&(t=(e=p[e.J]).E,e.V!==e.J););return t},Te=(e,t,r,n,i,s)=>(n=Me(e,n),i=new URL(t||"",n),r&&h.i.resolveUrl&&(s=h.i.resolveUrl(i,n,r))?s:i),Ee=(e,t,r)=>Te(e,t,r)+"",Ne=(e,t)=>{const r=Me(e),n=new URL(t||"",r);if(h.i.resolveSendBeaconRequestParameters){const e=h.i.resolveSendBeaconRequestParameters(n,r);if(e)return e}return{}},xe=()=>`<script src="${y("partytown.js?v="+ve)}"><\\/script>`,Le=e=>class{constructor(){this.s="",this.l=[],this.e=[],this.style={}}get src(){return this.s}set src(t){this.s=t,fetch(Ee(e,t,"image"),{mode:"no-cors",credentials:"include",keepalive:!0}).then((e=>{e.ok||0===e.status?this.l.map((e=>e({type:"load"}))):this.e.map((e=>e({type:"error"})))}),(()=>this.e.forEach((e=>e({type:"error"})))))}addEventListener(e,t){"load"===e&&this.l.push(t),"error"===e&&this.e.push(t)}removeEventListener(e,t){"load"===e&&(this.l=this.l.filter((e=>e!==t))),"error"===e&&(this.e=this.e.filter((e=>e!==t)))}get onload(){return this.l[0]}set onload(e){this.l=[e]}get onerror(){return this.e[0]}set onerror(e){this.e=[e]}},Ce={addEventListener:{value(...e){const t=e[0],r=_(this,t)||[];r.push(e[1]),B(this,t,r)}},async:{get:x,set:x},defer:{get:x,set:x},onload:{get(){let e=_(this,"load");return e&&e[0]||null},set(e){B(this,"load",e?[e]:null)}},onerror:{get(){let e=_(this,"error");return e&&e[0]||null},set(e){B(this,"error",e?[e]:null)}},getAttribute:{value(e){return"src"===e?this.src:ue(this,["getAttribute"],[e])}},setAttribute:{value(e,t){Re.includes(e)?this[e]=t:ue(this,["setAttribute"],[e,t])}}},Re=w("src,type"),Ae=(e,t)=>{const r={innerHTML:Pe,innerText:Pe,src:{get(){return _(this,4)||""},set(e){const r=Ee(t,e,null),n=h.i;e=Ee(t,e,"script"),B(this,4,e),de(this,["src"],e),r!==e&&de(this,["dataset","ptsrc"],r),this.type&&D(n,e)&&de(this,["type"],"text/javascript")}},text:Pe,textContent:Pe,type:{get(){return $e(this,["type"])},set(e){We(e)||(B(this,5,e),de(this,["type"],e))}},...Ce};j(e,r)},Pe={get(){const e=$e(this,["type"]);if(We(e)){const e=_(this,3);if(e)return e}return $e(this,["innerHTML"])||""},set(e){B(this,3,e)}},We=e=>!e||"text/javascript"===e,He=(e,i,s)=>{const o=h.i,a=H(class extends s{appendChild(e){return this.insertBefore(e,null)}get href(){}set href(e){}insertBefore(e,s){const a=e[t]=this[t],c=e[r],l=e[n],$="SCRIPT"===l,d="IFRAME"===l;if($){const t=_(e,3),r=_(e,5);if(t){if(We(r)){const r=e.id;if(r&&D(o,r))de(e,["type"],"text/javascript");else{const r=Se(i,c,t,0,""),n=r?"pterror":"ptid",s=r||c;de(e,["type"],P+"-x"),de(e,["dataset",n],s)}}de(e,["innerHTML"],t)}}if(ue(this,["insertBefore"],[e,s],2),d){const t=_(e,0);if(t&&t.startsWith("javascript:")){const e=t.split("javascript:")[1];Se(i,c,e,0,"")}((e,t)=>{let r,n,i=0,s=()=>{p[e]&&p[e].x&&!p[e].y?(r=_(t,1)?"error":"load",n=_(t,r),n&&n.map((e=>e({type:r})))):i++>2e3?(n=_(t,"error"),n&&n.map((e=>e({type:"error"})))):setTimeout(s,9)};s()})(c,e)}return $&&(le(!0),h.K([7,a])),e}get nodeName(){return"#s"===this[n]?"#document-fragment":this[n]}get nodeType(){return 3}get ownerDocument(){return i.n}},"Node");q(a,w("childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling")),e.Node=a},Oe=w("AUDIO,CANVAS,VIDEO"),je=w("Audio,MediaSource"),ke=(e,r,n)=>{j(e,{body:{get:()=>r.e},cookie:{get(){return r.A?$e(this,["cookie"]):(oe("get","cookie",r),"")},set(e){r.A&&de(this,["cookie"],e)}},createElement:{value(e){if(e=e.toUpperCase(),!N.test(e))throw e+" not valid";const r="IFRAME"===e,n=this[t],i=(r?"f_":"")+A();ue(this,["createElement"],[e],2,i);const s=F(n,i,e);if(r)Qe({V:i,J:n,S:f},!0).U.fetch=fetch,de(s,["srcdoc"],xe());else if("SCRIPT"===e){const e=_(s,5);We(e)&&de(s,["type"],P)}return s}},createElementNS:{value(e,r){const n=A(),i=F(this[t],n,r,e);return ue(this,["createElementNS"],[e,r],2,n),i}},createTextNode:{value(e){const r=this[t],n=A(),i=F(r,n,"#text");return ue(this,["createTextNode"],[e],2,n),i}},createEvent:{value:e=>new Event(e)},currentScript:{get(){return r.l?F(this[t],r.l,"SCRIPT"):null}},defaultView:{get:()=>n?null:r.U},documentElement:{get:()=>r.o},getElementsByTagName:{value(e){return"BODY"===(e=e.toUpperCase())?[r.e]:"HEAD"===e?[r.s]:ue(this,["getElementsByTagName"],[e])}},head:{get:()=>r.s},images:{get(){return $e(this,["images"])}},scripts:{get(){return $e(this,["scripts"])}},implementation:{get(){return{hasFeature:()=>!0,createHTMLDocument:e=>{const t=A();return ue(this,["implementation","createHTMLDocument"],[e],1,{V:t}),Qe({V:t,J:t,S:r.E+"",T:"hidden"},!0,!0).n}}}},location:{get:()=>r.E,set(e){r.E.href=e+""}},nodeType:{value:9},parentNode:{value:null},parentElement:{value:null},readyState:{value:"complete"},visibilityState:{get:()=>r.T||"visible"}}),X(e,"compatMode,referrer,forms")},De=(e,t)=>{j(e,{parentElement:{get(){return this.parentNode}},parentNode:{get:()=>t.o}})},Ue=(e,t)=>{j(e,{localName:{get(){return this[n].toLowerCase()}},namespaceURI:{get(){return this[i]||"http://www.w3.org/1999/xhtml"}},nodeType:{value:1},tagName:{get(){return this[n]}}}),q(e,S),X(e,"id"),Z(t),G(t,w("getClientRects,getBoundingClientRect"))},_e=(e,t)=>{const r={};w("hash,host,hostname,href,origin,pathname,port,protocol,search").map((e=>{r[e]={get(){let r,n=_(this,4);if("string"!=typeof n){if(r=$e(this,["href"]),""===r)return"protocol"===e?":":"";B(this,4,r),n=new URL(r)[e]}return Te(t,n,null)[e]},set(r){let n;if("href"===e)if((e=>{try{return new URL(e),!0}catch(e){return!1}})(r))n=new URL(r);else{const e=t.E.href;n=Te(t,e,null),n.href=new URL(r+"",n.href)}else n=Te(t,this.href,null),n[e]=r;B(this,4,n.href),de(this,["href"],n.href)}}})),j(e,r)},Be=(e,t)=>{const r={contentDocument:{get(){return Ve(this).n}},contentWindow:{get(){return Ve(this).U}},src:{get(){let e=_(this,0);return e&&e.startsWith("javascript:")?e:(e=Ve(this).E.href,e.startsWith("about:")?"":e)},set(e){if(e)if(e.startsWith("javascript:"))B(this,0,e);else if(!e.startsWith("about:")){let t,r=new XMLHttpRequest,n=Ve(this);n.E.href=e=Ee(n,e,"iframe"),n.y=1,B(this,1,void 0),r.open("GET",e,!1),r.send(),t=r.status,t>199&&t<300?(de(this,["srcdoc"],`<base href="${e}">`+r.responseText.replace(ze,((e,t)=>{const r=[];let n,i=!1;for(;n=qe.exec(t);){let[e]=n;e.startsWith("type=")&&(i=!0,e=e.replace(/(application|text)\\/javascript/,P)),r.push(e)}return i||r.push(\'type="\'+P+\'"\'),`<script ${r.join(" ")}>`}))+xe()),le(!0),h.K([7,n.V])):(B(this,1,t),n.y=0)}}},...Ce};j(e,r)},Fe="((?:\\\\w|-)+(?:=(?:(?:\\\\w|-)+|\'[^\']*\'|\\"[^\\"]*\\")?)?)",ze=new RegExp(`<script\\\\s*((${Fe}\\\\s*)*)>`,"mg"),qe=new RegExp(Fe,"mg"),Ve=e=>{const n=e[r];return p[n]||Qe({V:n,J:e[t],S:$e(e,["src"])||f},!0),p[n]},Xe=e=>{const t=(e,t)=>{const{a:r,b:n,c:i,d:s,e:o,f:a}=ue(e,[t],R);return new DOMMatrixReadOnly([r,n,i,s,o,a])},r={...e,getCTM:{value:function(){return t(this,"getCTM")}},getScreenCTM:{value:function(){return t(this,"getScreenCTM")}}};j(e,r)},Ze=(e,t)=>{e.NamedNodeMap=H(class extends t{constructor(e,t,r){return super(e,t,r),new Proxy(this,{get(e,t){const r=Je[t];return r?r.bind(e,[t]):$e(e,[t])},set(e,t,r){if(Je[t])throw new Error("Can\'t set read-only property: "+String(t));return de(e,[t],r),!0}})}},"NamedNodeMap")};function Ge(e,...t){return ue(this,e,t,1)}const Je={getNamedItem:Ge,getNamedItemNS:Ge,item:Ge,removeNamedItem:Ge,removeNamedItemNS:Ge,setNamedItem:Ge,setNamedItemNS:Ge},Ye=(a,c,l,$,d,g)=>{let m,v,b,I;const M=class{constructor(e,c,l,$,d){this[t]=e||a,this[r]=c||m||A(),this[s]=l||[],this[n]=$||v,this[i]=d||b,this[o]=I&&I[o]||{},m=v=b=void 0}},E=new(H(class extends URL{assign(){}reload(){}replace(){}},"Location"))(l),N=E.origin===h.I||E.origin===f,x=c===a,R={},P=()=>{let e,t,r=[];for(e in p)t=p[e],t.J!==a||t.B||r.push(t);return r},D=H(class extends M{constructor(){super(a,a),this.addEventListener=(...e)=>{"load"===e[0]?R.N&&setTimeout((()=>e[1]({type:"load"}))):ue(this,["addEventListener"],e,2)};let n,i,o=this,l=0,u=()=>{l||((h.u||(e.g=[$e,de,ue,he,j,A,t,r,s],h.t(y("partytown-media.js?v="+ve)),h.u=e.f,delete e.f),h.u)(M,J,R,o,je),l=1)},p={},f=(e,t,r,n)=>{Oe.includes(e)&&u();const i=p[e]?p[e]:e.includes("-")?p.UNKNOWN:p.I;return m=t,v=e,b=r,I=n,new i};var T,L;if(o.Window=D,o.name=name+a,He(o,R,M),(e=>{e.NodeList=H(ie,"NodeList")})(o),Ze(o,M),me(o,M,"CSSStyleDeclaration"),((e,t,r)=>{e[r]=H(class extends t{now(){return performance.now()}},r)})(o,M,"Performance"),((e,t)=>{const r="customElements",n=new Map;e[r]={define(i,s,o){n.set(i,s),t[i.toUpperCase()]=s;const a=[s.name,s.observedAttributes];ue(e,[r,"define"],[i,a,o])},get:t=>n.get(t)||ue(e,[r,"get"],[t]),whenDefined:t=>n.has(t)?Promise.resolve():ue(e,[r,"whenDefined"],[t]),upgrade:t=>ue(e,[r,"upgrade"],[t])}})(o,p),h.v.map((([e,t,n,i,c])=>{const l=Ke[e]?V:"EventTarget"===t?J:"Object"===t?M:o[t],$=o[e]=H(12===i?class extends M{constructor(...t){super(),he(this,e,t)}}:o[e]||class extends l{},e);c&&(p[c]=$),n.map((([e,t,n])=>{e in $.prototype||e in l.prototype||("string"==typeof t?O($,e,{get(){if(!U(this,e)){const n=this[r],i=[...this[s],e],c=o[t];c&&B(this,e,new c(a,n,i))}return _(this,e)},set(t){B(this,e,t)}}):5===t?k($,e,(function(...t){return ue(this,[e],t)})):t>0&&(void 0!==n?k($,e,n):O($,e,{get(){return $e(this,[e])},set(t){return de(this,[e],t)}})))}))})),w("atob,btoa,crypto,indexedDB,setTimeout,setInterval,clearTimeout,clearInterval").map((t=>{delete D.prototype[t],t in o||(n=e[t],null!=n&&(o[t]="function"!=typeof n||n.toString().startsWith("class")?n:n.bind(e)))})),Object.getOwnPropertyNames(e).map((t=>{t in o||(o[t]=e[t])})),je.map((e=>W(o,e,{get:()=>(u(),o[e])}))),"trustedTypes"in e&&(o.trustedTypes=e.trustedTypes),Ue(o.Element,o.HTMLElement),ke(o.Document,R,g),T=o.DocumentFragment,z(T,11),q(T,S),_e(o.HTMLAnchorElement,R),L=o.HTMLFormElement,j(L,{}),X(L,"elements"),Be(o.HTMLIFrameElement),Ae(o.HTMLScriptElement,R),Xe(o.SVGGraphicsElement),De(o.HTMLHeadElement,R),De(o.HTMLBodyElement,R),((e,t)=>{j(e,{parentElement:{value:null},parentNode:{get:()=>t.n}})})(o.HTMLHtmlElement,R),fe(o,"CSSStyleSheet"),z(o.Comment,8),z(o.DocumentType,10),Object.assign(R,{V:a,J:c,U:new Proxy(o,{get:(e,t)=>{var r;if("string"!=typeof t||isNaN(t))return(null===(r=h.i.mainWindowAccessors)||void 0===r?void 0:r.includes(t))?$e(this,[t]):e[t];{let e=P()[t];return e?e.U:void 0}},has:()=>!0}),n:f("#document",a+".d"),o:f("HTML",a+".e"),s:f("HEAD",a+".h"),e:f("BODY",a+".b"),E:E,T:$,A:N,B:x,k:f}),o.requestAnimationFrame=e=>setTimeout((()=>e(performance.now())),9),o.cancelAnimationFrame=e=>clearTimeout(e),o.requestIdleCallback=(e,t)=>(t=Date.now(),setTimeout((()=>e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})),1)),o.cancelIdleCallback=e=>clearTimeout(e),ge(o,"localStorage",N,R),ge(o,"sessionStorage",N,R),N||(o.indexeddb=void 0),d)i={},o.history={pushState(e){i=e},replaceState(e){i=e},get state(){return i},length:0},o.indexeddb=void 0;else{const e=o.history.pushState.bind(o.history),t=o.history.replaceState.bind(o.history);o.history.pushState=(t,r,n)=>{!1!==R.$propagateHistoryChange$&&e(t,r,n)},o.history.replaceState=(e,r,n)=>{!1!==R.$propagateHistoryChange$&&t(e,r,n)}}o.Worker=void 0}get body(){return R.e}get document(){return R.n}get documentElement(){return R.o}fetch(e,t){return e="string"==typeof e||e instanceof URL?String(e):e.url,fetch(Ee(R,e,"fetch"),t)}get frames(){return R.U}get frameElement(){return x?null:F(c,a,"IFRAME")}get globalThis(){return R.U}get head(){return R.s}get length(){return P().length}get location(){return E}set location(e){E.href=e+""}get Image(){return Le(R)}get navigator(){return(e=>{const t={sendBeacon:(t,r)=>{try{return fetch(Ee(e,t,null),{method:"POST",body:r,mode:"no-cors",keepalive:!0,...Ne(e,t)}),!0}catch(e){return console.error(e),!1}}};for(let e in navigator)t[e]=navigator[e];return new Proxy(t,{set:(e,t,r)=>(navigator[t]=r,!0),get:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)?t[r]:$e(e.U,["navigator",r])})})(R)}get origin(){return E.origin}set origin(e){}get parent(){for(let e in p)if(p[e].V===c)return p[e].U;return R.U}postMessage(...e){p[e[0]]&&(L(u)>50&&u.splice(0,5),u.push({V:e[0],m:JSON.stringify(e[1])}),e=e.slice(1)),ue(this,["postMessage"],e,3)}get self(){return R.U}get top(){for(let e in p)if(p[e].B)return p[e].U;return R.U}get window(){return R.U}get XMLHttpRequest(){const e=XMLHttpRequest,t=String(e),r=H(class extends e{open(...e){e[1]=Ee(R,e[1],"xhr"),super.open(...e)}set withCredentials(e){h.i.allowXhrCredentials&&(super.withCredentials=e)}toString(){return t}},C(e));return r.prototype.constructor.toString=()=>t,r}},"Window"),V=class extends M{constructor(e,t,r,n){return super(e,t,r,n),new Proxy(this,{get:(e,t)=>$e(e,[t]),set:(e,t,r)=>(de(e,[t],r),!0)})}},J=class extends M{};return T.map((e=>J.prototype[e]=function(...t){return ue(this,[e],t,2)})),X(D,"devicePixelRatio"),Z(D),G(D,["getComputedStyle"]),new D,R},Ke={DOMStringMap:1,NamedNodeMap:1},Qe=({V:e,J:t,S:r,T:n},i,s)=>(p[e]||(p[e]=Ye(e,t,r,n,i,s)),h.K([7,e]),p[e]),et=[],tt=t=>{const r=t.data,n=r[0],i=r[1];if(h.x)if(7===n)(async e=>{let t,r=e.V,n=e.w,i=F(r,n,"SCRIPT"),s=e.j,o=e.S,a=e.H,c="",l=p[r],$=["text/jscript","text/javascript","text/x-javascript","application/javascript","application/x-javascript","text/ecmascript","text/x-ecmascript","application/ecmascript"];if(o)try{if(o=Te(l,o,"script")+"",B(i,4,o),t=await fetch(o),t.ok){let e=t.headers.get("content-type");$.some((t=>{var r,n,i;return null===(i=null===(r=null==e?void 0:e.toLowerCase)||void 0===r?void 0:(n=r.call(e)).includes)||void 0===i?void 0:i.call(n,t)}))&&(s=await t.text(),l.l=n,be(l,s,a||o)),Ie(i,"load")}else c=t.statusText,Ie(i,"error")}catch(e){console.error(e),c=String(e.stack||e),Ie(i,"error")}else s&&(c=Se(l,n,s,0,c));l.l="",h.K([6,r,n,c])})(i);else if(9===n)(({V:e,w:t,L:r,R:n,b:i})=>{if($[r])try{$[r].apply(ee(e,t,[],n),ee(e,t,[],i))}catch(e){console.error(e)}})(i);else if(10===n)(({V:e,q:t,b:r})=>{try{let n=p[e].U,i=0,s=L(t);for(;i<s;i++)i+1<s?n=n[t[i]]:n[t[i]].apply(n,ee(null,e,[],r))}catch(e){console.error(e)}})(i);else if(5===n)Qe(i);else if(8===n)p[i].x=1,p[i].y=0;else if(14===n)p[i].T=r[2];else if(13===n){const e=i.V,t=p[e];t.E.href=i.url,function(e,t,r){const n=t.U.history;switch(r.type){case 0:t.$propagateHistoryChange$=!1;try{n.pushState(r.state,"",r.newUrl)}catch(e){}t.$propagateHistoryChange$=!0;break;case 1:t.$propagateHistoryChange$=!1;try{n.replaceState(r.state,"",r.newUrl)}catch(e){}t.$propagateHistoryChange$=!0}}(i.V,t,i)}else 15===n&&((e,t,r,n,i)=>{const s=F(t,r);s&&"function"==typeof s[n]&&s[n].apply(s,i)})(...r);else 1===n?((t=>{const r=h.i=JSON.parse(t.i),n=t.I;h.t=importScripts.bind(e),h.v=t.v,h.C=t.C,h.I=n,h.K=postMessage.bind(e),h.P=t.P,h.$tabId$=t.$tabId$,e.importScripts=void 0,delete e.postMessage,delete e.WorkerGlobalScope,w("resolveUrl,resolveSendBeaconRequestParameters,get,set,apply").map((e=>{r[e]&&(r[e]=new Function("return "+r[e])())}))})(i),h.K([2])):3===n?(h.v=[...h.v,...i],h.x=1,h.K([4]),[...et].map(tt),et.length=0):et.push(t)};e.onmessage=tt,postMessage([0])})(self);\n'],{type:"text/javascript"})),{name:"Partytown üéâ"}),G.onmessage=t=>{const r=t.data;12===r[0]?H(G,r[1]):e(G,r)},console.warn("@builder.io/partytown package has changed organization and now is\n@qwik.dev/partytown https://www.npmjs.com/package/@qwik.dev/partytown\nWe recommend using the new package to stay up to date on feature releases and bug fixes."),S.addEventListener("pt1",(e=>B(G,w(e.detail.frameElement),e.detail))))}))})(window);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\partytown-media.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(e=>{const[t,s,n,r,i,a,o,d,u]=e.g;delete e.g;const c=Symbol(),h=Symbol(),f=Symbol(),p=Symbol(),g=Symbol(),l=Symbol(),m=[],v=(e,t,s)=>e[t]=S(t,s),S=(e,t)=>Object.defineProperty(t,"name",{value:e}),b=(e,t)=>{const r={getContext:{value(e,t){return this[c]||(this[c]=(e.includes("webgl")?g:p)(this,e,t)),this[c]}}},h=v(t,"CanvasGradient",class extends e{addColorStop(...e){n(this,["addColorStop"],e,2)}}),f=v(t,"CanvasPattern",class extends e{setTransform(...e){n(this,["setTransform"],e,2)}}),p=(e,t,r)=>{const i=e[o],c=a(),f={[o]:i,[d]:c,[u]:[]},p=n(e,["getContext"],[t,r],1,c),g="getContextAttributes,getImageData,getLineDash,getTransform,isPointInPath,isPointInStroke,measureText".split(","),l={get:(e,t)=>"string"==typeof t&&t in p?"function"==typeof p[t]?(...e)=>{if(t.startsWith("create")){const r=a();return n(f,[t],e,2,r),"createImageData"===t||"createPattern"===t?(s=`${t}()`,console.warn(`${s} not implemented`),{setTransform:()=>{}}):new h(i,r)}var s;const r=g.includes(t)?1:2;return n(f,[t],e,r)}:p[t]:e[t],set:(e,t,n)=>("string"==typeof t&&t in p?(p[t]!==n&&"function"!=typeof n&&s(f,[t],n),p[t]=n):e[t]=n,!0)};return new Proxy(p,l)},g=(e,t,r)=>{const i=e[o],c=a(),h={[o]:i,[d]:c,[u]:[]},f=n(e,["getContext"],[t,r],1,c),p={get:(e,t)=>"string"==typeof t?"function"!=typeof f[t]?f[t]:(...e)=>n(h,[t],e,m(t)):e[t],set:(e,t,n)=>("string"==typeof t&&t in f?(f[t]!==n&&"function"!=typeof n&&s(h,[t],n),f[t]=n):e[t]=n,!0)};return new Proxy(f,p)},l="checkFramebufferStatus,makeXRCompatible".split(","),m=e=>e.startsWith("create")||e.startsWith("get")||e.startsWith("is")||l.includes(e)?1:2;v(t,"CanvasGradient",h),v(t,"CanvasPattern",f),i(t.HTMLCanvasElement,r)},y=(e,u,c,b)=>{var y,T;b.Audio=S("HTMLAudioElement",class{constructor(e){const t=c.k("audio",a());return t.src=e,t}});const w=class extends e{get enabled(){return t(this,["enabled"])}set enabled(e){s(this,["enabled"],e)}get id(){return t(this,["id"])}get kind(){return t(this,["kind"])}get label(){return t(this,["label"])}get language(){return t(this,["language"])}get sourceBuffer(){return new x(this)}},E=class{constructor(e){const s="audioTracks",r=e[o],i=e[d];return new Proxy({addEventListener(...t){n(e,[s,"addEventListener"],t,3)},getTrackById:(...t)=>n(e,[s,"getTrackById"],t),get length(){return t(e,[s,"length"])},removeEventListener(...t){n(e,[s,"removeEventListener"],t,3)}},{get:(e,t)=>"number"==typeof t?new w(r,i,[s,t]):e[t]})}},k=v(b,"SourceBufferList",class extends Array{constructor(e){super(),this[h]=e}addEventListener(...e){n(this[h],["sourceBuffers","addEventListener"],e,3)}removeEventListener(...e){n(this[h],["sourceBuffers","removeEventListener"],e,3)}}),x=v(b,"SourceBuffer",(T=class extends u{constructor(e){super(e[o],e[d],["sourceBuffers"]),this[y]=[],this[h]=e}abort(){const e=R(this);n(this,[e,"appendWindowStart"],m,1)}addEventListener(...e){const t=R(this);n(this,[t,"addEventListener"],e,3)}appendBuffer(e){this[g].push(["appendBuffer",[e],e]),M(this)}get appendWindowStart(){const e=R(this);return t(this,[e,"appendWindowStart"])}set appendWindowStart(e){const t=R(this);s(this,[t,"appendWindowStart"],e)}get appendWindowEnd(){const e=R(this);return t(this,[e,"appendWindowEnd"])}set appendWindowEnd(e){const t=R(this);s(this,[t,"appendWindowEnd"],e)}get buffered(){const e=this[h],t=R(this);return new B(e[o],e[d],["sourceBuffers",t,"buffered"])}changeType(e){const t=R(this);n(this,[t,"changeType"],[e],2)}get mode(){const e=R(this);return t(this,[e,"mode"])}set mode(e){const t=R(this);s(this,[t,"mode"],e)}remove(e,t){this[g].push(["remove",[e,t]]),M(this)}removeEventListener(...e){const t=R(this);n(this,[t,"removeEventListener"],e,3)}get timestampOffset(){const e=R(this);return t(this,[e,"timestampOffset"])}set timestampOffset(e){const t=R(this);s(this,[t,"timestampOffset"],e)}get updating(){const e=R(this);return t(this,[e,"updating"])}},y=g,T)),B=v(b,"TimeRanges",class extends e{start(...e){return n(this,["start"],e)}end(...e){return n(this,["end"],e)}get length(){return t(this,["length"])}}),R=e=>e?e[h][p].indexOf(e):-1,M=e=>{if(e[g].length){if(!e.updating){const t=e[g].shift();if(t){const s=R(e);n(e,[s,t[0]],t[1],3,void 0,t[2])}}setTimeout((()=>M(e)),50)}},W={buffered:{get(){return this[l]||(this[l]=new B(this[o],this[d],["buffered"]),setTimeout((()=>{this[l]=void 0}),5e3)),this[l]}},readyState:{get(){return 4===this[f]?4:("number"!=typeof this[f]&&(this[f]=t(this,["readyState"]),setTimeout((()=>{this[f]=void 0}),1e3)),this[f])}}};v(b,"MediaSource",class extends u{constructor(){super(c.V),this[p]=new k(this),r(this,"MediaSource",m)}get activeSourceBuffers(){return[]}addSourceBuffer(e){const t=new x(this);return this[p].push(t),n(this,["addSourceBuffer"],[e]),t}clearLiveSeekableRange(){n(this,["clearLiveSeekableRange"],m,2)}get duration(){return t(this,["duration"])}set duration(e){s(this,["duration"],e)}endOfStream(e){n(this,["endOfStream"],[e],3)}get readyState(){return t(this,["readyState"])}removeSourceBuffer(e){const t=R(e);t>-1&&(this[p].splice(t,1),n(this,["removeSourceBuffer"],[t],1))}setLiveSeekableRange(e,t){n(this,["setLiveSeekableRange"],[e,t],2)}get sourceBuffers(){return this[p]}static isTypeSupported(e){if(!L.has(e)){const t=n(b,["MediaSource","isTypeSupported"],[e]);L.set(e,t)}return L.get(e)}});const C=b.URL=S("URL",class extends URL{});"audioTracks"in b.HTMLMediaElement.prototype&&(v(b,"AudioTrackList",E),v(b,"AudioTrack",w),W.audioTracks={get(){return new E(this)}}),i(b.HTMLMediaElement,W),C.createObjectURL=e=>n(b,["URL","createObjectURL"],[e]),C.revokeObjectURL=e=>n(b,["URL","revokeObjectURL"],[e])},L=new Map;e.f=(e,t,s,n,r)=>{r.map((e=>{delete n[e]})),b(e,n),y(e,t,s,n)}})(self);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\partytown-sw.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
Object.freeze((e=>{const t=new Set;let r=[];do{Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&t.add(e)}))}while((r=Object.getPrototypeOf(r))!==Object.prototype);return Array.from(t)})());const e=new Map,t=(e,t)=>({F:e.F,p:t}),r=(e,t)=>new Response(e,{headers:{"content-type":t||"text/html","Cache-Control":"no-store"}});self.oninstall=()=>self.skipWaiting(),self.onactivate=()=>self.clients.claim(),self.onmessage=t=>{const r=t.data,n=e.get(r.F);n&&(e.delete(r.F),clearTimeout(n[1]),n[0](r))},self.onfetch=n=>{const i=n.request,s=new URL(i.url).pathname;s.endsWith("sw.html")?n.respondWith(r('<!DOCTYPE html><html><head><meta charset="utf-8"><script type="module">/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */\n(e=>{const t=()=>{},r=e=>e.length,n=e=>{var t,r,n;try{const r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if(r)return r}catch(e){}try{const t=null===(n=null===(r=null==e?void 0:e.__zone_symbol__originalInstance)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;if(t)return t}catch(e){}return""},i=(e,t)=>e.startsWith(t),s=e=>!(i(e,"webkit")||i(e,"toJSON")||i(e,"constructor")||i(e,"toString")||i(e,"_")),o=e=>11===e.nodeType&&e.host?"#s":e.nodeName,a=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),c={Anchor:"a",DList:"dl",Image:"img",OList:"ol",Paragraph:"p",Quote:"q",TableCaption:"caption",TableCell:"td",TableCol:"colgroup",TableRow:"tr",TableSection:"tbody",UList:"ul"},l={Graphics:"g",SVG:"svg"},u={preserveBehavior:!1},p=Object.freeze((e=>{const t=new Set;let r=[];do{Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&t.add(e)}))}while((r=Object.getPrototypeOf(r))!==Object.prototype);return Array.from(t)})()),d=Symbol(),h=Symbol(),g=new Map,m=new Map,f={},y=new WeakMap,w=(e,t)=>{if(e)return(t=y.get(e))||(t=e[d])||$(e,t=a()),t},v=(e,t,r,n,i)=>{if((r=f[e])&&r.U){if(e===t)return r.U;if(n=r.U.document,"d"===(i=t.split(".").pop()))return n;if("e"===i)return n.documentElement;if("h"===i)return n.head;if("b"===i)return n.body}return g.get(t)},$=(e,t,r)=>{e&&(g.set(t,e),e[d]=t,e[h]=r=Date.now(),r>b+5e3&&(g.forEach(((e,t)=>{e[h]<b&&e.nodeType&&!e.isConnected&&g.delete(t)})),b=r))};let b=0;const S=e.parent,E=document.implementation.createHTMLDocument(),T=S.partytown||{},C=(T.lib||"/~partytown/")+"",I=(e,t,r)=>{const n=((e,t)=>{return r=e,n={value:t},Object.defineProperty(r,"name",{...n,configurable:!0});var r,n})(class extends f[e].U.HTMLElement{},r[0]);return"connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",").map((r=>n.prototype[r]=function(...n){t.postMessage([15,e,w(this),r,n])})),n.observedAttributes=r[1],n},M=(e,t,r,s,a,c)=>void 0!==t&&(s=typeof t)?"string"===s||"number"===s||"boolean"===s||null==t?[0,t]:"function"===s?[6]:(r=r||new Set)&&Array.isArray(t)?r.has(t)?[1,[]]:r.add(t)&&[1,t.map((t=>M(e,t,r)))]:"object"===s?O(t)?[14,{name:t.name,message:t.message,stack:t.stack}]:""===(a=n(t))?[2,{}]:"Window"===a?[3,[e,e]]:"HTMLCollection"===a||"NodeList"===a?[7,Array.from(t).map((t=>M(e,t,r)[1]))]:a.endsWith("Event")?[5,x(e,t,r)]:"CSSRuleList"===a?[12,Array.from(t).map(N)]:i(a,"CSS")&&a.endsWith("Rule")?[11,N(t)]:"CSSStyleDeclaration"===a?[13,x(e,t,r)]:"Attr"===a?[10,[t.name,t.value]]:t.nodeType?[3,[e,w(t),o(t),c]]:[2,x(e,t,r,!0,!0)]:void 0:t,x=(e,t,r,i,o,a,c,l)=>{if(a={},!r.has(t))for(c in r.add(t),t)s(c)&&(l="path"===c&&n(t).endsWith("Event")?t.composedPath():t[c],(i||"function"!=typeof l)&&(o||""!==l)&&(a[c]=M(e,l,r)));return a},N=e=>{let t,r={};for(t in e)U.includes(t)&&(r[t]=String(e[t]));return r};let L=null;const O=t=>{var r;return L=(null===(r=e.top)||void 0===r?void 0:r.Error)||L,t instanceof L},j=(t,r,n,i)=>r?(n=r[0],i=r[1],0===n?i:4===n?R(t,i):1===n?i.map((e=>j(t,e))):3===n?v(i[0],i[1]):5===n?A(P(t,i)):2===n?P(t,i):8===n?i:9===n?new e[r[2]](i):void 0):void 0,R=(e,{V:t,w:r,L:n},i)=>((i=m.get(n))||(i=function(...i){e.postMessage([9,{V:t,w:r,L:n,R:M(t,this),b:M(t,i)}])},m.set(n,i)),i),A=e=>new("detail"in e?CustomEvent:Event)(e.type,e),P=(e,t,r,n)=>{for(n in r={},t)r[n]=j(e,t[n]);return r},U="cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(","),H=async(e,t)=>{let n,i,s,o,a,c,l={F:t.F},u=r(t.Q),p=0;for(;p<u;p++)try{c=p===u-1,n=t.Q[p],i=n.V,s=n.a,!f[i]&&i.startsWith("f_")&&await new Promise((e=>{let t=0,r=()=>{f[i]||t++>1e3?e():requestAnimationFrame(r)};r()})),1===s[0]&&s[1]in f[i].U?$(new f[i].U[s[1]](...j(e,s[2])),n.w):(o=v(i,n.w),o?(a=_(e,i,o,s,c,n.r),n.d&&("string"==typeof n.d?$(a,n.d):f[n.d.V]={V:n.d.V,U:{document:a}}),"object"==typeof(d=a)&&d&&d.then&&(a=await a,c&&(l.z=!0)),c&&(l.M=M(i,a,void 0,void 0,void 0,n.w))):l.p=n.w+" not found")}catch(e){c?l.p=String(e.stack||e):console.error(e)}var d;return l},_=(e,t,i,s,o,a)=>{let c,l,u,p,d,h=0,g=r(s);for(;h<g;h++){l=s[h],c=s[h+1],u=s[h-1];try{if(!Array.isArray(c))if("string"==typeof l||"number"==typeof l){if(h+1===g&&a)return d={},a.map((e=>d[e]=i[e])),d;i=i[l]}else{if(0===c)return void(i[u]=j(e,l));if("function"==typeof i[u]&&(p=j(e,l),"define"===u&&"CustomElementRegistry"===n(i)&&(p[1]=I(t,e,p[1])),"insertRule"===u&&p[1]>r(i.cssRules)&&(p[1]=r(i.cssRules)),i=i[u].apply(i,p),"play"===u))return Promise.resolve()}}catch(e){if(o)throw e;console.debug(e)}}return i},k=(e,t)=>{let n,i,s,o=t.V,a=t.U,c=a.document,l=\'script[type="text/partytown"]:not([data-ptid]):not([data-pterror])\',d=l+":not([async]):not([defer])";c&&c.body?(n=c.querySelector(d),n||(n=c.querySelector(l)),n?(n.dataset.ptid=i=w(n,o),s={V:o,w:i},n.src?(s.S=n.src,s.H=n.dataset.ptsrc||n.src):s.j=n.innerHTML,e.postMessage([7,s])):(t.x||(t.x=1,((e,t,n)=>{let i,s,o=n._ptf,a=(n.partytown||{}).forward||[],c=(r,n)=>e.postMessage([10,{V:t,q:r,b:M(t,Array.from(n))}]);if(n._ptf=void 0,a.map((e=>{const[t,{preserveBehavior:i}]=(e=>{if("string"==typeof e)return[e,u];const[t,r=u]=e;return[t,{...u,...r}]})(e);s=n,t.split(".").map(((e,t,o)=>{var a;s=s[o[t]]=t+1<r(o)?s[o[t]]||(a=o[t+1],p.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:t,thisObject:r}=((e,t)=>{let r=e;for(let e=0;e<t.length-1;e+=1)r=r[t[e]];return{thisObject:r,methodOrProperty:t.length>0?r[t[t.length-1]]:void 0}})(n,o);"function"==typeof t&&(e=(...e)=>t.apply(r,...e))}return(...t)=>{let r;return e&&(r=e(t)),c(o,t),r}})()}))})),o)for(i=0;i<r(o);i+=2)c(o[i],o[i+1])})(e,o,a),c.dispatchEvent(new CustomEvent("pt0"))),e.postMessage([8,o]))):requestAnimationFrame((()=>k(e,t)))},B=(e,t,r)=>{if(!y.has(r)){y.set(r,t);const n=r.document,i=r.history,s=y.get(r.parent);let o=!1;const a=[],c=e=>{o?e():a.push(e)},l=()=>{e.postMessage([5,{V:t,J:s,S:n.baseURI,T:n.visibilityState}]),setTimeout((()=>{o=!0,a.forEach((e=>{e()}))}))},u=i.pushState.bind(i),p=i.replaceState.bind(i),d=(r,i,s,o)=>()=>{e.postMessage([13,{V:t,type:r,state:i,url:n.baseURI,newUrl:s,oldUrl:o}])};i.pushState=(e,t,r)=>{u(e,t,r),c(d(0,e,null==r?void 0:r.toString()))},i.replaceState=(e,t,r)=>{p(e,t,r),c(d(1,e,null==r?void 0:r.toString()))},r.addEventListener("popstate",(e=>{c(d(2,e.state))})),r.addEventListener("hashchange",(e=>{c(d(3,{},e.newURL,e.oldURL))})),r.addEventListener("ptupdate",(()=>{k(e,f[t])})),n.addEventListener("visibilitychange",(()=>e.postMessage([14,t,n.visibilityState]))),f[t]={V:t,U:r},"complete"===n.readyState?l():r.addEventListener("load",l)}},V=()=>{const e=E.createElement("i"),t=E.createTextNode(""),r=E.createComment(""),n=E.createDocumentFragment(),i=E.createElement("p").attachShadow({mode:"open"}),s=G(S,"IntersectionObserver"),o=G(S,"MutationObserver"),a=G(S,"ResizeObserver"),c=S.performance,l=S.screen,u=[[S.history],[c],[c.navigation],[c.timing],[l],[l.orientation],[S.visualViewport],[s,12],[o,12],[a,12],[t],[r],[n],[i],[e],[e.attributes],[e.classList],[e.dataset],[e.style],[E],[E.doctype]],p=[F("Window",S),F("Node",t)],d=function(e){return JSON.stringify(e,((e,t)=>("function"==typeof t&&(t=String(t)).startsWith(e+"(")&&(t="function "+t),"loadScriptsOnMainThread"===e&&(t=t.map((e=>Array.isArray(e)?e:["string"==typeof e?"string":"regexp","string"==typeof e?e:e.source]))),t)))}(T),h={i:d,v:D(u,p),C:new URL(C,S.location)+"",I:origin,$tabId$:S._pttab};return z(h.v,S,"IntersectionObserverEntry"),h},W=()=>{const e=Object.getOwnPropertyNames(S).map((e=>((e,t,r,n)=>{if(r=t.match(/^(HTML|SVG)(.+)Element$/))return n=r[2],"S"==t[0]?e.createElementNS("http://www.w3.org/2000/svg",l[n]||n.slice(0,2).toLowerCase()+n.slice(2)):e.createElement(c[n]||n)})(E,e))).filter((e=>e)).map((e=>[e]));return D(e,[])},D=(e,t)=>{const r=new Set(["Object"]);return e.filter((e=>e[0])).map((e=>{const t=e[0],r=e[1],i=n(t);return[i,S[i].prototype,t,r]})).map((([e,n,i,s])=>J(r,t,e,n,i,s))),t},F=(e,t,r)=>{let n=[],i=[e,"Object",n];for(r in t)q(n,t,r);return i},J=(e,t,r,i,s,a)=>{if(!e.has(r)){e.add(r);const c=Object.getPrototypeOf(i),l=n(c),u=[],p=Object.getOwnPropertyDescriptors(i);J(e,t,l,c,s,a);for(const e in p)q(u,s,e);t.push([r,l,u,a,o(s)])}},q=(e,t,r,i,o,a)=>{try{s(r)&&isNaN(r[0])&&"all"!==r&&("function"==(o=typeof(i=t[r]))?(String(i).includes("[native")||Object.getPrototypeOf(t)[r])&&e.push([r,5]):"object"===o&&null!=i?"Object"!==(a=n(i))&&"Function"!==a&&self[a]&&e.push([r,i.nodeType||a]):"symbol"!==o&&(r.toUpperCase()===r?e.push([r,6,i]):e.push([r,6])))}catch(e){console.warn(e)}},G=(e,r)=>void 0!==e[r]?new e[r](t):0,z=(e,t,r)=>{void 0!==t[r]&&e.push([r,"Object",Object.keys(t[r].prototype).map((e=>[e,6])),12])};let X;(t=>{const r=e.navigator.serviceWorker;return r.getRegistration().then((e=>(r.addEventListener("message",(t=>{return r=t.data,n=t=>e.active&&e.active.postMessage(t),H(X,r).then(n);var r,n})),(e,t)=>{0===t[0]?e.postMessage([1,V()]):2===t[0]?e.postMessage([3,W()]):((e,t,r)=>{4===t[0]?B(e,a(),S):(r=f[t[1]])&&(7===t[0]?requestAnimationFrame((()=>k(e,r))):6===t[0]&&((e,t,r,n,i)=>{(i=t.U.document.querySelector(`[data-ptid="${r}"]`))&&(n?i.dataset.pterror=n:i.type+="-x",delete i.dataset.ptid),k(e,t)})(e,r,t[2],t[3]))})(e,t)})))})().then((e=>{e&&(X=new Worker(URL.createObjectURL(new Blob([\'/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */\\n(e=>{const t=Symbol(),r=Symbol(),n=Symbol(),i=Symbol(),s=Symbol(),o=Symbol(),a=Symbol(),c=Symbol(),l=new Map,$={},d=new WeakMap,u=[],h={},p={},g=new Map,m=new Map,f="about:blank",w=e=>e.split(","),y=e=>{if(e=h.C+e,new URL(e).origin!=location.origin)throw"Invalid "+e;return e},v=w("clientWidth,clientHeight,clientTop,clientLeft,innerWidth,innerHeight,offsetWidth,offsetHeight,offsetTop,offsetLeft,outerWidth,outerHeight,pageXOffset,pageYOffset,scrollWidth,scrollHeight,scrollTop,scrollLeft"),S=w("childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling"),b=w("insertBefore,remove,removeChild,replaceChild"),I=w("className,width,height,hidden,innerHTML,innerText,textContent,text"),T=w("setAttribute,setAttributeNS,setProperty"),M=w("addEventListener,dispatchEvent,removeEventListener"),E=M.concat(T,w("add,observe,remove,unobserve")),N=/^[A-Z_]([A-Z0-9-]*[A-Z0-9])?$/,x=()=>{},L=e=>e.length,R=e=>{var t,r,n;try{const r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if(r)return r}catch(e){}try{const t=null===(n=null===(r=null==e?void 0:e.__zone_symbol__originalInstance)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;if(t)return t}catch(e){}return""},C=[],P=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),O="text/partytown",A=(e,t,r)=>Object.defineProperty(e,t,{...r,configurable:!0}),H=(e,t)=>A(e,"name",{value:t}),W=(e,t,r)=>A(e.prototype,t,r),j=(e,t)=>Object.defineProperties(e.prototype,t),k=(e,t,r)=>W(e,t,{value:r,writable:!0});function D(e,t){var r,n;return null!==(n=null===(r=e.loadScriptsOnMainThread)||void 0===r?void 0:r.map((([e,t])=>new RegExp("string"===e?t.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g,"\\\\\\\\$&"):t))).some((e=>e.test(t))))&&void 0!==n&&n}Object.freeze((e=>{const t=new Set;let r=[];do{Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&t.add(e)}))}while((r=Object.getPrototypeOf(r))!==Object.prototype);return Array.from(t)})());const U=(e,t)=>t in e[o],_=(e,t)=>e[o][t],B=(e,t,r)=>e[o][t]=r,F=(e,t,r,n,i,s)=>{if(!(i=l.get(t))&&r&&p[e]){const o=l.get(s||"");i=p[e].k(r,t,n,o),l.set(t,i)}return i},z=(e,t)=>k(e,"nodeType",t),q=(e,t)=>t.map((t=>W(e,t,{get(){let e=V(this,t),r=m.get(e);return r||(r=$e(this,[t]),m.set(e,r)),r}}))),V=(e,n,i)=>[e[t],e[r],n,...(i||C).map((e=>String(e&&e[t]?e[r]:e)))].join("."),X=(e,t)=>w(t).map((t=>W(e,t,{get(){return U(this,t)||B(this,t,$e(this,[t])),_(this,t)},set(e){_(this,t)!==e&&de(this,[t],e),B(this,t,e)}}))),Z=e=>v.map((t=>W(e,t,{get(){const e=g.get(V(this,t));if("number"==typeof e)return e;const r=$e(this,[t],v);return r&&"object"==typeof r?(Object.entries(r).map((([e,t])=>g.set(V(this,e),t))),r[t]):r}}))),G=(e,t)=>t.map((t=>{e.prototype[t]=function(...e){let r=V(this,t,e),n=g.get(r);return n||(n=ue(this,[t],e),g.set(r,n)),n}})),J=(e,n,i,s,o)=>{return void 0!==i&&(o=typeof i)?"string"===o||"boolean"===o||"number"===o||null==i?[0,i]:"function"===o?[4,{V:e,w:n,L:(a=i,(c=d.get(a))||(d.set(a,c=P()),$[c]=a),c)}]:(s=s||new Set)&&Array.isArray(i)?s.has(i)?[1,[]]:s.add(i)&&[1,i.map((t=>J(e,n,t,s)))]:"object"===o?i[r]?[3,[i[t],i[r]]]:i instanceof Event?[5,K(e,n,i,!1,s)]:Y&&i instanceof TrustedHTML?[0,i.toString()]:i instanceof ArrayBuffer?[8,i]:ArrayBuffer.isView(i)?[9,i.buffer,R(i)]:[2,K(e,n,i,!0,s)]:void 0:i;var a,c},Y="undefined"!=typeof TrustedHTML,K=(e,t,r,n,i,s,o,a)=>{if(s={},!i.has(r))for(o in i.add(r),r)a=r[o],(n||"function"!=typeof a)&&(s[o]=J(e,t,a,i));return s},Q=(e,n)=>e?J(e[t],e[r],n):[0,n],ee=(e,t,r,n,i,s,o,a)=>{if(n){if(i=n[0],s=n[1],0===i||11===i||12===i)return s;if(4===i)return re(r,s);if(6===i)return e&&r.length>0?(...t)=>ue(p[e].U,r,t,1):x;if(3===i)return te(s);if(7===i)return new ie(s.map(te));if(10===i)return new se(s);if(1===i)return s.map((n=>ee(e,t,r,n)));if(14===i)return new ne(s);for(a in o={},s)o[a]=ee(e,t,[...r,a],s[a]);if(13===i)return new p[e].U.CSSStyleDeclaration(e,t,r,o);if(5===i){if("message"===o.type&&o.origin){let e,t=JSON.stringify(o.data),r=u.find((e=>e.m===t));r&&(e=p[r.V],e&&(o.source=e.U,o.origin=e.E.origin))}return new Proxy(new Event(o.type,o),{get:(e,t)=>t in o?o[t]:"function"==typeof e[String(t)]?x:e[String(t)]})}if(2===i)return o}},te=([e,t,r,n])=>t===e&&p[e]?p[e].U:F(e,t,r,void 0,void 0,n),re=(e,{V:t,w:r,G:n,L:i})=>($[i]||d.set($[i]=function(...i){const s=F(t,r,n);return ue(s,e,i)},i),$[i]);class ne extends Error{constructor(e){super(e.message),this.name=e.name,this.message=e.message,this.stack=e.stack}}class ie{constructor(e){(this._=e).map(((e,t)=>this[t]=e))}entries(){return this._.entries()}forEach(e,t){this._.map(e,t)}item(e){return this[e]}keys(){return this._.keys()}get length(){return L(this._)}values(){return this._.values()}[Symbol.iterator](){return this._[Symbol.iterator]()}}const se=class{constructor(e){this.name=e[0],this.value=e[1]}get nodeName(){return this.name}get nodeType(){return 2}},oe=(e,t,r)=>console.warn(`Partytown unable to ${e} cross-origin ${t}: `+r.E),ae=[],ce=(e,n,i,o,a,c)=>{if(e[s]){if(ae.push({V:e[t],w:e[r],a:[...e[s],...n],d:o,r:a}),3===i)h.K([12,{F:P(),Q:[...ae]}],c?[c instanceof ArrayBuffer?c:c.buffer]:void 0),ae.length=0;else if(1===i)return le(!0);h.c=setTimeout(le,20)}},le=e=>{if(clearTimeout(h.c),L(ae)){const t=ae[L(ae)-1],r={F:`${P()}.${h.$tabId$}`,Q:[...ae]};if(ae.length=0,e){const e=((e,t)=>{const r=new XMLHttpRequest;return r.open("POST",y("proxytown"),!1),r.send(JSON.stringify(t)),JSON.parse(r.responseText)})(0,r),n=e.z,i=ee(t.V,t.w,t.a,e.M);if(e.p){if(n)return Promise.reject(e.p);throw new Error(e.p)}return n?Promise.resolve(i):i}h.K([12,r])}},$e=(e,t,r,n)=>h.i.get&&(n=h.i.get(pe(e,t)))!==a?n:n=ce(e,t,1,void 0,r),de=(e,t,r,n)=>{if(h.i.set){if((n=h.i.set({value:r,prevent:c,...pe(e,t)}))===c)return;n!==a&&(r=n)}I.some((e=>t.includes(e)))&&(g.clear(),t[t.length-1]),t=[...t,Q(e,r),0],ce(e,t,2)},ue=(e,t,r,n,i,s,o,c)=>h.i.apply&&(o=h.i.apply({args:r,...pe(e,t)}))!==a?o:(c=t[L(t)-1],t=[...t,Q(e,r)],n=n||(E.includes(c)?2:1),"setAttribute"===c&&U(e,r[0])?B(e,r[0],r[1]):b.includes(c)?(g.clear(),m.clear()):T.includes(c)&&(n=2,g.clear()),o=ce(e,t,n,i,void 0,s)),he=(e,t,r)=>{ce(e,[1,t,Q(e,r)],1)},pe=(e,r)=>({name:r.join("."),continue:a,nodeName:e[n],constructor:R(e),instance:e,window:p[e[t]].U}),ge=(e,t,r,n)=>{let i={getItem(i){if(r)return ue(e,[t,"getItem"],[i],1);oe("get",t,n)},setItem(i,s){r?ue(e,[t,"setItem"],[i,s],1):oe("set",t,n)},removeItem(i){r?ue(e,[t,"removeItem"],[i],1):oe("remove",t,n)},key(i){if(r)return ue(e,[t,"key"],[i],1);oe("key",t,n)},clear(){r?ue(e,[t,"clear"],C,1):oe("clear",t,n)},get length(){if(r)return $e(e,[t,"length"]);oe("length",t,n)}};e[t]=new Proxy(i,{get:(e,t)=>Reflect.has(e,t)?Reflect.get(e,t):e.getItem(t),set:(e,t,r)=>(e.setItem(t,r),!0),has:(e,t)=>!!Reflect.has(e,t)||"string"==typeof t&&null!==e.getItem(t),deleteProperty:(e,t)=>(e.removeItem(t),!0)})},me=(e,t,r)=>{e[r]=H(class extends t{constructor(e,t,r,i){return super(e,t,r,i||{}),new Proxy(this,{get:(e,t)=>e[t]?e[t]:(e[t]||"string"!=typeof t||e[n][t]||(e[n][t]=$e(e,[t])),e[n][t]),set:(e,t,r)=>(e[n][t]=r,de(e,[t],r),g.clear(),!0)})}setProperty(...e){this[n][e[0]]=e[1],ue(this,["setProperty"],e,2),e[0],g.clear()}getPropertyValue(e){return this[e]}removeProperty(e){let t=this[n][e];return ue(this,["removeProperty"],[e],2),g.clear(),this[n][e]=void 0,t}},r)},fe=(e,t)=>{e[t]=H(class{constructor(e){this.ownerNode=e}get cssRules(){const e=this.ownerNode;return new Proxy({},{get(t,r){const n=String(r);return"item"===n?t=>ye(e,t):"length"===n?we(e).length:isNaN(n)?t[r]:ye(e,n)}})}insertRule(e,t){const r=we(this.ownerNode);return(t=void 0===t?0:t)>=0&&t<=r.length&&(ue(this.ownerNode,["sheet","insertRule"],[e,t],2),r.splice(t,0,0)),this.ownerNode,g.clear(),t}deleteRule(e){ue(this.ownerNode,["sheet","deleteRule"],[e],2),we(this.ownerNode).splice(e,1),this.ownerNode,g.clear()}get type(){return"text/css"}},t);const r={sheet:{get(){return new e[t](this)}}};j(e.HTMLStyleElement,r)},we=(e,t)=>((t=_(e,2))||(t=$e(e,["sheet","cssRules"]),B(e,2,t)),t),ye=(e,t,r)=>(0===(r=we(e))[t]&&(r[t]=$e(e,["sheet","cssRules",parseInt(t,10)])),r[t]),ve="0.10.3-dev1734732935152",Se=(e,t,r,n,i)=>{try{e.l=t,be(e,r)}catch(e){console.error(r,e),i=String(e.stack||e)}return e.l="",i},be=(e,t,r)=>{e.N=1;let n=((e,t)=>e.replace(/([a-zA-Z0-9_$\\\\.\\\\\\\'\\\\"\\\\`])?(\\\\.\\\\.\\\\.)?this(?![a-zA-Z0-9_$:])/g,((e,t,r)=>{const n=(t||"")+(r||"");return null!=t?n+"this":n+"(thi$(this)?window:this)"})))(t);t=`with(this){${n.replace(/\\\\/\\\\/# so/g,"//Xso")}\\\\n;function thi$(t){return t===this}};${(h.i.globalFns||[]).filter((e=>/[a-zA-Z_$][0-9a-zA-Z_$]*/.test(e))).map((e=>`(typeof ${e}==\\\'function\\\'&&(this.${e}=${e}))`)).join(";")};`+(r?"\\\\n//# sourceURL="+r:""),e.A||(t=t.replace(/.postMessage\\\\(/g,`.postMessage(\\\'${e.V}\\\',`)),new Function(t).call(e.U),e.N=0},Ie=(e,t,r)=>{(r=_(e,t))&&setTimeout((()=>r.map((e=>e({type:t})))))},Te=(e,t)=>{for(t=e.E;!t.host&&(t=(e=p[e.J]).E,e.V!==e.J););return t},Me=(e,t,r,n,i,s)=>(n=Te(e,n),i=new URL(t||"",n),r&&h.i.resolveUrl&&(s=h.i.resolveUrl(i,n,r))?s:i),Ee=(e,t,r)=>Me(e,t,r)+"",Ne=(e,t)=>{const r=Te(e),n=new URL(t||"",r);if(h.i.resolveSendBeaconRequestParameters){const e=h.i.resolveSendBeaconRequestParameters(n,r);if(e)return e}return{}},xe=()=>`<script src="${y("partytown.js?v="+ve)}"><\\\\/script>`,Le=e=>class{constructor(){this.s="",this.l=[],this.e=[],this.style={}}get src(){return this.s}set src(t){this.s=t,fetch(Ee(e,t,"image"),{mode:"no-cors",credentials:"include",keepalive:!0}).then((e=>{e.ok||0===e.status?this.l.map((e=>e({type:"load"}))):this.e.map((e=>e({type:"error"})))}),(()=>this.e.forEach((e=>e({type:"error"})))))}addEventListener(e,t){"load"===e&&this.l.push(t),"error"===e&&this.e.push(t)}removeEventListener(e,t){"load"===e&&(this.l=this.l.filter((e=>e!==t))),"error"===e&&(this.e=this.e.filter((e=>e!==t)))}get onload(){return this.l[0]}set onload(e){this.l=[e]}get onerror(){return this.e[0]}set onerror(e){this.e=[e]}},Re={addEventListener:{value(...e){const t=e[0],r=_(this,t)||[];r.push(e[1]),B(this,t,r)}},async:{get:x,set:x},defer:{get:x,set:x},onload:{get(){let e=_(this,"load");return e&&e[0]||null},set(e){B(this,"load",e?[e]:null)}},onerror:{get(){let e=_(this,"error");return e&&e[0]||null},set(e){B(this,"error",e?[e]:null)}},getAttribute:{value(e){return"src"===e?this.src:ue(this,["getAttribute"],[e])}},setAttribute:{value(e,t){Ce.includes(e)?this[e]=t:ue(this,["setAttribute"],[e,t])}}},Ce=w("src,type"),Pe=(e,t)=>{const r={innerHTML:Oe,innerText:Oe,src:{get(){return _(this,4)||""},set(e){const r=Ee(t,e,null),n=h.i;e=Ee(t,e,"script"),B(this,4,e),de(this,["src"],e),r!==e&&de(this,["dataset","ptsrc"],r),this.type&&D(n,e)&&de(this,["type"],"text/javascript")}},text:Oe,textContent:Oe,type:{get(){return $e(this,["type"])},set(e){Ae(e)||(B(this,5,e),de(this,["type"],e))}},...Re};j(e,r)},Oe={get(){const e=$e(this,["type"]);if(Ae(e)){const e=_(this,3);if(e)return e}return $e(this,["innerHTML"])||""},set(e){B(this,3,e)}},Ae=e=>!e||"text/javascript"===e,He=(e,i,s)=>{const o=h.i,a=H(class extends s{appendChild(e){return this.insertBefore(e,null)}get href(){}set href(e){}insertBefore(e,s){const a=e[t]=this[t],c=e[r],l=e[n],$="SCRIPT"===l,d="IFRAME"===l;if($){const t=_(e,3),r=_(e,5);if(t){if(Ae(r)){const r=e.id;if(r&&D(o,r))de(e,["type"],"text/javascript");else{const r=Se(i,c,t,0,""),n=r?"pterror":"ptid",s=r||c;de(e,["type"],O+"-x"),de(e,["dataset",n],s)}}de(e,["innerHTML"],t)}}if(ue(this,["insertBefore"],[e,s],2),d){const t=_(e,0);if(t&&t.startsWith("javascript:")){const e=t.split("javascript:")[1];Se(i,c,e,0,"")}((e,t)=>{let r,n,i=0,s=()=>{p[e]&&p[e].x&&!p[e].y?(r=_(t,1)?"error":"load",n=_(t,r),n&&n.map((e=>e({type:r})))):i++>2e3?(n=_(t,"error"),n&&n.map((e=>e({type:"error"})))):setTimeout(s,9)};s()})(c,e)}return $&&(le(!0),h.K([7,a])),e}get nodeName(){return"#s"===this[n]?"#document-fragment":this[n]}get nodeType(){return 3}get ownerDocument(){return i.n}},"Node");q(a,w("childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling")),e.Node=a},We=w("AUDIO,CANVAS,VIDEO"),je=w("Audio,MediaSource"),ke=(e,r,n)=>{j(e,{body:{get:()=>r.e},cookie:{get(){return r.A?$e(this,["cookie"]):(oe("get","cookie",r),"")},set(e){r.A&&de(this,["cookie"],e)}},createElement:{value(e){if(e=e.toUpperCase(),!N.test(e))throw e+" not valid";const r="IFRAME"===e,n=this[t],i=(r?"f_":"")+P();ue(this,["createElement"],[e],2,i);const s=F(n,i,e);if(r)Qe({V:i,J:n,S:f},!0).U.fetch=fetch,de(s,["srcdoc"],xe());else if("SCRIPT"===e){const e=_(s,5);Ae(e)&&de(s,["type"],O)}return s}},createElementNS:{value(e,r){const n=P(),i=F(this[t],n,r,e);return ue(this,["createElementNS"],[e,r],2,n),i}},createTextNode:{value(e){const r=this[t],n=P(),i=F(r,n,"#text");return ue(this,["createTextNode"],[e],2,n),i}},createEvent:{value:e=>new Event(e)},currentScript:{get(){return r.l?F(this[t],r.l,"SCRIPT"):null}},defaultView:{get:()=>n?null:r.U},documentElement:{get:()=>r.o},getElementsByTagName:{value(e){return"BODY"===(e=e.toUpperCase())?[r.e]:"HEAD"===e?[r.s]:ue(this,["getElementsByTagName"],[e])}},head:{get:()=>r.s},images:{get(){return $e(this,["images"])}},scripts:{get(){return $e(this,["scripts"])}},implementation:{get(){return{hasFeature:()=>!0,createHTMLDocument:e=>{const t=P();return ue(this,["implementation","createHTMLDocument"],[e],1,{V:t}),Qe({V:t,J:t,S:r.E+"",T:"hidden"},!0,!0).n}}}},location:{get:()=>r.E,set(e){r.E.href=e+""}},nodeType:{value:9},parentNode:{value:null},parentElement:{value:null},readyState:{value:"complete"},visibilityState:{get:()=>r.T||"visible"}}),X(e,"compatMode,referrer,forms")},De=(e,t)=>{j(e,{parentElement:{get(){return this.parentNode}},parentNode:{get:()=>t.o}})},Ue=(e,t)=>{j(e,{localName:{get(){return this[n].toLowerCase()}},namespaceURI:{get(){return this[i]||"http://www.w3.org/1999/xhtml"}},nodeType:{value:1},tagName:{get(){return this[n]}}}),q(e,S),X(e,"id"),Z(t),G(t,w("getClientRects,getBoundingClientRect"))},_e=(e,t)=>{const r={};w("hash,host,hostname,href,origin,pathname,port,protocol,search").map((e=>{r[e]={get(){let r,n=_(this,4);if("string"!=typeof n){if(r=$e(this,["href"]),""===r)return"protocol"===e?":":"";B(this,4,r),n=new URL(r)[e]}return Me(t,n,null)[e]},set(r){let n;if("href"===e)if((e=>{try{return new URL(e),!0}catch(e){return!1}})(r))n=new URL(r);else{const e=t.E.href;n=Me(t,e,null),n.href=new URL(r+"",n.href)}else n=Me(t,this.href,null),n[e]=r;B(this,4,n.href),de(this,["href"],n.href)}}})),j(e,r)},Be=(e,t)=>{const r={contentDocument:{get(){return Ve(this).n}},contentWindow:{get(){return Ve(this).U}},src:{get(){let e=_(this,0);return e&&e.startsWith("javascript:")?e:(e=Ve(this).E.href,e.startsWith("about:")?"":e)},set(e){if(e)if(e.startsWith("javascript:"))B(this,0,e);else if(!e.startsWith("about:")){let t,r=new XMLHttpRequest,n=Ve(this);n.E.href=e=Ee(n,e,"iframe"),n.y=1,B(this,1,void 0),r.open("GET",e,!1),r.send(),t=r.status,t>199&&t<300?(de(this,["srcdoc"],`<base href="${e}">`+r.responseText.replace(ze,((e,t)=>{const r=[];let n,i=!1;for(;n=qe.exec(t);){let[e]=n;e.startsWith("type=")&&(i=!0,e=e.replace(/(application|text)\\\\/javascript/,O)),r.push(e)}return i||r.push(\\\'type="\\\'+O+\\\'"\\\'),`<script ${r.join(" ")}>`}))+xe()),le(!0),h.K([7,n.V])):(B(this,1,t),n.y=0)}}},...Re};j(e,r)},Fe="((?:\\\\\\\\w|-)+(?:=(?:(?:\\\\\\\\w|-)+|\\\'[^\\\']*\\\'|\\\\"[^\\\\"]*\\\\")?)?)",ze=new RegExp(`<script\\\\\\\\s*((${Fe}\\\\\\\\s*)*)>`,"mg"),qe=new RegExp(Fe,"mg"),Ve=e=>{const n=e[r];return p[n]||Qe({V:n,J:e[t],S:$e(e,["src"])||f},!0),p[n]},Xe=e=>{const t=(e,t)=>{const{a:r,b:n,c:i,d:s,e:o,f:a}=ue(e,[t],C);return new DOMMatrixReadOnly([r,n,i,s,o,a])},r={...e,getCTM:{value:function(){return t(this,"getCTM")}},getScreenCTM:{value:function(){return t(this,"getScreenCTM")}}};j(e,r)},Ze=(e,t)=>{e.NamedNodeMap=H(class extends t{constructor(e,t,r){return super(e,t,r),new Proxy(this,{get(e,t){const r=Je[t];return r?r.bind(e,[t]):$e(e,[t])},set(e,t,r){if(Je[t])throw new Error("Can\\\'t set read-only property: "+String(t));return de(e,[t],r),!0}})}},"NamedNodeMap")};function Ge(e,...t){return ue(this,e,t,1)}const Je={getNamedItem:Ge,getNamedItemNS:Ge,item:Ge,removeNamedItem:Ge,removeNamedItemNS:Ge,setNamedItem:Ge,setNamedItemNS:Ge},Ye=(a,c,l,$,d,g)=>{let m,v,b,I;const T=class{constructor(e,c,l,$,d){this[t]=e||a,this[r]=c||m||P(),this[s]=l||[],this[n]=$||v,this[i]=d||b,this[o]=I&&I[o]||{},m=v=b=void 0}},E=new(H(class extends URL{assign(){}reload(){}replace(){}},"Location"))(l),N=E.origin===h.I||E.origin===f,x=c===a,C={},O=()=>{let e,t,r=[];for(e in p)t=p[e],t.J!==a||t.B||r.push(t);return r},D=H(class extends T{constructor(){super(a,a),this.addEventListener=(...e)=>{"load"===e[0]?C.N&&setTimeout((()=>e[1]({type:"load"}))):ue(this,["addEventListener"],e,2)};let n,i,o=this,l=0,u=()=>{l||((h.u||(e.g=[$e,de,ue,he,j,P,t,r,s],h.t(y("partytown-media.js?v="+ve)),h.u=e.f,delete e.f),h.u)(T,J,C,o,je),l=1)},p={},f=(e,t,r,n)=>{We.includes(e)&&u();const i=p[e]?p[e]:e.includes("-")?p.UNKNOWN:p.I;return m=t,v=e,b=r,I=n,new i};var M,L;if(o.Window=D,o.name=name+a,He(o,C,T),(e=>{e.NodeList=H(ie,"NodeList")})(o),Ze(o,T),me(o,T,"CSSStyleDeclaration"),((e,t,r)=>{e[r]=H(class extends t{now(){return performance.now()}},r)})(o,T,"Performance"),((e,t)=>{const r="customElements",n=new Map;e[r]={define(i,s,o){n.set(i,s),t[i.toUpperCase()]=s;const a=[s.name,s.observedAttributes];ue(e,[r,"define"],[i,a,o])},get:t=>n.get(t)||ue(e,[r,"get"],[t]),whenDefined:t=>n.has(t)?Promise.resolve():ue(e,[r,"whenDefined"],[t]),upgrade:t=>ue(e,[r,"upgrade"],[t])}})(o,p),h.v.map((([e,t,n,i,c])=>{const l=Ke[e]?V:"EventTarget"===t?J:"Object"===t?T:o[t],$=o[e]=H(12===i?class extends T{constructor(...t){super(),he(this,e,t)}}:o[e]||class extends l{},e);c&&(p[c]=$),n.map((([e,t,n])=>{e in $.prototype||e in l.prototype||("string"==typeof t?W($,e,{get(){if(!U(this,e)){const n=this[r],i=[...this[s],e],c=o[t];c&&B(this,e,new c(a,n,i))}return _(this,e)},set(t){B(this,e,t)}}):5===t?k($,e,(function(...t){return ue(this,[e],t)})):t>0&&(void 0!==n?k($,e,n):W($,e,{get(){return $e(this,[e])},set(t){return de(this,[e],t)}})))}))})),w("atob,btoa,crypto,indexedDB,setTimeout,setInterval,clearTimeout,clearInterval").map((t=>{delete D.prototype[t],t in o||(n=e[t],null!=n&&(o[t]="function"!=typeof n||n.toString().startsWith("class")?n:n.bind(e)))})),Object.getOwnPropertyNames(e).map((t=>{t in o||(o[t]=e[t])})),je.map((e=>A(o,e,{get:()=>(u(),o[e])}))),"trustedTypes"in e&&(o.trustedTypes=e.trustedTypes),Ue(o.Element,o.HTMLElement),ke(o.Document,C,g),M=o.DocumentFragment,z(M,11),q(M,S),_e(o.HTMLAnchorElement,C),L=o.HTMLFormElement,j(L,{}),X(L,"elements"),Be(o.HTMLIFrameElement),Pe(o.HTMLScriptElement,C),Xe(o.SVGGraphicsElement),De(o.HTMLHeadElement,C),De(o.HTMLBodyElement,C),((e,t)=>{j(e,{parentElement:{value:null},parentNode:{get:()=>t.n}})})(o.HTMLHtmlElement,C),fe(o,"CSSStyleSheet"),z(o.Comment,8),z(o.DocumentType,10),Object.assign(C,{V:a,J:c,U:new Proxy(o,{get:(e,t)=>{var r;if("string"!=typeof t||isNaN(t))return(null===(r=h.i.mainWindowAccessors)||void 0===r?void 0:r.includes(t))?$e(this,[t]):e[t];{let e=O()[t];return e?e.U:void 0}},has:()=>!0}),n:f("#document",a+".d"),o:f("HTML",a+".e"),s:f("HEAD",a+".h"),e:f("BODY",a+".b"),E:E,T:$,A:N,B:x,k:f}),o.requestAnimationFrame=e=>setTimeout((()=>e(performance.now())),9),o.cancelAnimationFrame=e=>clearTimeout(e),o.requestIdleCallback=(e,t)=>(t=Date.now(),setTimeout((()=>e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})),1)),o.cancelIdleCallback=e=>clearTimeout(e),ge(o,"localStorage",N,C),ge(o,"sessionStorage",N,C),N||(o.indexeddb=void 0),d)i={},o.history={pushState(e){i=e},replaceState(e){i=e},get state(){return i},length:0},o.indexeddb=void 0;else{const e=o.history.pushState.bind(o.history),t=o.history.replaceState.bind(o.history);o.history.pushState=(t,r,n)=>{!1!==C.$propagateHistoryChange$&&e(t,r,n)},o.history.replaceState=(e,r,n)=>{!1!==C.$propagateHistoryChange$&&t(e,r,n)}}o.Worker=void 0}get body(){return C.e}get document(){return C.n}get documentElement(){return C.o}fetch(e,t){return e="string"==typeof e||e instanceof URL?String(e):e.url,fetch(Ee(C,e,"fetch"),t)}get frames(){return C.U}get frameElement(){return x?null:F(c,a,"IFRAME")}get globalThis(){return C.U}get head(){return C.s}get length(){return O().length}get location(){return E}set location(e){E.href=e+""}get Image(){return Le(C)}get navigator(){return(e=>{const t={sendBeacon:(t,r)=>{try{return fetch(Ee(e,t,null),{method:"POST",body:r,mode:"no-cors",keepalive:!0,...Ne(e,t)}),!0}catch(e){return console.error(e),!1}}};for(let e in navigator)t[e]=navigator[e];return new Proxy(t,{set:(e,t,r)=>(navigator[t]=r,!0),get:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)?t[r]:$e(e.U,["navigator",r])})})(C)}get origin(){return E.origin}set origin(e){}get parent(){for(let e in p)if(p[e].V===c)return p[e].U;return C.U}postMessage(...e){p[e[0]]&&(L(u)>50&&u.splice(0,5),u.push({V:e[0],m:JSON.stringify(e[1])}),e=e.slice(1)),ue(this,["postMessage"],e,3)}get self(){return C.U}get top(){for(let e in p)if(p[e].B)return p[e].U;return C.U}get window(){return C.U}get XMLHttpRequest(){const e=XMLHttpRequest,t=String(e),r=H(class extends e{open(...e){e[1]=Ee(C,e[1],"xhr"),super.open(...e)}set withCredentials(e){h.i.allowXhrCredentials&&(super.withCredentials=e)}toString(){return t}},R(e));return r.prototype.constructor.toString=()=>t,r}},"Window"),V=class extends T{constructor(e,t,r,n){return super(e,t,r,n),new Proxy(this,{get:(e,t)=>$e(e,[t]),set:(e,t,r)=>(de(e,[t],r),!0)})}},J=class extends T{};return M.map((e=>J.prototype[e]=function(...t){return ue(this,[e],t,2)})),X(D,"devicePixelRatio"),Z(D),G(D,["getComputedStyle"]),new D,C},Ke={DOMStringMap:1,NamedNodeMap:1},Qe=({V:e,J:t,S:r,T:n},i,s)=>(p[e]||(p[e]=Ye(e,t,r,n,i,s)),h.K([7,e]),p[e]),et=[],tt=t=>{const r=t.data,n=r[0],i=r[1];if(h.x)if(7===n)(async e=>{let t,r=e.V,n=e.w,i=F(r,n,"SCRIPT"),s=e.j,o=e.S,a=e.H,c="",l=p[r],$=["text/jscript","text/javascript","text/x-javascript","application/javascript","application/x-javascript","text/ecmascript","text/x-ecmascript","application/ecmascript"];if(o)try{if(o=Me(l,o,"script")+"",B(i,4,o),t=await fetch(o),t.ok){let e=t.headers.get("content-type");$.some((t=>{var r,n,i;return null===(i=null===(r=null==e?void 0:e.toLowerCase)||void 0===r?void 0:(n=r.call(e)).includes)||void 0===i?void 0:i.call(n,t)}))&&(s=await t.text(),l.l=n,be(l,s,a||o)),Ie(i,"load")}else c=t.statusText,Ie(i,"error")}catch(e){console.error(e),c=String(e.stack||e),Ie(i,"error")}else s&&(c=Se(l,n,s,0,c));l.l="",h.K([6,r,n,c])})(i);else if(9===n)(({V:e,w:t,L:r,R:n,b:i})=>{if($[r])try{$[r].apply(ee(e,t,[],n),ee(e,t,[],i))}catch(e){console.error(e)}})(i);else if(10===n)(({V:e,q:t,b:r})=>{try{let n=p[e].U,i=0,s=L(t);for(;i<s;i++)i+1<s?n=n[t[i]]:n[t[i]].apply(n,ee(null,e,[],r))}catch(e){console.error(e)}})(i);else if(5===n)Qe(i);else if(8===n)p[i].x=1,p[i].y=0;else if(14===n)p[i].T=r[2];else if(13===n){const e=i.V,t=p[e];t.E.href=i.url,function(e,t,r){const n=t.U.history;switch(r.type){case 0:t.$propagateHistoryChange$=!1;try{n.pushState(r.state,"",r.newUrl)}catch(e){}t.$propagateHistoryChange$=!0;break;case 1:t.$propagateHistoryChange$=!1;try{n.replaceState(r.state,"",r.newUrl)}catch(e){}t.$propagateHistoryChange$=!0}}(i.V,t,i)}else 15===n&&((e,t,r,n,i)=>{const s=F(t,r);s&&"function"==typeof s[n]&&s[n].apply(s,i)})(...r);else 1===n?((t=>{const r=h.i=JSON.parse(t.i),n=t.I;h.t=importScripts.bind(e),h.v=t.v,h.C=t.C,h.I=n,h.K=postMessage.bind(e),h.P=t.P,h.$tabId$=t.$tabId$,e.importScripts=void 0,delete e.postMessage,delete e.WorkerGlobalScope,w("resolveUrl,resolveSendBeaconRequestParameters,get,set,apply").map((e=>{r[e]&&(r[e]=new Function("return "+r[e])())}))})(i),h.K([2])):3===n?(h.v=[...h.v,...i],h.x=1,h.K([4]),[...et].map(tt),et.length=0):et.push(t)};e.onmessage=tt,postMessage([0])})(self);\\n\'],{type:"text/javascript"})),{name:"Partytown üéâ"}),X.onmessage=t=>{const r=t.data;12===r[0]?H(X,r[1]):e(X,r)},console.warn("@builder.io/partytown package has changed organization and now is\\n@qwik.dev/partytown https://www.npmjs.com/package/@qwik.dev/partytown\\nWe recommend using the new package to stay up to date on feature releases and bug fixes."),S.addEventListener("pt1",(e=>B(X,w(e.detail.frameElement),e.detail))))}))})(window);\n<\/script></head></html>')):s.endsWith("proxytown")&&n.respondWith((n=>new Promise((async i=>{const s=await n.clone().json(),o=await(r=>new Promise((async n=>{const i=((e,t)=>{const r=t.split(".").pop();let n=e.find((e=>e.url.endsWith(`?${r}`)));return n||(n=[...e].sort(((e,t)=>e.url>t.url?-1:e.url<t.url?1:0))[0]),n})([...await self.clients.matchAll()],r.F);if(i){const s=[n,setTimeout((()=>{e.delete(r.F),n(t(r,"Timeout"))}),1e4)];e.set(r.F,s),i.postMessage(r)}else n(t(r,"NoParty"))})))(s);i(r(JSON.stringify(o),"application/json"))})))(i))};
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\partytown.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,999999999),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.3-dev1734732935152":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-atomics.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(window => {
    const isPromise = v => "object" == typeof v && v && v.then;
    const noop = () => {};
    const len = obj => obj.length;
    const getConstructorName = obj => {
        var _a, _b, _c;
        try {
            const constructorName = null === (_a = null == obj ? void 0 : obj.constructor) || void 0 === _a ? void 0 : _a.name;
            if (constructorName) {
                return constructorName;
            }
        } catch (e) {}
        try {
            const zoneJsConstructorName = null === (_c = null === (_b = null == obj ? void 0 : obj.__zone_symbol__originalInstance) || void 0 === _b ? void 0 : _b.constructor) || void 0 === _c ? void 0 : _c.name;
            if (zoneJsConstructorName) {
                return zoneJsConstructorName;
            }
        } catch (e) {}
        return "";
    };
    const startsWith = (str, val) => str.startsWith(val);
    const isValidMemberName = memberName => !(startsWith(memberName, "webkit") || startsWith(memberName, "toJSON") || startsWith(memberName, "constructor") || startsWith(memberName, "toString") || startsWith(memberName, "_"));
    const getNodeName = node => 11 === node.nodeType && node.host ? "#s" : node.nodeName;
    const randomId = () => Math.round(Math.random() * Number.MAX_SAFE_INTEGER).toString(36);
    const defineConstructorName = (Cstr, value) => ((obj, memberName, descriptor) => Object.defineProperty(obj, memberName, {
        ...descriptor,
        configurable: true
    }))(Cstr, "name", {
        value: value
    });
    const htmlConstructorTags = {
        Anchor: "a",
        DList: "dl",
        Image: "img",
        OList: "ol",
        Paragraph: "p",
        Quote: "q",
        TableCaption: "caption",
        TableCell: "td",
        TableCol: "colgroup",
        TableRow: "tr",
        TableSection: "tbody",
        UList: "ul"
    };
    const svgConstructorTags = {
        Graphics: "g",
        SVG: "svg"
    };
    const defaultPartytownForwardPropertySettings = {
        preserveBehavior: false
    };
    const arrayMethods = Object.freeze((obj => {
        const properties = new Set;
        let currentObj = obj;
        do {
            Object.getOwnPropertyNames(currentObj).forEach((item => {
                "function" == typeof currentObj[item] && properties.add(item);
            }));
        } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
        return Array.from(properties);
    })([]));
    const InstanceIdKey = Symbol();
    const CreatedKey = Symbol();
    const instances = new Map;
    const mainRefs = new Map;
    const winCtxs = {};
    const windowIds = new WeakMap;
    const getAndSetInstanceId = (instance, instanceId) => {
        if (instance) {
            if (instanceId = windowIds.get(instance)) {
                return instanceId;
            }
            (instanceId = instance[InstanceIdKey]) || setInstanceId(instance, instanceId = randomId());
            return instanceId;
        }
    };
    const getInstance = (winId, instanceId, win, doc, docId) => {
        if ((win = winCtxs[winId]) && win.$window$) {
            if (winId === instanceId) {
                return win.$window$;
            }
            doc = win.$window$.document;
            docId = instanceId.split(".").pop();
            if ("d" === docId) {
                return doc;
            }
            if ("e" === docId) {
                return doc.documentElement;
            }
            if ("h" === docId) {
                return doc.head;
            }
            if ("b" === docId) {
                return doc.body;
            }
        }
        return instances.get(instanceId);
    };
    const setInstanceId = (instance, instanceId, now) => {
        if (instance) {
            instances.set(instanceId, instance);
            instance[InstanceIdKey] = instanceId;
            instance[CreatedKey] = now = Date.now();
            if (now > lastCleanup + 5e3) {
                instances.forEach(((storedInstance, instanceId) => {
                    storedInstance[CreatedKey] < lastCleanup && storedInstance.nodeType && !storedInstance.isConnected && instances.delete(instanceId);
                }));
                lastCleanup = now;
            }
        }
    };
    let lastCleanup = 0;
    const mainWindow = window.parent;
    const docImpl = document.implementation.createHTMLDocument();
    const config = mainWindow.partytown || {};
    const libPath = (config.lib || "/~partytown/") + "debug/";
    const logMain = msg => {
        console.debug.apply(console, [ "%cMain üåé", "background: #717171; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;", msg ]);
    };
    const winIds = [];
    const normalizedWinId = winId => {
        winIds.includes(winId) || winIds.push(winId);
        return winIds.indexOf(winId) + 1;
    };
    const defineCustomElement = (winId, worker, ceData) => {
        const Cstr = defineConstructorName(class extends winCtxs[winId].$window$.HTMLElement {}, ceData[0]);
        const ceCallbackMethods = "connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",");
        ceCallbackMethods.map((callbackMethodName => Cstr.prototype[callbackMethodName] = function(...args) {
            worker.postMessage([ 15, winId, getAndSetInstanceId(this), callbackMethodName, args ]);
        }));
        Cstr.observedAttributes = ceData[1];
        return Cstr;
    };
    const serializeForWorker = ($winId$, value, added, type, cstrName, prevInstanceId) => void 0 !== value && (type = typeof value) ? "string" === type || "number" === type || "boolean" === type || null == value ? [ 0, value ] : "function" === type ? [ 6 ] : (added = added || new Set) && Array.isArray(value) ? added.has(value) ? [ 1, [] ] : added.add(value) && [ 1, value.map((v => serializeForWorker($winId$, v, added))) ] : "object" === type ? serializedValueIsError(value) ? [ 14, {
        name: value.name,
        message: value.message,
        stack: value.stack
    } ] : "" === (cstrName = getConstructorName(value)) ? [ 2, {} ] : "Window" === cstrName ? [ 3, [ $winId$, $winId$ ] ] : "HTMLCollection" === cstrName || "NodeList" === cstrName ? [ 7, Array.from(value).map((v => serializeForWorker($winId$, v, added)[1])) ] : cstrName.endsWith("Event") ? [ 5, serializeObjectForWorker($winId$, value, added) ] : "CSSRuleList" === cstrName ? [ 12, Array.from(value).map(serializeCssRuleForWorker) ] : startsWith(cstrName, "CSS") && cstrName.endsWith("Rule") ? [ 11, serializeCssRuleForWorker(value) ] : "CSSStyleDeclaration" === cstrName ? [ 13, serializeObjectForWorker($winId$, value, added) ] : "Attr" === cstrName ? [ 10, [ value.name, value.value ] ] : value.nodeType ? [ 3, [ $winId$, getAndSetInstanceId(value), getNodeName(value), prevInstanceId ] ] : [ 2, serializeObjectForWorker($winId$, value, added, true, true) ] : void 0 : value;
    const serializeObjectForWorker = (winId, obj, added, includeFunctions, includeEmptyStrings, serializedObj, propName, propValue) => {
        serializedObj = {};
        if (!added.has(obj)) {
            added.add(obj);
            for (propName in obj) {
                if (isValidMemberName(propName)) {
                    propValue = "path" === propName && getConstructorName(obj).endsWith("Event") ? obj.composedPath() : obj[propName];
                    (includeFunctions || "function" != typeof propValue) && (includeEmptyStrings || "" !== propValue) && (serializedObj[propName] = serializeForWorker(winId, propValue, added));
                }
            }
        }
        return serializedObj;
    };
    const serializeCssRuleForWorker = cssRule => {
        let obj = {};
        let key;
        for (key in cssRule) {
            validCssRuleProps.includes(key) && (obj[key] = String(cssRule[key]));
        }
        return obj;
    };
    let ErrorObject = null;
    const serializedValueIsError = value => {
        var _a;
        ErrorObject = (null === (_a = window.top) || void 0 === _a ? void 0 : _a.Error) || ErrorObject;
        return value instanceof ErrorObject;
    };
    const deserializeFromWorker = (worker, serializedTransfer, serializedType, serializedValue) => {
        if (serializedTransfer) {
            serializedType = serializedTransfer[0];
            serializedValue = serializedTransfer[1];
            return 0 === serializedType ? serializedValue : 4 === serializedType ? deserializeRefFromWorker(worker, serializedValue) : 1 === serializedType ? serializedValue.map((v => deserializeFromWorker(worker, v))) : 3 === serializedType ? getInstance(serializedValue[0], serializedValue[1]) : 5 === serializedType ? constructEvent(deserializeObjectFromWorker(worker, serializedValue)) : 2 === serializedType ? deserializeObjectFromWorker(worker, serializedValue) : 8 === serializedType ? serializedValue : 9 === serializedType ? new window[serializedTransfer[2]](serializedValue) : void 0;
        }
    };
    const deserializeRefFromWorker = (worker, {$winId$: $winId$, $instanceId$: $instanceId$, $refId$: $refId$}, ref) => {
        ref = mainRefs.get($refId$);
        if (!ref) {
            ref = function(...args) {
                worker.postMessage([ 9, {
                    $winId$: $winId$,
                    $instanceId$: $instanceId$,
                    $refId$: $refId$,
                    $thisArg$: serializeForWorker($winId$, this),
                    $args$: serializeForWorker($winId$, args)
                } ]);
            };
            mainRefs.set($refId$, ref);
        }
        return ref;
    };
    const constructEvent = eventProps => new ("detail" in eventProps ? CustomEvent : Event)(eventProps.type, eventProps);
    const deserializeObjectFromWorker = (worker, serializedValue, obj, key) => {
        obj = {};
        for (key in serializedValue) {
            obj[key] = deserializeFromWorker(worker, serializedValue[key]);
        }
        return obj;
    };
    const validCssRuleProps = "cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(",");
    const mainAccessHandler = async (worker, accessReq) => {
        let accessRsp = {
            $msgId$: accessReq.$msgId$
        };
        let totalTasks = len(accessReq.$tasks$);
        let i = 0;
        let task;
        let winId;
        let applyPath;
        let instance;
        let rtnValue;
        let isLast;
        for (;i < totalTasks; i++) {
            try {
                isLast = i === totalTasks - 1;
                task = accessReq.$tasks$[i];
                winId = task.$winId$;
                applyPath = task.$applyPath$;
                !winCtxs[winId] && winId.startsWith("f_") && await new Promise((resolve => {
                    let check = 0;
                    let callback = () => {
                        winCtxs[winId] || check++ > 1e3 ? resolve() : requestAnimationFrame(callback);
                    };
                    callback();
                }));
                if (1 === applyPath[0] && applyPath[1] in winCtxs[winId].$window$) {
                    setInstanceId(new winCtxs[winId].$window$[applyPath[1]](...deserializeFromWorker(worker, applyPath[2])), task.$instanceId$);
                } else {
                    instance = getInstance(winId, task.$instanceId$);
                    if (instance) {
                        rtnValue = applyToInstance(worker, winId, instance, applyPath, isLast, task.$groupedGetters$);
                        task.$assignInstanceId$ && ("string" == typeof task.$assignInstanceId$ ? setInstanceId(rtnValue, task.$assignInstanceId$) : winCtxs[task.$assignInstanceId$.$winId$] = {
                            $winId$: task.$assignInstanceId$.$winId$,
                            $window$: {
                                document: rtnValue
                            }
                        });
                        if (isPromise(rtnValue)) {
                            rtnValue = await rtnValue;
                            isLast && (accessRsp.$isPromise$ = true);
                        }
                        isLast && (accessRsp.$rtnValue$ = serializeForWorker(winId, rtnValue, void 0, void 0, void 0, task.$instanceId$));
                    } else {
                        accessRsp.$error$ = `Error finding instance "${task.$instanceId$}" on window ${normalizedWinId(winId)}`;
                        console.error(accessRsp.$error$, task);
                    }
                }
            } catch (e) {
                isLast ? accessRsp.$error$ = String(e.stack || e) : console.error(e);
            }
        }
        return accessRsp;
    };
    const applyToInstance = (worker, winId, instance, applyPath, isLast, groupedGetters) => {
        let i = 0;
        let l = len(applyPath);
        let next;
        let current;
        let previous;
        let args;
        let groupedRtnValues;
        for (;i < l; i++) {
            current = applyPath[i];
            next = applyPath[i + 1];
            previous = applyPath[i - 1];
            try {
                if (!Array.isArray(next)) {
                    if ("string" == typeof current || "number" == typeof current) {
                        if (i + 1 === l && groupedGetters) {
                            groupedRtnValues = {};
                            groupedGetters.map((propName => groupedRtnValues[propName] = instance[propName]));
                            return groupedRtnValues;
                        }
                        instance = instance[current];
                    } else {
                        if (0 === next) {
                            instance[previous] = deserializeFromWorker(worker, current);
                            return;
                        }
                        if ("function" == typeof instance[previous]) {
                            args = deserializeFromWorker(worker, current);
                            "define" === previous && "CustomElementRegistry" === getConstructorName(instance) && (args[1] = defineCustomElement(winId, worker, args[1]));
                            "insertRule" === previous && args[1] > len(instance.cssRules) && (args[1] = len(instance.cssRules));
                            instance = instance[previous].apply(instance, args);
                            if ("play" === previous) {
                                return Promise.resolve();
                            }
                        }
                    }
                }
            } catch (err) {
                if (isLast) {
                    throw err;
                }
                console.debug("Non-blocking setter error:", err);
            }
        }
        return instance;
    };
    const mainForwardTrigger = (worker, $winId$, win) => {
        let queuedForwardCalls = win._ptf;
        let forwards = (win.partytown || {}).forward || [];
        let i;
        let mainForwardFn;
        let forwardCall = ($forward$, args) => worker.postMessage([ 10, {
            $winId$: $winId$,
            $forward$: $forward$,
            $args$: serializeForWorker($winId$, Array.from(args))
        } ]);
        win._ptf = void 0;
        forwards.map((forwardProps => {
            const [property, {preserveBehavior: preserveBehavior}] = (propertyOrPropertyWithSettings => {
                if ("string" == typeof propertyOrPropertyWithSettings) {
                    return [ propertyOrPropertyWithSettings, defaultPartytownForwardPropertySettings ];
                }
                const [property, settings = defaultPartytownForwardPropertySettings] = propertyOrPropertyWithSettings;
                return [ property, {
                    ...defaultPartytownForwardPropertySettings,
                    ...settings
                } ];
            })(forwardProps);
            mainForwardFn = win;
            property.split(".").map(((_, i, arr) => {
                mainForwardFn = mainForwardFn[arr[i]] = i + 1 < len(arr) ? mainForwardFn[arr[i]] || (propertyName => arrayMethods.includes(propertyName) ? [] : {})(arr[i + 1]) : (() => {
                    let originalFunction = null;
                    if (preserveBehavior) {
                        const {methodOrProperty: methodOrProperty, thisObject: thisObject} = ((window, properties) => {
                            let thisObject = window;
                            for (let i = 0; i < properties.length - 1; i += 1) {
                                thisObject = thisObject[properties[i]];
                            }
                            return {
                                thisObject: thisObject,
                                methodOrProperty: properties.length > 0 ? thisObject[properties[properties.length - 1]] : void 0
                            };
                        })(win, arr);
                        "function" == typeof methodOrProperty && (originalFunction = (...args) => methodOrProperty.apply(thisObject, ...args));
                    }
                    return (...args) => {
                        let returnValue;
                        originalFunction && (returnValue = originalFunction(args));
                        forwardCall(arr, args);
                        return returnValue;
                    };
                })();
            }));
        }));
        if (queuedForwardCalls) {
            for (i = 0; i < len(queuedForwardCalls); i += 2) {
                forwardCall(queuedForwardCalls[i], queuedForwardCalls[i + 1]);
            }
        }
    };
    const readNextScript = (worker, winCtx) => {
        let $winId$ = winCtx.$winId$;
        let win = winCtx.$window$;
        let doc = win.document;
        let scriptSelector = 'script[type="text/partytown"]:not([data-ptid]):not([data-pterror])';
        let blockingScriptSelector = scriptSelector + ":not([async]):not([defer])";
        let scriptElm;
        let $instanceId$;
        let scriptData;
        if (doc && doc.body) {
            scriptElm = doc.querySelector(blockingScriptSelector);
            scriptElm || (scriptElm = doc.querySelector(scriptSelector));
            if (scriptElm) {
                scriptElm.dataset.ptid = $instanceId$ = getAndSetInstanceId(scriptElm, $winId$);
                scriptData = {
                    $winId$: $winId$,
                    $instanceId$: $instanceId$
                };
                if (scriptElm.src) {
                    scriptData.$url$ = scriptElm.src;
                    scriptData.$orgUrl$ = scriptElm.dataset.ptsrc || scriptElm.src;
                } else {
                    scriptData.$content$ = scriptElm.innerHTML;
                }
                worker.postMessage([ 7, scriptData ]);
            } else {
                if (!winCtx.$isInitialized$) {
                    winCtx.$isInitialized$ = 1;
                    mainForwardTrigger(worker, $winId$, win);
                    doc.dispatchEvent(new CustomEvent("pt0"));
                    {
                        const winType = win === win.top ? "top" : "iframe";
                        logMain(`Executed ${winType} window ${normalizedWinId($winId$)} environment scripts in ${(performance.now() - winCtx.$startTime$).toFixed(1)}ms`);
                    }
                }
                worker.postMessage([ 8, $winId$ ]);
            }
        } else {
            requestAnimationFrame((() => readNextScript(worker, winCtx)));
        }
    };
    const registerWindow = (worker, $winId$, $window$) => {
        if (!windowIds.has($window$)) {
            windowIds.set($window$, $winId$);
            const doc = $window$.document;
            const history = $window$.history;
            const $parentWinId$ = windowIds.get($window$.parent);
            let initialised = false;
            const onInitialisedQueue = [];
            const onInitialised = callback => {
                initialised ? callback() : onInitialisedQueue.push(callback);
            };
            const sendInitEnvData = () => {
                worker.postMessage([ 5, {
                    $winId$: $winId$,
                    $parentWinId$: $parentWinId$,
                    $url$: doc.baseURI,
                    $visibilityState$: doc.visibilityState
                } ]);
                setTimeout((() => {
                    initialised = true;
                    onInitialisedQueue.forEach((callback => {
                        callback();
                    }));
                }));
            };
            const pushState = history.pushState.bind(history);
            const replaceState = history.replaceState.bind(history);
            const onLocationChange = (type, state, newUrl, oldUrl) => () => {
                worker.postMessage([ 13, {
                    $winId$: $winId$,
                    type: type,
                    state: state,
                    url: doc.baseURI,
                    newUrl: newUrl,
                    oldUrl: oldUrl
                } ]);
            };
            history.pushState = (state, _, newUrl) => {
                pushState(state, _, newUrl);
                onInitialised(onLocationChange(0, state, null == newUrl ? void 0 : newUrl.toString()));
            };
            history.replaceState = (state, _, newUrl) => {
                replaceState(state, _, newUrl);
                onInitialised(onLocationChange(1, state, null == newUrl ? void 0 : newUrl.toString()));
            };
            $window$.addEventListener("popstate", (event => {
                onInitialised(onLocationChange(2, event.state));
            }));
            $window$.addEventListener("hashchange", (event => {
                onInitialised(onLocationChange(3, {}, event.newURL, event.oldURL));
            }));
            $window$.addEventListener("ptupdate", (() => {
                readNextScript(worker, winCtxs[$winId$]);
            }));
            doc.addEventListener("visibilitychange", (() => worker.postMessage([ 14, $winId$, doc.visibilityState ])));
            winCtxs[$winId$] = {
                $winId$: $winId$,
                $window$: $window$
            };
            winCtxs[$winId$].$startTime$ = performance.now();
            {
                const winType = $winId$ === $parentWinId$ ? "top" : "iframe";
                logMain(`Registered ${winType} window ${normalizedWinId($winId$)}`);
            }
            "complete" === doc.readyState ? sendInitEnvData() : $window$.addEventListener("load", sendInitEnvData);
        }
    };
    const onMessageFromWebWorker = (worker, msg, winCtx) => {
        if (4 === msg[0]) {
            registerWindow(worker, randomId(), mainWindow);
        } else {
            winCtx = winCtxs[msg[1]];
            winCtx && (7 === msg[0] ? requestAnimationFrame((() => readNextScript(worker, winCtx))) : 6 === msg[0] && ((worker, winCtx, instanceId, errorMsg, scriptElm) => {
                scriptElm = winCtx.$window$.document.querySelector(`[data-ptid="${instanceId}"]`);
                if (scriptElm) {
                    errorMsg ? scriptElm.dataset.pterror = errorMsg : scriptElm.type += "-x";
                    delete scriptElm.dataset.ptid;
                }
                readNextScript(worker, winCtx);
            })(worker, winCtx, msg[2], msg[3]));
        }
    };
    const readMainPlatform = () => {
        const elm = docImpl.createElement("i");
        const textNode = docImpl.createTextNode("");
        const comment = docImpl.createComment("");
        const frag = docImpl.createDocumentFragment();
        const shadowRoot = docImpl.createElement("p").attachShadow({
            mode: "open"
        });
        const intersectionObserver = getGlobalConstructor(mainWindow, "IntersectionObserver");
        const mutationObserver = getGlobalConstructor(mainWindow, "MutationObserver");
        const resizeObserver = getGlobalConstructor(mainWindow, "ResizeObserver");
        const perf = mainWindow.performance;
        const screen = mainWindow.screen;
        const impls = [ [ mainWindow.history ], [ perf ], [ perf.navigation ], [ perf.timing ], [ screen ], [ screen.orientation ], [ mainWindow.visualViewport ], [ intersectionObserver, 12 ], [ mutationObserver, 12 ], [ resizeObserver, 12 ], [ textNode ], [ comment ], [ frag ], [ shadowRoot ], [ elm ], [ elm.attributes ], [ elm.classList ], [ elm.dataset ], [ elm.style ], [ docImpl ], [ docImpl.doctype ] ];
        const initialInterfaces = [ readImplementation("Window", mainWindow), readImplementation("Node", textNode) ];
        const $config$ = function(config) {
            return JSON.stringify(config, ((key, value) => {
                if ("function" == typeof value) {
                    value = String(value);
                    value.startsWith(key + "(") && (value = "function " + value);
                }
                "loadScriptsOnMainThread" === key && (value = value.map((scriptUrl => Array.isArray(scriptUrl) ? scriptUrl : [ "string" == typeof scriptUrl ? "string" : "regexp", "string" == typeof scriptUrl ? scriptUrl : scriptUrl.source ])));
                return value;
            }));
        }(config);
        const initWebWorkerData = {
            $config$: $config$,
            $interfaces$: readImplementations(impls, initialInterfaces),
            $libPath$: new URL(libPath, mainWindow.location) + "",
            $origin$: origin,
            $tabId$: mainWindow._pttab
        };
        addGlobalConstructorUsingPrototype(initWebWorkerData.$interfaces$, mainWindow, "IntersectionObserverEntry");
        return initWebWorkerData;
    };
    const readMainInterfaces = () => {
        const elms = Object.getOwnPropertyNames(mainWindow).map((interfaceName => ((doc, interfaceName, r, tag) => {
            r = interfaceName.match(/^(HTML|SVG)(.+)Element$/);
            if (r) {
                tag = r[2];
                return "S" == interfaceName[0] ? doc.createElementNS("http://www.w3.org/2000/svg", svgConstructorTags[tag] || tag.slice(0, 2).toLowerCase() + tag.slice(2)) : doc.createElement(htmlConstructorTags[tag] || tag);
            }
        })(docImpl, interfaceName))).filter((elm => elm)).map((elm => [ elm ]));
        return readImplementations(elms, []);
    };
    const readImplementations = (impls, interfaces) => {
        const cstrs = new Set([ "Object" ]);
        const cstrImpls = impls.filter((implData => implData[0])).map((implData => {
            const impl = implData[0];
            const interfaceType = implData[1];
            const cstrName = getConstructorName(impl);
            const CstrPrototype = mainWindow[cstrName].prototype;
            return [ cstrName, CstrPrototype, impl, interfaceType ];
        }));
        cstrImpls.map((([cstrName, CstrPrototype, impl, intefaceType]) => readOwnImplementation(cstrs, interfaces, cstrName, CstrPrototype, impl, intefaceType)));
        return interfaces;
    };
    const readImplementation = (cstrName, impl, memberName) => {
        let interfaceMembers = [];
        let interfaceInfo = [ cstrName, "Object", interfaceMembers ];
        for (memberName in impl) {
            readImplementationMember(interfaceMembers, impl, memberName);
        }
        return interfaceInfo;
    };
    const readOwnImplementation = (cstrs, interfaces, cstrName, CstrPrototype, impl, interfaceType) => {
        if (!cstrs.has(cstrName)) {
            cstrs.add(cstrName);
            const SuperCstr = Object.getPrototypeOf(CstrPrototype);
            const superCstrName = getConstructorName(SuperCstr);
            const interfaceMembers = [];
            const propDescriptors = Object.getOwnPropertyDescriptors(CstrPrototype);
            readOwnImplementation(cstrs, interfaces, superCstrName, SuperCstr, impl, interfaceType);
            for (const memberName in propDescriptors) {
                readImplementationMember(interfaceMembers, impl, memberName);
            }
            interfaces.push([ cstrName, superCstrName, interfaceMembers, interfaceType, getNodeName(impl) ]);
        }
    };
    const readImplementationMember = (interfaceMembers, implementation, memberName, value, memberType, cstrName) => {
        try {
            if (isValidMemberName(memberName) && isNaN(memberName[0]) && "all" !== memberName) {
                value = implementation[memberName];
                memberType = typeof value;
                if ("function" === memberType) {
                    (String(value).includes("[native") || Object.getPrototypeOf(implementation)[memberName]) && interfaceMembers.push([ memberName, 5 ]);
                } else if ("object" === memberType && null != value) {
                    cstrName = getConstructorName(value);
                    "Object" !== cstrName && "Function" !== cstrName && self[cstrName] && interfaceMembers.push([ memberName, value.nodeType || cstrName ]);
                } else {
                    "symbol" !== memberType && (memberName.toUpperCase() === memberName ? interfaceMembers.push([ memberName, 6, value ]) : interfaceMembers.push([ memberName, 6 ]));
                }
            }
        } catch (e) {
            console.warn(e);
        }
    };
    const getGlobalConstructor = (mainWindow, cstrName) => void 0 !== mainWindow[cstrName] ? new mainWindow[cstrName](noop) : 0;
    const addGlobalConstructorUsingPrototype = ($interfaces$, mainWindow, cstrName) => {
        void 0 !== mainWindow[cstrName] && $interfaces$.push([ cstrName, "Object", Object.keys(mainWindow[cstrName].prototype).map((propName => [ propName, 6 ])), 12 ]);
    };
    let worker;
    (async receiveMessage => {
        const sharedDataBuffer = new SharedArrayBuffer(1073741824);
        const sharedData = new Int32Array(sharedDataBuffer);
        return (worker, msg) => {
            const msgType = msg[0];
            const accessReq = msg[1];
            if (0 === msgType) {
                const initData = readMainPlatform();
                initData.$sharedDataBuffer$ = sharedDataBuffer;
                worker.postMessage([ 1, initData ]);
            } else {
                2 === msg[0] ? worker.postMessage([ 3, readMainInterfaces() ]) : 11 === msgType ? receiveMessage(accessReq, (accessRsp => {
                    const stringifiedData = JSON.stringify(accessRsp);
                    const stringifiedDataLength = stringifiedData.length;
                    for (let i = 0; i < stringifiedDataLength; i++) {
                        sharedData[i + 1] = stringifiedData.charCodeAt(i);
                    }
                    sharedData[0] = stringifiedDataLength;
                    Atomics.notify(sharedData, 0);
                })) : onMessageFromWebWorker(worker, msg);
            }
        };
    })(((accessReq, responseCallback) => mainAccessHandler(worker, accessReq).then(responseCallback))).then((onMessageHandler => {
        if (onMessageHandler) {
            worker = new Worker(libPath + "partytown-ww-atomics.js?v=0.10.3-dev1734732935152", {
                name: "Partytown üéâ"
            });
            worker.onmessage = ev => {
                const msg = ev.data;
                12 === msg[0] ? mainAccessHandler(worker, msg[1]) : onMessageHandler(worker, msg);
            };
            console.warn("@builder.io/partytown package has changed organization and now is\n@qwik.dev/partytown https://www.npmjs.com/package/@qwik.dev/partytown\nWe recommend using the new package to stay up to date on feature releases and bug fixes.");
            logMain("Created Partytown web worker (0.10.3-dev1734732935152)");
            worker.onerror = ev => console.error("Web Worker Error", ev);
            mainWindow.addEventListener("pt1", (ev => registerWindow(worker, getAndSetInstanceId(ev.detail.frameElement), ev.detail)));
        }
    }));
})(window);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-media.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(self => {
    const [getter, setter, callMethod, constructGlobal, definePrototypePropertyDescriptor, randomId, WinIdKey, InstanceIdKey, ApplyPathKey] = self.$bridgeToMedia$;
    delete self.$bridgeToMedia$;
    const ContextKey = Symbol();
    const MediaSourceKey = Symbol();
    const ReadyStateKey = Symbol();
    const SourceBuffersKey = Symbol();
    const SourceBufferTasksKey = Symbol();
    const TimeRangesKey = Symbol();
    const EMPTY_ARRAY = [];
    const defineCstr = (win, cstrName, Cstr) => win[cstrName] = defineCstrName(cstrName, Cstr);
    const defineCstrName = (cstrName, Cstr) => Object.defineProperty(Cstr, "name", {
        value: cstrName
    });
    const initCanvas = (WorkerBase, win) => {
        const HTMLCanvasDescriptorMap = {
            getContext: {
                value(contextType, contextAttributes) {
                    this[ContextKey] || (this[ContextKey] = (contextType.includes("webgl") ? createContextWebGL : createContext2D)(this, contextType, contextAttributes));
                    return this[ContextKey];
                }
            }
        };
        const WorkerCanvasGradient = defineCstr(win, "CanvasGradient", class extends WorkerBase {
            addColorStop(...args) {
                callMethod(this, [ "addColorStop" ], args, 2);
            }
        });
        const WorkerCanvasPattern = defineCstr(win, "CanvasPattern", class extends WorkerBase {
            setTransform(...args) {
                callMethod(this, [ "setTransform" ], args, 2);
            }
        });
        const createContext2D = (canvasInstance, contextType, contextAttributes) => {
            const winId = canvasInstance[WinIdKey];
            const ctxInstanceId = randomId();
            const ctxInstance = {
                [WinIdKey]: winId,
                [InstanceIdKey]: ctxInstanceId,
                [ApplyPathKey]: []
            };
            const ctx = callMethod(canvasInstance, [ "getContext" ], [ contextType, contextAttributes ], 1, ctxInstanceId);
            const ctx2dGetterMethods = "getContextAttributes,getImageData,getLineDash,getTransform,isPointInPath,isPointInStroke,measureText".split(",");
            const CanvasRenderingContext2D = {
                get: (target, propName) => "string" == typeof propName && propName in ctx ? "function" == typeof ctx[propName] ? (...args) => {
                    if (propName.startsWith("create")) {
                        const instanceId = randomId();
                        callMethod(ctxInstance, [ propName ], args, 2, instanceId);
                        if ("createImageData" === propName || "createPattern" === propName) {
                            (api => {
                                console.warn(`${api} not implemented`);
                            })(`${propName}()`);
                            return {
                                setTransform: () => {}
                            };
                        }
                        return new WorkerCanvasGradient(winId, instanceId);
                    }
                    const methodCallType = ctx2dGetterMethods.includes(propName) ? 1 : 2;
                    return callMethod(ctxInstance, [ propName ], args, methodCallType);
                } : ctx[propName] : target[propName],
                set(target, propName, value) {
                    if ("string" == typeof propName && propName in ctx) {
                        ctx[propName] !== value && "function" != typeof value && setter(ctxInstance, [ propName ], value);
                        ctx[propName] = value;
                    } else {
                        target[propName] = value;
                    }
                    return true;
                }
            };
            return new Proxy(ctx, CanvasRenderingContext2D);
        };
        const createContextWebGL = (canvasInstance, contextType, contextAttributes) => {
            const winId = canvasInstance[WinIdKey];
            const ctxInstanceId = randomId();
            const ctxInstance = {
                [WinIdKey]: winId,
                [InstanceIdKey]: ctxInstanceId,
                [ApplyPathKey]: []
            };
            const ctx = callMethod(canvasInstance, [ "getContext" ], [ contextType, contextAttributes ], 1, ctxInstanceId);
            const WebGLRenderingContextHandler = {
                get: (target, propName) => "string" == typeof propName ? "function" != typeof ctx[propName] ? ctx[propName] : (...args) => callMethod(ctxInstance, [ propName ], args, getWebGlMethodCallType(propName)) : target[propName],
                set(target, propName, value) {
                    if ("string" == typeof propName && propName in ctx) {
                        ctx[propName] !== value && "function" != typeof value && setter(ctxInstance, [ propName ], value);
                        ctx[propName] = value;
                    } else {
                        target[propName] = value;
                    }
                    return true;
                }
            };
            return new Proxy(ctx, WebGLRenderingContextHandler);
        };
        const ctxWebGLGetterMethods = "checkFramebufferStatus,makeXRCompatible".split(",");
        const getWebGlMethodCallType = methodName => methodName.startsWith("create") || methodName.startsWith("get") || methodName.startsWith("is") || ctxWebGLGetterMethods.includes(methodName) ? 1 : 2;
        defineCstr(win, "CanvasGradient", WorkerCanvasGradient);
        defineCstr(win, "CanvasPattern", WorkerCanvasPattern);
        definePrototypePropertyDescriptor(win.HTMLCanvasElement, HTMLCanvasDescriptorMap);
    };
    const initMedia = (WorkerBase, WorkerEventTargetProxy, env, win) => {
        var _a, _b;
        win.Audio = defineCstrName("HTMLAudioElement", class {
            constructor(src) {
                const audio = env.$createNode$("audio", randomId());
                audio.src = src;
                return audio;
            }
        });
        const WorkerAudioTrack = class extends WorkerBase {
            get enabled() {
                return getter(this, [ "enabled" ]);
            }
            set enabled(value) {
                setter(this, [ "enabled" ], value);
            }
            get id() {
                return getter(this, [ "id" ]);
            }
            get kind() {
                return getter(this, [ "kind" ]);
            }
            get label() {
                return getter(this, [ "label" ]);
            }
            get language() {
                return getter(this, [ "language" ]);
            }
            get sourceBuffer() {
                return new WorkerSourceBuffer(this);
            }
        };
        const WorkerAudioTrackList = class {
            constructor(mediaElm) {
                const winId = mediaElm[WinIdKey];
                const instanceId = mediaElm[InstanceIdKey];
                const instance = {
                    addEventListener(...args) {
                        callMethod(mediaElm, [ "audioTracks", "addEventListener" ], args, 3);
                    },
                    getTrackById: (...args) => callMethod(mediaElm, [ "audioTracks", "getTrackById" ], args),
                    get length() {
                        return getter(mediaElm, [ "audioTracks", "length" ]);
                    },
                    removeEventListener(...args) {
                        callMethod(mediaElm, [ "audioTracks", "removeEventListener" ], args, 3);
                    }
                };
                return new Proxy(instance, {
                    get: (target, propName) => "number" == typeof propName ? new WorkerAudioTrack(winId, instanceId, [ "audioTracks", propName ]) : target[propName]
                });
            }
        };
        const WorkerSourceBufferList = defineCstr(win, "SourceBufferList", class extends Array {
            constructor(mediaSource) {
                super();
                this[MediaSourceKey] = mediaSource;
            }
            addEventListener(...args) {
                callMethod(this[MediaSourceKey], [ "sourceBuffers", "addEventListener" ], args, 3);
            }
            removeEventListener(...args) {
                callMethod(this[MediaSourceKey], [ "sourceBuffers", "removeEventListener" ], args, 3);
            }
        });
        const WorkerSourceBuffer = defineCstr(win, "SourceBuffer", (_b = class extends WorkerEventTargetProxy {
            constructor(mediaSource) {
                super(mediaSource[WinIdKey], mediaSource[InstanceIdKey], [ "sourceBuffers" ]);
                this[_a] = [];
                this[MediaSourceKey] = mediaSource;
            }
            abort() {
                const sbIndex = getSourceBufferIndex(this);
                callMethod(this, [ sbIndex, "appendWindowStart" ], EMPTY_ARRAY, 1);
            }
            addEventListener(...args) {
                const sbIndex = getSourceBufferIndex(this);
                callMethod(this, [ sbIndex, "addEventListener" ], args, 3);
            }
            appendBuffer(buf) {
                this[SourceBufferTasksKey].push([ "appendBuffer", [ buf ], buf ]);
                drainSourceBufferQueue(this);
            }
            get appendWindowStart() {
                const sbIndex = getSourceBufferIndex(this);
                return getter(this, [ sbIndex, "appendWindowStart" ]);
            }
            set appendWindowStart(value) {
                const sbIndex = getSourceBufferIndex(this);
                setter(this, [ sbIndex, "appendWindowStart" ], value);
            }
            get appendWindowEnd() {
                const sbIndex = getSourceBufferIndex(this);
                return getter(this, [ sbIndex, "appendWindowEnd" ]);
            }
            set appendWindowEnd(value) {
                const sbIndex = getSourceBufferIndex(this);
                setter(this, [ sbIndex, "appendWindowEnd" ], value);
            }
            get buffered() {
                const mediaSource = this[MediaSourceKey];
                const sbIndex = getSourceBufferIndex(this);
                const timeRanges = new WorkerTimeRanges(mediaSource[WinIdKey], mediaSource[InstanceIdKey], [ "sourceBuffers", sbIndex, "buffered" ]);
                return timeRanges;
            }
            changeType(mimeType) {
                const sbIndex = getSourceBufferIndex(this);
                callMethod(this, [ sbIndex, "changeType" ], [ mimeType ], 2);
            }
            get mode() {
                const sbIndex = getSourceBufferIndex(this);
                return getter(this, [ sbIndex, "mode" ]);
            }
            set mode(value) {
                const sbIndex = getSourceBufferIndex(this);
                setter(this, [ sbIndex, "mode" ], value);
            }
            remove(start, end) {
                this[SourceBufferTasksKey].push([ "remove", [ start, end ] ]);
                drainSourceBufferQueue(this);
            }
            removeEventListener(...args) {
                const sbIndex = getSourceBufferIndex(this);
                callMethod(this, [ sbIndex, "removeEventListener" ], args, 3);
            }
            get timestampOffset() {
                const sbIndex = getSourceBufferIndex(this);
                return getter(this, [ sbIndex, "timestampOffset" ]);
            }
            set timestampOffset(value) {
                const sbIndex = getSourceBufferIndex(this);
                setter(this, [ sbIndex, "timestampOffset" ], value);
            }
            get updating() {
                const sbIndex = getSourceBufferIndex(this);
                return getter(this, [ sbIndex, "updating" ]);
            }
        }, _a = SourceBufferTasksKey, _b));
        const WorkerTimeRanges = defineCstr(win, "TimeRanges", class extends WorkerBase {
            start(...args) {
                return callMethod(this, [ "start" ], args);
            }
            end(...args) {
                return callMethod(this, [ "end" ], args);
            }
            get length() {
                return getter(this, [ "length" ]);
            }
        });
        const getSourceBufferIndex = sourceBuffer => {
            if (sourceBuffer) {
                const mediaSource = sourceBuffer[MediaSourceKey];
                const sourceBufferList = mediaSource[SourceBuffersKey];
                return sourceBufferList.indexOf(sourceBuffer);
            }
            return -1;
        };
        const drainSourceBufferQueue = sourceBuffer => {
            if (sourceBuffer[SourceBufferTasksKey].length) {
                if (!sourceBuffer.updating) {
                    const task = sourceBuffer[SourceBufferTasksKey].shift();
                    if (task) {
                        const sbIndex = getSourceBufferIndex(sourceBuffer);
                        callMethod(sourceBuffer, [ sbIndex, task[0] ], task[1], 3, void 0, task[2]);
                    }
                }
                setTimeout((() => drainSourceBufferQueue(sourceBuffer)), 50);
            }
        };
        const HTMLMediaDescriptorMap = {
            buffered: {
                get() {
                    if (!this[TimeRangesKey]) {
                        this[TimeRangesKey] = new WorkerTimeRanges(this[WinIdKey], this[InstanceIdKey], [ "buffered" ]);
                        setTimeout((() => {
                            this[TimeRangesKey] = void 0;
                        }), 5e3);
                    }
                    return this[TimeRangesKey];
                }
            },
            readyState: {
                get() {
                    if (4 === this[ReadyStateKey]) {
                        return 4;
                    }
                    if ("number" != typeof this[ReadyStateKey]) {
                        this[ReadyStateKey] = getter(this, [ "readyState" ]);
                        setTimeout((() => {
                            this[ReadyStateKey] = void 0;
                        }), 1e3);
                    }
                    return this[ReadyStateKey];
                }
            }
        };
        defineCstr(win, "MediaSource", class extends WorkerEventTargetProxy {
            constructor() {
                super(env.$winId$);
                this[SourceBuffersKey] = new WorkerSourceBufferList(this);
                constructGlobal(this, "MediaSource", EMPTY_ARRAY);
            }
            get activeSourceBuffers() {
                return [];
            }
            addSourceBuffer(mimeType) {
                const sourceBuffer = new WorkerSourceBuffer(this);
                this[SourceBuffersKey].push(sourceBuffer);
                callMethod(this, [ "addSourceBuffer" ], [ mimeType ]);
                return sourceBuffer;
            }
            clearLiveSeekableRange() {
                callMethod(this, [ "clearLiveSeekableRange" ], EMPTY_ARRAY, 2);
            }
            get duration() {
                return getter(this, [ "duration" ]);
            }
            set duration(value) {
                setter(this, [ "duration" ], value);
            }
            endOfStream(endOfStreamError) {
                callMethod(this, [ "endOfStream" ], [ endOfStreamError ], 3);
            }
            get readyState() {
                return getter(this, [ "readyState" ]);
            }
            removeSourceBuffer(sourceBuffer) {
                const index = getSourceBufferIndex(sourceBuffer);
                if (index > -1) {
                    this[SourceBuffersKey].splice(index, 1);
                    callMethod(this, [ "removeSourceBuffer" ], [ index ], 1);
                }
            }
            setLiveSeekableRange(start, end) {
                callMethod(this, [ "setLiveSeekableRange" ], [ start, end ], 2);
            }
            get sourceBuffers() {
                return this[SourceBuffersKey];
            }
            static isTypeSupported(mimeType) {
                if (!isStaticTypeSupported.has(mimeType)) {
                    const isSupported = callMethod(win, [ "MediaSource", "isTypeSupported" ], [ mimeType ]);
                    isStaticTypeSupported.set(mimeType, isSupported);
                }
                return isStaticTypeSupported.get(mimeType);
            }
        });
        const winURL = win.URL = defineCstrName("URL", class extends URL {});
        const hasAudioTracks = "audioTracks" in win.HTMLMediaElement.prototype;
        if (hasAudioTracks) {
            defineCstr(win, "AudioTrackList", WorkerAudioTrackList);
            defineCstr(win, "AudioTrack", WorkerAudioTrack);
            HTMLMediaDescriptorMap.audioTracks = {
                get() {
                    return new WorkerAudioTrackList(this);
                }
            };
        }
        definePrototypePropertyDescriptor(win.HTMLMediaElement, HTMLMediaDescriptorMap);
        winURL.createObjectURL = obj => callMethod(win, [ "URL", "createObjectURL" ], [ obj ]);
        winURL.revokeObjectURL = obj => callMethod(win, [ "URL", "revokeObjectURL" ], [ obj ]);
    };
    const isStaticTypeSupported = new Map;
    self.$bridgeFromMedia$ = (WorkerBase, WorkerEventTargetProxy, env, win, windowMediaConstructors) => {
        windowMediaConstructors.map((mediaCstrName => {
            delete win[mediaCstrName];
        }));
        initCanvas(WorkerBase, win);
        initMedia(WorkerBase, WorkerEventTargetProxy, env, win);
    };
})(self);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-sandbox-sw.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(window => {
    const isPromise = v => "object" == typeof v && v && v.then;
    const noop = () => {};
    const len = obj => obj.length;
    const getConstructorName = obj => {
        var _a, _b, _c;
        try {
            const constructorName = null === (_a = null == obj ? void 0 : obj.constructor) || void 0 === _a ? void 0 : _a.name;
            if (constructorName) {
                return constructorName;
            }
        } catch (e) {}
        try {
            const zoneJsConstructorName = null === (_c = null === (_b = null == obj ? void 0 : obj.__zone_symbol__originalInstance) || void 0 === _b ? void 0 : _b.constructor) || void 0 === _c ? void 0 : _c.name;
            if (zoneJsConstructorName) {
                return zoneJsConstructorName;
            }
        } catch (e) {}
        return "";
    };
    const startsWith = (str, val) => str.startsWith(val);
    const isValidMemberName = memberName => !(startsWith(memberName, "webkit") || startsWith(memberName, "toJSON") || startsWith(memberName, "constructor") || startsWith(memberName, "toString") || startsWith(memberName, "_"));
    const getNodeName = node => 11 === node.nodeType && node.host ? "#s" : node.nodeName;
    const randomId = () => Math.round(Math.random() * Number.MAX_SAFE_INTEGER).toString(36);
    const defineConstructorName = (Cstr, value) => ((obj, memberName, descriptor) => Object.defineProperty(obj, memberName, {
        ...descriptor,
        configurable: true
    }))(Cstr, "name", {
        value: value
    });
    const htmlConstructorTags = {
        Anchor: "a",
        DList: "dl",
        Image: "img",
        OList: "ol",
        Paragraph: "p",
        Quote: "q",
        TableCaption: "caption",
        TableCell: "td",
        TableCol: "colgroup",
        TableRow: "tr",
        TableSection: "tbody",
        UList: "ul"
    };
    const svgConstructorTags = {
        Graphics: "g",
        SVG: "svg"
    };
    const defaultPartytownForwardPropertySettings = {
        preserveBehavior: false
    };
    const arrayMethods = Object.freeze((obj => {
        const properties = new Set;
        let currentObj = obj;
        do {
            Object.getOwnPropertyNames(currentObj).forEach((item => {
                "function" == typeof currentObj[item] && properties.add(item);
            }));
        } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
        return Array.from(properties);
    })([]));
    const InstanceIdKey = Symbol();
    const CreatedKey = Symbol();
    const instances = new Map;
    const mainRefs = new Map;
    const winCtxs = {};
    const windowIds = new WeakMap;
    const getAndSetInstanceId = (instance, instanceId) => {
        if (instance) {
            if (instanceId = windowIds.get(instance)) {
                return instanceId;
            }
            (instanceId = instance[InstanceIdKey]) || setInstanceId(instance, instanceId = randomId());
            return instanceId;
        }
    };
    const getInstance = (winId, instanceId, win, doc, docId) => {
        if ((win = winCtxs[winId]) && win.$window$) {
            if (winId === instanceId) {
                return win.$window$;
            }
            doc = win.$window$.document;
            docId = instanceId.split(".").pop();
            if ("d" === docId) {
                return doc;
            }
            if ("e" === docId) {
                return doc.documentElement;
            }
            if ("h" === docId) {
                return doc.head;
            }
            if ("b" === docId) {
                return doc.body;
            }
        }
        return instances.get(instanceId);
    };
    const setInstanceId = (instance, instanceId, now) => {
        if (instance) {
            instances.set(instanceId, instance);
            instance[InstanceIdKey] = instanceId;
            instance[CreatedKey] = now = Date.now();
            if (now > lastCleanup + 5e3) {
                instances.forEach(((storedInstance, instanceId) => {
                    storedInstance[CreatedKey] < lastCleanup && storedInstance.nodeType && !storedInstance.isConnected && instances.delete(instanceId);
                }));
                lastCleanup = now;
            }
        }
    };
    let lastCleanup = 0;
    const mainWindow = window.parent;
    const docImpl = document.implementation.createHTMLDocument();
    const config = mainWindow.partytown || {};
    const libPath = (config.lib || "/~partytown/") + "debug/";
    const logMain = msg => {
        console.debug.apply(console, [ "%cMain üåé", "background: #717171; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;", msg ]);
    };
    const winIds = [];
    const normalizedWinId = winId => {
        winIds.includes(winId) || winIds.push(winId);
        return winIds.indexOf(winId) + 1;
    };
    const defineCustomElement = (winId, worker, ceData) => {
        const Cstr = defineConstructorName(class extends winCtxs[winId].$window$.HTMLElement {}, ceData[0]);
        const ceCallbackMethods = "connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",");
        ceCallbackMethods.map((callbackMethodName => Cstr.prototype[callbackMethodName] = function(...args) {
            worker.postMessage([ 15, winId, getAndSetInstanceId(this), callbackMethodName, args ]);
        }));
        Cstr.observedAttributes = ceData[1];
        return Cstr;
    };
    const serializeForWorker = ($winId$, value, added, type, cstrName, prevInstanceId) => void 0 !== value && (type = typeof value) ? "string" === type || "number" === type || "boolean" === type || null == value ? [ 0, value ] : "function" === type ? [ 6 ] : (added = added || new Set) && Array.isArray(value) ? added.has(value) ? [ 1, [] ] : added.add(value) && [ 1, value.map((v => serializeForWorker($winId$, v, added))) ] : "object" === type ? serializedValueIsError(value) ? [ 14, {
        name: value.name,
        message: value.message,
        stack: value.stack
    } ] : "" === (cstrName = getConstructorName(value)) ? [ 2, {} ] : "Window" === cstrName ? [ 3, [ $winId$, $winId$ ] ] : "HTMLCollection" === cstrName || "NodeList" === cstrName ? [ 7, Array.from(value).map((v => serializeForWorker($winId$, v, added)[1])) ] : cstrName.endsWith("Event") ? [ 5, serializeObjectForWorker($winId$, value, added) ] : "CSSRuleList" === cstrName ? [ 12, Array.from(value).map(serializeCssRuleForWorker) ] : startsWith(cstrName, "CSS") && cstrName.endsWith("Rule") ? [ 11, serializeCssRuleForWorker(value) ] : "CSSStyleDeclaration" === cstrName ? [ 13, serializeObjectForWorker($winId$, value, added) ] : "Attr" === cstrName ? [ 10, [ value.name, value.value ] ] : value.nodeType ? [ 3, [ $winId$, getAndSetInstanceId(value), getNodeName(value), prevInstanceId ] ] : [ 2, serializeObjectForWorker($winId$, value, added, true, true) ] : void 0 : value;
    const serializeObjectForWorker = (winId, obj, added, includeFunctions, includeEmptyStrings, serializedObj, propName, propValue) => {
        serializedObj = {};
        if (!added.has(obj)) {
            added.add(obj);
            for (propName in obj) {
                if (isValidMemberName(propName)) {
                    propValue = "path" === propName && getConstructorName(obj).endsWith("Event") ? obj.composedPath() : obj[propName];
                    (includeFunctions || "function" != typeof propValue) && (includeEmptyStrings || "" !== propValue) && (serializedObj[propName] = serializeForWorker(winId, propValue, added));
                }
            }
        }
        return serializedObj;
    };
    const serializeCssRuleForWorker = cssRule => {
        let obj = {};
        let key;
        for (key in cssRule) {
            validCssRuleProps.includes(key) && (obj[key] = String(cssRule[key]));
        }
        return obj;
    };
    let ErrorObject = null;
    const serializedValueIsError = value => {
        var _a;
        ErrorObject = (null === (_a = window.top) || void 0 === _a ? void 0 : _a.Error) || ErrorObject;
        return value instanceof ErrorObject;
    };
    const deserializeFromWorker = (worker, serializedTransfer, serializedType, serializedValue) => {
        if (serializedTransfer) {
            serializedType = serializedTransfer[0];
            serializedValue = serializedTransfer[1];
            return 0 === serializedType ? serializedValue : 4 === serializedType ? deserializeRefFromWorker(worker, serializedValue) : 1 === serializedType ? serializedValue.map((v => deserializeFromWorker(worker, v))) : 3 === serializedType ? getInstance(serializedValue[0], serializedValue[1]) : 5 === serializedType ? constructEvent(deserializeObjectFromWorker(worker, serializedValue)) : 2 === serializedType ? deserializeObjectFromWorker(worker, serializedValue) : 8 === serializedType ? serializedValue : 9 === serializedType ? new window[serializedTransfer[2]](serializedValue) : void 0;
        }
    };
    const deserializeRefFromWorker = (worker, {$winId$: $winId$, $instanceId$: $instanceId$, $refId$: $refId$}, ref) => {
        ref = mainRefs.get($refId$);
        if (!ref) {
            ref = function(...args) {
                worker.postMessage([ 9, {
                    $winId$: $winId$,
                    $instanceId$: $instanceId$,
                    $refId$: $refId$,
                    $thisArg$: serializeForWorker($winId$, this),
                    $args$: serializeForWorker($winId$, args)
                } ]);
            };
            mainRefs.set($refId$, ref);
        }
        return ref;
    };
    const constructEvent = eventProps => new ("detail" in eventProps ? CustomEvent : Event)(eventProps.type, eventProps);
    const deserializeObjectFromWorker = (worker, serializedValue, obj, key) => {
        obj = {};
        for (key in serializedValue) {
            obj[key] = deserializeFromWorker(worker, serializedValue[key]);
        }
        return obj;
    };
    const validCssRuleProps = "cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(",");
    const mainAccessHandler = async (worker, accessReq) => {
        let accessRsp = {
            $msgId$: accessReq.$msgId$
        };
        let totalTasks = len(accessReq.$tasks$);
        let i = 0;
        let task;
        let winId;
        let applyPath;
        let instance;
        let rtnValue;
        let isLast;
        for (;i < totalTasks; i++) {
            try {
                isLast = i === totalTasks - 1;
                task = accessReq.$tasks$[i];
                winId = task.$winId$;
                applyPath = task.$applyPath$;
                !winCtxs[winId] && winId.startsWith("f_") && await new Promise((resolve => {
                    let check = 0;
                    let callback = () => {
                        winCtxs[winId] || check++ > 1e3 ? resolve() : requestAnimationFrame(callback);
                    };
                    callback();
                }));
                if (1 === applyPath[0] && applyPath[1] in winCtxs[winId].$window$) {
                    setInstanceId(new winCtxs[winId].$window$[applyPath[1]](...deserializeFromWorker(worker, applyPath[2])), task.$instanceId$);
                } else {
                    instance = getInstance(winId, task.$instanceId$);
                    if (instance) {
                        rtnValue = applyToInstance(worker, winId, instance, applyPath, isLast, task.$groupedGetters$);
                        task.$assignInstanceId$ && ("string" == typeof task.$assignInstanceId$ ? setInstanceId(rtnValue, task.$assignInstanceId$) : winCtxs[task.$assignInstanceId$.$winId$] = {
                            $winId$: task.$assignInstanceId$.$winId$,
                            $window$: {
                                document: rtnValue
                            }
                        });
                        if (isPromise(rtnValue)) {
                            rtnValue = await rtnValue;
                            isLast && (accessRsp.$isPromise$ = true);
                        }
                        isLast && (accessRsp.$rtnValue$ = serializeForWorker(winId, rtnValue, void 0, void 0, void 0, task.$instanceId$));
                    } else {
                        accessRsp.$error$ = `Error finding instance "${task.$instanceId$}" on window ${normalizedWinId(winId)}`;
                        console.error(accessRsp.$error$, task);
                    }
                }
            } catch (e) {
                isLast ? accessRsp.$error$ = String(e.stack || e) : console.error(e);
            }
        }
        return accessRsp;
    };
    const applyToInstance = (worker, winId, instance, applyPath, isLast, groupedGetters) => {
        let i = 0;
        let l = len(applyPath);
        let next;
        let current;
        let previous;
        let args;
        let groupedRtnValues;
        for (;i < l; i++) {
            current = applyPath[i];
            next = applyPath[i + 1];
            previous = applyPath[i - 1];
            try {
                if (!Array.isArray(next)) {
                    if ("string" == typeof current || "number" == typeof current) {
                        if (i + 1 === l && groupedGetters) {
                            groupedRtnValues = {};
                            groupedGetters.map((propName => groupedRtnValues[propName] = instance[propName]));
                            return groupedRtnValues;
                        }
                        instance = instance[current];
                    } else {
                        if (0 === next) {
                            instance[previous] = deserializeFromWorker(worker, current);
                            return;
                        }
                        if ("function" == typeof instance[previous]) {
                            args = deserializeFromWorker(worker, current);
                            "define" === previous && "CustomElementRegistry" === getConstructorName(instance) && (args[1] = defineCustomElement(winId, worker, args[1]));
                            "insertRule" === previous && args[1] > len(instance.cssRules) && (args[1] = len(instance.cssRules));
                            instance = instance[previous].apply(instance, args);
                            if ("play" === previous) {
                                return Promise.resolve();
                            }
                        }
                    }
                }
            } catch (err) {
                if (isLast) {
                    throw err;
                }
                console.debug("Non-blocking setter error:", err);
            }
        }
        return instance;
    };
    const mainForwardTrigger = (worker, $winId$, win) => {
        let queuedForwardCalls = win._ptf;
        let forwards = (win.partytown || {}).forward || [];
        let i;
        let mainForwardFn;
        let forwardCall = ($forward$, args) => worker.postMessage([ 10, {
            $winId$: $winId$,
            $forward$: $forward$,
            $args$: serializeForWorker($winId$, Array.from(args))
        } ]);
        win._ptf = void 0;
        forwards.map((forwardProps => {
            const [property, {preserveBehavior: preserveBehavior}] = (propertyOrPropertyWithSettings => {
                if ("string" == typeof propertyOrPropertyWithSettings) {
                    return [ propertyOrPropertyWithSettings, defaultPartytownForwardPropertySettings ];
                }
                const [property, settings = defaultPartytownForwardPropertySettings] = propertyOrPropertyWithSettings;
                return [ property, {
                    ...defaultPartytownForwardPropertySettings,
                    ...settings
                } ];
            })(forwardProps);
            mainForwardFn = win;
            property.split(".").map(((_, i, arr) => {
                mainForwardFn = mainForwardFn[arr[i]] = i + 1 < len(arr) ? mainForwardFn[arr[i]] || (propertyName => arrayMethods.includes(propertyName) ? [] : {})(arr[i + 1]) : (() => {
                    let originalFunction = null;
                    if (preserveBehavior) {
                        const {methodOrProperty: methodOrProperty, thisObject: thisObject} = ((window, properties) => {
                            let thisObject = window;
                            for (let i = 0; i < properties.length - 1; i += 1) {
                                thisObject = thisObject[properties[i]];
                            }
                            return {
                                thisObject: thisObject,
                                methodOrProperty: properties.length > 0 ? thisObject[properties[properties.length - 1]] : void 0
                            };
                        })(win, arr);
                        "function" == typeof methodOrProperty && (originalFunction = (...args) => methodOrProperty.apply(thisObject, ...args));
                    }
                    return (...args) => {
                        let returnValue;
                        originalFunction && (returnValue = originalFunction(args));
                        forwardCall(arr, args);
                        return returnValue;
                    };
                })();
            }));
        }));
        if (queuedForwardCalls) {
            for (i = 0; i < len(queuedForwardCalls); i += 2) {
                forwardCall(queuedForwardCalls[i], queuedForwardCalls[i + 1]);
            }
        }
    };
    const readNextScript = (worker, winCtx) => {
        let $winId$ = winCtx.$winId$;
        let win = winCtx.$window$;
        let doc = win.document;
        let scriptSelector = 'script[type="text/partytown"]:not([data-ptid]):not([data-pterror])';
        let blockingScriptSelector = scriptSelector + ":not([async]):not([defer])";
        let scriptElm;
        let $instanceId$;
        let scriptData;
        if (doc && doc.body) {
            scriptElm = doc.querySelector(blockingScriptSelector);
            scriptElm || (scriptElm = doc.querySelector(scriptSelector));
            if (scriptElm) {
                scriptElm.dataset.ptid = $instanceId$ = getAndSetInstanceId(scriptElm, $winId$);
                scriptData = {
                    $winId$: $winId$,
                    $instanceId$: $instanceId$
                };
                if (scriptElm.src) {
                    scriptData.$url$ = scriptElm.src;
                    scriptData.$orgUrl$ = scriptElm.dataset.ptsrc || scriptElm.src;
                } else {
                    scriptData.$content$ = scriptElm.innerHTML;
                }
                worker.postMessage([ 7, scriptData ]);
            } else {
                if (!winCtx.$isInitialized$) {
                    winCtx.$isInitialized$ = 1;
                    mainForwardTrigger(worker, $winId$, win);
                    doc.dispatchEvent(new CustomEvent("pt0"));
                    {
                        const winType = win === win.top ? "top" : "iframe";
                        logMain(`Executed ${winType} window ${normalizedWinId($winId$)} environment scripts in ${(performance.now() - winCtx.$startTime$).toFixed(1)}ms`);
                    }
                }
                worker.postMessage([ 8, $winId$ ]);
            }
        } else {
            requestAnimationFrame((() => readNextScript(worker, winCtx)));
        }
    };
    const registerWindow = (worker, $winId$, $window$) => {
        if (!windowIds.has($window$)) {
            windowIds.set($window$, $winId$);
            const doc = $window$.document;
            const history = $window$.history;
            const $parentWinId$ = windowIds.get($window$.parent);
            let initialised = false;
            const onInitialisedQueue = [];
            const onInitialised = callback => {
                initialised ? callback() : onInitialisedQueue.push(callback);
            };
            const sendInitEnvData = () => {
                worker.postMessage([ 5, {
                    $winId$: $winId$,
                    $parentWinId$: $parentWinId$,
                    $url$: doc.baseURI,
                    $visibilityState$: doc.visibilityState
                } ]);
                setTimeout((() => {
                    initialised = true;
                    onInitialisedQueue.forEach((callback => {
                        callback();
                    }));
                }));
            };
            const pushState = history.pushState.bind(history);
            const replaceState = history.replaceState.bind(history);
            const onLocationChange = (type, state, newUrl, oldUrl) => () => {
                worker.postMessage([ 13, {
                    $winId$: $winId$,
                    type: type,
                    state: state,
                    url: doc.baseURI,
                    newUrl: newUrl,
                    oldUrl: oldUrl
                } ]);
            };
            history.pushState = (state, _, newUrl) => {
                pushState(state, _, newUrl);
                onInitialised(onLocationChange(0, state, null == newUrl ? void 0 : newUrl.toString()));
            };
            history.replaceState = (state, _, newUrl) => {
                replaceState(state, _, newUrl);
                onInitialised(onLocationChange(1, state, null == newUrl ? void 0 : newUrl.toString()));
            };
            $window$.addEventListener("popstate", (event => {
                onInitialised(onLocationChange(2, event.state));
            }));
            $window$.addEventListener("hashchange", (event => {
                onInitialised(onLocationChange(3, {}, event.newURL, event.oldURL));
            }));
            $window$.addEventListener("ptupdate", (() => {
                readNextScript(worker, winCtxs[$winId$]);
            }));
            doc.addEventListener("visibilitychange", (() => worker.postMessage([ 14, $winId$, doc.visibilityState ])));
            winCtxs[$winId$] = {
                $winId$: $winId$,
                $window$: $window$
            };
            winCtxs[$winId$].$startTime$ = performance.now();
            {
                const winType = $winId$ === $parentWinId$ ? "top" : "iframe";
                logMain(`Registered ${winType} window ${normalizedWinId($winId$)}`);
            }
            "complete" === doc.readyState ? sendInitEnvData() : $window$.addEventListener("load", sendInitEnvData);
        }
    };
    const onMessageFromWebWorker = (worker, msg, winCtx) => {
        if (4 === msg[0]) {
            registerWindow(worker, randomId(), mainWindow);
        } else {
            winCtx = winCtxs[msg[1]];
            winCtx && (7 === msg[0] ? requestAnimationFrame((() => readNextScript(worker, winCtx))) : 6 === msg[0] && ((worker, winCtx, instanceId, errorMsg, scriptElm) => {
                scriptElm = winCtx.$window$.document.querySelector(`[data-ptid="${instanceId}"]`);
                if (scriptElm) {
                    errorMsg ? scriptElm.dataset.pterror = errorMsg : scriptElm.type += "-x";
                    delete scriptElm.dataset.ptid;
                }
                readNextScript(worker, winCtx);
            })(worker, winCtx, msg[2], msg[3]));
        }
    };
    const readMainPlatform = () => {
        const elm = docImpl.createElement("i");
        const textNode = docImpl.createTextNode("");
        const comment = docImpl.createComment("");
        const frag = docImpl.createDocumentFragment();
        const shadowRoot = docImpl.createElement("p").attachShadow({
            mode: "open"
        });
        const intersectionObserver = getGlobalConstructor(mainWindow, "IntersectionObserver");
        const mutationObserver = getGlobalConstructor(mainWindow, "MutationObserver");
        const resizeObserver = getGlobalConstructor(mainWindow, "ResizeObserver");
        const perf = mainWindow.performance;
        const screen = mainWindow.screen;
        const impls = [ [ mainWindow.history ], [ perf ], [ perf.navigation ], [ perf.timing ], [ screen ], [ screen.orientation ], [ mainWindow.visualViewport ], [ intersectionObserver, 12 ], [ mutationObserver, 12 ], [ resizeObserver, 12 ], [ textNode ], [ comment ], [ frag ], [ shadowRoot ], [ elm ], [ elm.attributes ], [ elm.classList ], [ elm.dataset ], [ elm.style ], [ docImpl ], [ docImpl.doctype ] ];
        const initialInterfaces = [ readImplementation("Window", mainWindow), readImplementation("Node", textNode) ];
        const $config$ = function(config) {
            return JSON.stringify(config, ((key, value) => {
                if ("function" == typeof value) {
                    value = String(value);
                    value.startsWith(key + "(") && (value = "function " + value);
                }
                "loadScriptsOnMainThread" === key && (value = value.map((scriptUrl => Array.isArray(scriptUrl) ? scriptUrl : [ "string" == typeof scriptUrl ? "string" : "regexp", "string" == typeof scriptUrl ? scriptUrl : scriptUrl.source ])));
                return value;
            }));
        }(config);
        const initWebWorkerData = {
            $config$: $config$,
            $interfaces$: readImplementations(impls, initialInterfaces),
            $libPath$: new URL(libPath, mainWindow.location) + "",
            $origin$: origin,
            $tabId$: mainWindow._pttab
        };
        addGlobalConstructorUsingPrototype(initWebWorkerData.$interfaces$, mainWindow, "IntersectionObserverEntry");
        return initWebWorkerData;
    };
    const readMainInterfaces = () => {
        const elms = Object.getOwnPropertyNames(mainWindow).map((interfaceName => ((doc, interfaceName, r, tag) => {
            r = interfaceName.match(/^(HTML|SVG)(.+)Element$/);
            if (r) {
                tag = r[2];
                return "S" == interfaceName[0] ? doc.createElementNS("http://www.w3.org/2000/svg", svgConstructorTags[tag] || tag.slice(0, 2).toLowerCase() + tag.slice(2)) : doc.createElement(htmlConstructorTags[tag] || tag);
            }
        })(docImpl, interfaceName))).filter((elm => elm)).map((elm => [ elm ]));
        return readImplementations(elms, []);
    };
    const readImplementations = (impls, interfaces) => {
        const cstrs = new Set([ "Object" ]);
        const cstrImpls = impls.filter((implData => implData[0])).map((implData => {
            const impl = implData[0];
            const interfaceType = implData[1];
            const cstrName = getConstructorName(impl);
            const CstrPrototype = mainWindow[cstrName].prototype;
            return [ cstrName, CstrPrototype, impl, interfaceType ];
        }));
        cstrImpls.map((([cstrName, CstrPrototype, impl, intefaceType]) => readOwnImplementation(cstrs, interfaces, cstrName, CstrPrototype, impl, intefaceType)));
        return interfaces;
    };
    const readImplementation = (cstrName, impl, memberName) => {
        let interfaceMembers = [];
        let interfaceInfo = [ cstrName, "Object", interfaceMembers ];
        for (memberName in impl) {
            readImplementationMember(interfaceMembers, impl, memberName);
        }
        return interfaceInfo;
    };
    const readOwnImplementation = (cstrs, interfaces, cstrName, CstrPrototype, impl, interfaceType) => {
        if (!cstrs.has(cstrName)) {
            cstrs.add(cstrName);
            const SuperCstr = Object.getPrototypeOf(CstrPrototype);
            const superCstrName = getConstructorName(SuperCstr);
            const interfaceMembers = [];
            const propDescriptors = Object.getOwnPropertyDescriptors(CstrPrototype);
            readOwnImplementation(cstrs, interfaces, superCstrName, SuperCstr, impl, interfaceType);
            for (const memberName in propDescriptors) {
                readImplementationMember(interfaceMembers, impl, memberName);
            }
            interfaces.push([ cstrName, superCstrName, interfaceMembers, interfaceType, getNodeName(impl) ]);
        }
    };
    const readImplementationMember = (interfaceMembers, implementation, memberName, value, memberType, cstrName) => {
        try {
            if (isValidMemberName(memberName) && isNaN(memberName[0]) && "all" !== memberName) {
                value = implementation[memberName];
                memberType = typeof value;
                if ("function" === memberType) {
                    (String(value).includes("[native") || Object.getPrototypeOf(implementation)[memberName]) && interfaceMembers.push([ memberName, 5 ]);
                } else if ("object" === memberType && null != value) {
                    cstrName = getConstructorName(value);
                    "Object" !== cstrName && "Function" !== cstrName && self[cstrName] && interfaceMembers.push([ memberName, value.nodeType || cstrName ]);
                } else {
                    "symbol" !== memberType && (memberName.toUpperCase() === memberName ? interfaceMembers.push([ memberName, 6, value ]) : interfaceMembers.push([ memberName, 6 ]));
                }
            }
        } catch (e) {
            console.warn(e);
        }
    };
    const getGlobalConstructor = (mainWindow, cstrName) => void 0 !== mainWindow[cstrName] ? new mainWindow[cstrName](noop) : 0;
    const addGlobalConstructorUsingPrototype = ($interfaces$, mainWindow, cstrName) => {
        void 0 !== mainWindow[cstrName] && $interfaces$.push([ cstrName, "Object", Object.keys(mainWindow[cstrName].prototype).map((propName => [ propName, 6 ])), 12 ]);
    };
    let worker;
    (receiveMessage => {
        const swContainer = window.navigator.serviceWorker;
        return swContainer.getRegistration().then((swRegistration => {
            swContainer.addEventListener("message", (ev => receiveMessage(ev.data, (accessRsp => swRegistration.active && swRegistration.active.postMessage(accessRsp)))));
            return (worker, msg) => {
                0 === msg[0] ? worker.postMessage([ 1, readMainPlatform() ]) : 2 === msg[0] ? worker.postMessage([ 3, readMainInterfaces() ]) : onMessageFromWebWorker(worker, msg);
            };
        }));
    })(((accessReq, responseCallback) => mainAccessHandler(worker, accessReq).then(responseCallback))).then((onMessageHandler => {
        if (onMessageHandler) {
            worker = new Worker(libPath + "partytown-ww-sw.js?v=0.10.3-dev1734732935152", {
                name: "Partytown üéâ"
            });
            worker.onmessage = ev => {
                const msg = ev.data;
                12 === msg[0] ? mainAccessHandler(worker, msg[1]) : onMessageHandler(worker, msg);
            };
            console.warn("@builder.io/partytown package has changed organization and now is\n@qwik.dev/partytown https://www.npmjs.com/package/@qwik.dev/partytown\nWe recommend using the new package to stay up to date on feature releases and bug fixes.");
            logMain("Created Partytown web worker (0.10.3-dev1734732935152)");
            worker.onerror = ev => console.error("Web Worker Error", ev);
            mainWindow.addEventListener("pt1", (ev => registerWindow(worker, getAndSetInstanceId(ev.detail.frameElement), ev.detail)));
        }
    }));
})(window);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-sw.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
Object.freeze((obj => {
    const properties = new Set;
    let currentObj = obj;
    do {
        Object.getOwnPropertyNames(currentObj).forEach((item => {
            "function" == typeof currentObj[item] && properties.add(item);
        }));
    } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
    return Array.from(properties);
})([]));

const resolves = new Map;

const swMessageError = (accessReq, $error$) => ({
    $msgId$: accessReq.$msgId$,
    $error$: $error$
});

const httpRequestFromWebWorker = req => new Promise((async resolve => {
    const accessReq = await req.clone().json();
    const responseData = await (accessReq => new Promise((async resolve => {
        const clients = await self.clients.matchAll();
        const client = ((clients, msgId) => {
            const tabId = msgId.split(".").pop();
            let client = clients.find((a => a.url.endsWith(`?${tabId}`)));
            client || (client = [ ...clients ].sort(((a, b) => a.url > b.url ? -1 : a.url < b.url ? 1 : 0))[0]);
            return client;
        })([ ...clients ], accessReq.$msgId$);
        if (client) {
            const timeout = 12e4;
            const msgResolve = [ resolve, setTimeout((() => {
                resolves.delete(accessReq.$msgId$);
                resolve(swMessageError(accessReq, "Timeout"));
            }), timeout) ];
            resolves.set(accessReq.$msgId$, msgResolve);
            client.postMessage(accessReq);
        } else {
            resolve(swMessageError(accessReq, "NoParty"));
        }
    })))(accessReq);
    resolve(response(JSON.stringify(responseData), "application/json"));
}));

const response = (body, contentType) => new Response(body, {
    headers: {
        "content-type": contentType || "text/html",
        "Cache-Control": "no-store"
    }
});

self.oninstall = () => self.skipWaiting();

self.onactivate = () => self.clients.claim();

self.onmessage = ev => {
    const accessRsp = ev.data;
    const r = resolves.get(accessRsp.$msgId$);
    if (r) {
        resolves.delete(accessRsp.$msgId$);
        clearTimeout(r[1]);
        r[0](accessRsp);
    }
};

self.onfetch = ev => {
    const req = ev.request;
    const url = new URL(req.url);
    const pathname = url.pathname;
    if (pathname.endsWith("sw.html")) {
        ev.respondWith(response('<!DOCTYPE html><html><head><meta charset="utf-8"><script src="./partytown-sandbox-sw.js?v=0.10.3-dev1734732935152"><\/script></head></html>'));
    } else {
        pathname.endsWith("proxytown") && ev.respondWith(httpRequestFromWebWorker(req));
    }
};
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-ww-atomics.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(self => {
    const WinIdKey = Symbol();
    const InstanceIdKey = Symbol();
    const InstanceDataKey = Symbol();
    const NamespaceKey = Symbol();
    const ApplyPathKey = Symbol();
    const InstanceStateKey = Symbol();
    const HookContinue = Symbol();
    const HookPrevent = Symbol();
    const webWorkerInstances = new Map;
    const webWorkerRefsByRefId = {};
    const webWorkerRefIdsByRef = new WeakMap;
    const postMessages = [];
    const webWorkerCtx = {};
    const environments = {};
    const cachedDimensions = new Map;
    const cachedStructure = new Map;
    const commaSplit = str => str.split(",");
    const partytownLibUrl = url => {
        url = webWorkerCtx.$libPath$ + url;
        if (new URL(url).origin != location.origin) {
            throw "Invalid " + url;
        }
        return url;
    };
    const getterDimensionPropNames = commaSplit("clientWidth,clientHeight,clientTop,clientLeft,innerWidth,innerHeight,offsetWidth,offsetHeight,offsetTop,offsetLeft,outerWidth,outerHeight,pageXOffset,pageYOffset,scrollWidth,scrollHeight,scrollTop,scrollLeft");
    const elementStructurePropNames = commaSplit("childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling");
    const structureChangingMethodNames = commaSplit("insertBefore,remove,removeChild,replaceChild");
    const dimensionChangingSetterNames = commaSplit("className,width,height,hidden,innerHTML,innerText,textContent,text");
    const dimensionChangingMethodNames = commaSplit("setAttribute,setAttributeNS,setProperty");
    const eventTargetMethods = commaSplit("addEventListener,dispatchEvent,removeEventListener");
    const nonBlockingMethods = eventTargetMethods.concat(dimensionChangingMethodNames, commaSplit("add,observe,remove,unobserve"));
    const IS_TAG_REG = /^[A-Z_]([A-Z0-9-]*[A-Z0-9])?$/;
    const noop = () => {};
    const len = obj => obj.length;
    const getConstructorName = obj => {
        var _a, _b, _c;
        try {
            const constructorName = null === (_a = null == obj ? void 0 : obj.constructor) || void 0 === _a ? void 0 : _a.name;
            if (constructorName) {
                return constructorName;
            }
        } catch (e) {}
        try {
            const zoneJsConstructorName = null === (_c = null === (_b = null == obj ? void 0 : obj.__zone_symbol__originalInstance) || void 0 === _b ? void 0 : _b.constructor) || void 0 === _c ? void 0 : _c.name;
            if (zoneJsConstructorName) {
                return zoneJsConstructorName;
            }
        } catch (e) {}
        return "";
    };
    const EMPTY_ARRAY = [];
    const randomId = () => Math.round(Math.random() * Number.MAX_SAFE_INTEGER).toString(36);
    const SCRIPT_TYPE = "text/partytown";
    const defineProperty = (obj, memberName, descriptor) => Object.defineProperty(obj, memberName, {
        ...descriptor,
        configurable: true
    });
    const defineConstructorName = (Cstr, value) => defineProperty(Cstr, "name", {
        value: value
    });
    const definePrototypeProperty = (Cstr, memberName, descriptor) => defineProperty(Cstr.prototype, memberName, descriptor);
    const definePrototypePropertyDescriptor = (Cstr, propertyDescriptorMap) => Object.defineProperties(Cstr.prototype, propertyDescriptorMap);
    const definePrototypeValue = (Cstr, memberName, value) => definePrototypeProperty(Cstr, memberName, {
        value: value,
        writable: true
    });
    Object.freeze((obj => {
        const properties = new Set;
        let currentObj = obj;
        do {
            Object.getOwnPropertyNames(currentObj).forEach((item => {
                "function" == typeof currentObj[item] && properties.add(item);
            }));
        } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
        return Array.from(properties);
    })([]));
    function testIfMustLoadScriptOnMainThread(config, value) {
        var _a, _b;
        return null !== (_b = null === (_a = config.loadScriptsOnMainThread) || void 0 === _a ? void 0 : _a.map((([type, value]) => new RegExp("string" === type ? function(input) {
            return input.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        }(value) : value))).some((regexp => regexp.test(value)))) && void 0 !== _b && _b;
    }
    const hasInstanceStateValue = (instance, stateKey) => stateKey in instance[InstanceStateKey];
    const getInstanceStateValue = (instance, stateKey) => instance[InstanceStateKey][stateKey];
    const setInstanceStateValue = (instance, stateKey, stateValue) => instance[InstanceStateKey][stateKey] = stateValue;
    const setWorkerRef = (ref, refId) => {
        if (!(refId = webWorkerRefIdsByRef.get(ref))) {
            webWorkerRefIdsByRef.set(ref, refId = randomId());
            webWorkerRefsByRefId[refId] = ref;
        }
        return refId;
    };
    const getOrCreateNodeInstance = (winId, instanceId, nodeName, namespace, instance, prevInstanceId) => {
        instance = webWorkerInstances.get(instanceId);
        if (!instance && nodeName && environments[winId]) {
            const prevInstance = webWorkerInstances.get(prevInstanceId || "");
            instance = environments[winId].$createNode$(nodeName, instanceId, namespace, prevInstance);
            webWorkerInstances.set(instanceId, instance);
        }
        return instance;
    };
    const definePrototypeNodeType = (Cstr, nodeType) => definePrototypeValue(Cstr, "nodeType", nodeType);
    const cachedTreeProps = (Cstr, treeProps) => treeProps.map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            let cacheKey = getInstanceCacheKey(this, propName);
            let result = cachedStructure.get(cacheKey);
            if (!result) {
                result = getter(this, [ propName ]);
                cachedStructure.set(cacheKey, result);
            }
            return result;
        }
    })));
    const getInstanceCacheKey = (instance, memberName, args) => [ instance[WinIdKey], instance[InstanceIdKey], memberName, ...(args || EMPTY_ARRAY).map((arg => String(arg && arg[WinIdKey] ? arg[InstanceIdKey] : arg))) ].join(".");
    const cachedProps = (Cstr, propNames) => commaSplit(propNames).map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            hasInstanceStateValue(this, propName) || setInstanceStateValue(this, propName, getter(this, [ propName ]));
            return getInstanceStateValue(this, propName);
        },
        set(val) {
            getInstanceStateValue(this, propName) !== val && setter(this, [ propName ], val);
            setInstanceStateValue(this, propName, val);
        }
    })));
    const cachedDimensionProps = Cstr => getterDimensionPropNames.map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            const dimension = cachedDimensions.get(getInstanceCacheKey(this, propName));
            if ("number" == typeof dimension) {
                return dimension;
            }
            const groupedDimensions = getter(this, [ propName ], getterDimensionPropNames);
            if (groupedDimensions && "object" == typeof groupedDimensions) {
                Object.entries(groupedDimensions).map((([dimensionPropName, value]) => cachedDimensions.set(getInstanceCacheKey(this, dimensionPropName), value)));
                return groupedDimensions[propName];
            }
            return groupedDimensions;
        }
    })));
    const cachedDimensionMethods = (Cstr, dimensionMethodNames) => dimensionMethodNames.map((methodName => {
        Cstr.prototype[methodName] = function(...args) {
            let cacheKey = getInstanceCacheKey(this, methodName, args);
            let dimensions = cachedDimensions.get(cacheKey);
            if (!dimensions) {
                dimensions = callMethod(this, [ methodName ], args);
                cachedDimensions.set(cacheKey, dimensions);
            }
            return dimensions;
        };
    }));
    const serializeForMain = ($winId$, $instanceId$, value, added, type) => void 0 !== value && (type = typeof value) ? "string" === type || "boolean" === type || "number" === type || null == value ? [ 0, value ] : "function" === type ? [ 4, {
        $winId$: $winId$,
        $instanceId$: $instanceId$,
        $refId$: setWorkerRef(value)
    } ] : (added = added || new Set) && Array.isArray(value) ? added.has(value) ? [ 1, [] ] : added.add(value) && [ 1, value.map((v => serializeForMain($winId$, $instanceId$, v, added))) ] : "object" === type ? value[InstanceIdKey] ? [ 3, [ value[WinIdKey], value[InstanceIdKey] ] ] : value instanceof Event ? [ 5, serializeObjectForMain($winId$, $instanceId$, value, false, added) ] : supportsTrustedHTML && value instanceof TrustedHTML ? [ 0, value.toString() ] : value instanceof ArrayBuffer ? [ 8, value ] : ArrayBuffer.isView(value) ? [ 9, value.buffer, getConstructorName(value) ] : [ 2, serializeObjectForMain($winId$, $instanceId$, value, true, added) ] : void 0 : value;
    const supportsTrustedHTML = "undefined" != typeof TrustedHTML;
    const serializeObjectForMain = (winId, instanceId, obj, includeFunctions, added, serializedObj, propName, propValue) => {
        serializedObj = {};
        if (!added.has(obj)) {
            added.add(obj);
            for (propName in obj) {
                propValue = obj[propName];
                (includeFunctions || "function" != typeof propValue) && (serializedObj[propName] = serializeForMain(winId, instanceId, propValue, added));
            }
        }
        return serializedObj;
    };
    const serializeInstanceForMain = (instance, value) => instance ? serializeForMain(instance[WinIdKey], instance[InstanceIdKey], value) : [ 0, value ];
    const deserializeFromMain = (winId, instanceId, applyPath, serializedValueTransfer, serializedType, serializedValue, obj, key) => {
        if (serializedValueTransfer) {
            serializedType = serializedValueTransfer[0];
            serializedValue = serializedValueTransfer[1];
            if (0 === serializedType || 11 === serializedType || 12 === serializedType) {
                return serializedValue;
            }
            if (4 === serializedType) {
                return deserializeRefFromMain(applyPath, serializedValue);
            }
            if (6 === serializedType) {
                return winId && applyPath.length > 0 ? (...args) => callMethod(environments[winId].$window$, applyPath, args, 1) : noop;
            }
            if (3 === serializedType) {
                return getOrCreateSerializedInstance(serializedValue);
            }
            if (7 === serializedType) {
                return new NodeList(serializedValue.map(getOrCreateSerializedInstance));
            }
            if (10 === serializedType) {
                return new Attr(serializedValue);
            }
            if (1 === serializedType) {
                return serializedValue.map((v => deserializeFromMain(winId, instanceId, applyPath, v)));
            }
            if (14 === serializedType) {
                return new CustomError(serializedValue);
            }
            obj = {};
            for (key in serializedValue) {
                obj[key] = deserializeFromMain(winId, instanceId, [ ...applyPath, key ], serializedValue[key]);
            }
            if (13 === serializedType) {
                return new environments[winId].$window$.CSSStyleDeclaration(winId, instanceId, applyPath, obj);
            }
            if (5 === serializedType) {
                if ("message" === obj.type && obj.origin) {
                    let postMessageKey = JSON.stringify(obj.data);
                    let postMessageData = postMessages.find((pm => pm.$data$ === postMessageKey));
                    let env;
                    if (postMessageData) {
                        env = environments[postMessageData.$winId$];
                        if (env) {
                            obj.source = env.$window$;
                            obj.origin = env.$location$.origin;
                        }
                    }
                }
                return new Proxy(new Event(obj.type, obj), {
                    get: (target, propName) => propName in obj ? obj[propName] : "function" == typeof target[String(propName)] ? noop : target[String(propName)]
                });
            }
            if (2 === serializedType) {
                return obj;
            }
        }
    };
    const getOrCreateSerializedInstance = ([winId, instanceId, nodeName, prevInstanceId]) => instanceId === winId && environments[winId] ? environments[winId].$window$ : getOrCreateNodeInstance(winId, instanceId, nodeName, void 0, void 0, prevInstanceId);
    const deserializeRefFromMain = (applyPath, {$winId$: $winId$, $instanceId$: $instanceId$, $nodeName$: $nodeName$, $refId$: $refId$}) => {
        webWorkerRefsByRefId[$refId$] || webWorkerRefIdsByRef.set(webWorkerRefsByRefId[$refId$] = function(...args) {
            const instance = getOrCreateNodeInstance($winId$, $instanceId$, $nodeName$);
            return callMethod(instance, applyPath, args);
        }, $refId$);
        return webWorkerRefsByRefId[$refId$];
    };
    class CustomError extends Error {
        constructor(errorObject) {
            super(errorObject.message);
            this.name = errorObject.name;
            this.message = errorObject.message;
            this.stack = errorObject.stack;
        }
    }
    class NodeList {
        constructor(nodes) {
            (this._ = nodes).map(((node, index) => this[index] = node));
        }
        entries() {
            return this._.entries();
        }
        forEach(cb, thisArg) {
            this._.map(cb, thisArg);
        }
        item(index) {
            return this[index];
        }
        keys() {
            return this._.keys();
        }
        get length() {
            return len(this._);
        }
        values() {
            return this._.values();
        }
        [Symbol.iterator]() {
            return this._[Symbol.iterator]();
        }
    }
    const Attr = class {
        constructor(serializedAttr) {
            this.name = serializedAttr[0];
            this.value = serializedAttr[1];
        }
        get nodeName() {
            return this.name;
        }
        get nodeType() {
            return 2;
        }
    };
    const warnCrossOrigin = (apiType, apiName, env) => console.warn(`Partytown unable to ${apiType} cross-origin ${apiName}: ` + env.$location$);
    const logWorker = (msg, winId) => {
        try {
            const config = webWorkerCtx.$config$;
            if (config.logStackTraces) {
                const frames = (new Error).stack.split("\n");
                const i = frames.findIndex((f => f.includes("logWorker")));
                msg += "\n" + frames.slice(i + 1).join("\n");
            }
            let prefix;
            let color;
            if (winId) {
                prefix = `Worker (${normalizedWinId(winId)}) üéâ`;
                color = winColor(winId);
            } else {
                prefix = self.name;
                color = "#9844bf";
            }
            if (webWorkerCtx.lastLog !== msg) {
                webWorkerCtx.lastLog = msg;
                console.debug.apply(console, [ `%c${prefix}`, `background: ${color}; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;`, msg ]);
            }
        } catch (e) {}
    };
    const winIds = [];
    const normalizedWinId = winId => {
        winIds.includes(winId) || winIds.push(winId);
        return winIds.indexOf(winId) + 1;
    };
    const winColor = winId => {
        const colors = [ "#00309e", "#ea3655", "#eea727" ];
        const index = normalizedWinId(winId) - 1;
        return colors[index] || colors[colors.length - 1];
    };
    const getTargetProp = (target, applyPath) => {
        let n = "";
        if (target) {
            const cstrName = getConstructorName(target);
            if ("Window" === cstrName) {
                n = "";
            } else if ("string" == typeof target[InstanceDataKey]) {
                let nodeName = target[InstanceDataKey];
                n = "#text" === nodeName ? "textNode." : "#comment" === nodeName ? "commentNode." : "#document" === nodeName ? "document." : "html" === nodeName ? "doctype." : nodeName.toLowerCase() + ".";
            } else {
                n = "nodeType" in target && 2 === target.nodeType ? "attributes." : "CanvasRenderingContext2D" === cstrName ? "context2D." : "CanvasRenderingContextWebGL" === cstrName ? "contextWebGL." : "CSSStyleDeclaration" === cstrName ? "style." : "MutationObserver" === cstrName ? "mutationObserver." : "NamedNodeMap" === cstrName ? "namedNodeMap." : "ResizeObserver" === cstrName ? "resizeObserver." : cstrName.substring(0, 1).toLowerCase() + cstrName.substring(1) + ".";
            }
            target[ApplyPathKey] && target[ApplyPathKey].length && (n += [ ...target[ApplyPathKey] ].join(".") + ".");
        }
        if (applyPath.length > 1) {
            const first = applyPath.slice(0, applyPath.length - 1);
            const last = applyPath[applyPath.length - 1];
            if (!isNaN(last)) {
                return n + `${first.join(".")}[${last}]`;
            }
        }
        return n + applyPath.join(".");
    };
    const getLogValue = (applyPath, v) => {
        const type = typeof v;
        if (void 0 === v) {
            return "undefined";
        }
        if ("boolean" === type || "number" === type || null == v) {
            return JSON.stringify(v);
        }
        if ("string" === type) {
            return applyPath.includes("cookie") ? JSON.stringify(v.slice(0, 10) + "...") : JSON.stringify(v.length > 50 ? v.slice(0, 40) + "..." : v);
        }
        if (Array.isArray(v)) {
            return `[${v.map(getLogValue).join(", ")}]`;
        }
        if ("object" === type) {
            const instanceId = v[InstanceIdKey];
            const cstrName = getConstructorName(v);
            if ("string" == typeof instanceId) {
                if ("Window" === cstrName) {
                    return "window";
                }
                if ("string" == typeof v[InstanceDataKey]) {
                    if (1 === v.nodeType) {
                        return `<${v[InstanceDataKey].toLowerCase()}>`;
                    }
                    if (10 === v.nodeType) {
                        return `<!DOCTYPE ${v[InstanceDataKey]}>`;
                    }
                    if (v.nodeType <= 11) {
                        return v[InstanceDataKey];
                    }
                }
                return "¬Ø\\_(„ÉÑ)_/¬Ø instance obj";
            }
            return v[Symbol.iterator] ? `[${Array.from(v).map((i => getLogValue(applyPath, i))).join(", ")}]` : "value" in v ? "string" == typeof v.value ? `"${v.value}"` : objToString(v.value) : objToString(v);
        }
        return (v => "object" == typeof v && v && v.then)(v) ? "Promise" : "function" === type ? `∆í() ${v.name || ""}`.trim() : `¬Ø\\_(„ÉÑ)_/¬Ø ${String(v)}`.trim();
    };
    const objToString = obj => {
        const s = [];
        for (let key in obj) {
            const value = obj[key];
            const type = typeof value;
            "string" === type ? s.push(`${key}: "${value}"`) : "function" === type ? s.push(`${key}: ∆í`) : Array.isArray(type) ? s.push(`${key}: [..]`) : "object" === type && value ? s.push(`${key}: {..}`) : s.push(`${key}: ${String(value)}`);
        }
        let str = s.join(", ");
        str.length > 200 && (str = str.substring(0, 200) + "..");
        return `{ ${str} }`;
    };
    const logDimensionCacheClearStyle = (target, propName) => {
        (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logSetters) && logWorker(`Dimension cache cleared from style.${propName} setter`, target[WinIdKey]);
    };
    const logDimensionCacheClearMethod = (target, methodName) => {
        (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logCalls) && logWorker(`Dimension cache cleared from method call ${methodName}()`, target[WinIdKey]);
    };
    const taskQueue = [];
    const queue = (instance, $applyPath$, callType, $assignInstanceId$, $groupedGetters$, buffer) => {
        if (instance[ApplyPathKey]) {
            taskQueue.push({
                $winId$: instance[WinIdKey],
                $instanceId$: instance[InstanceIdKey],
                $applyPath$: [ ...instance[ApplyPathKey], ...$applyPath$ ],
                $assignInstanceId$: $assignInstanceId$,
                $groupedGetters$: $groupedGetters$
            });
            taskQueue[len(taskQueue) - 1].$debug$ = ((target, applyPath, callType) => {
                let m = getTargetProp(target, applyPath);
                1 === callType ? m += " (blocking)" : 2 === callType ? m += " (non-blocking)" : 3 === callType && (m += " (non-blocking, no-side-effect)");
                return m.trim();
            })(instance, $applyPath$, callType);
            buffer && 3 !== callType && console.error("buffer must be sent NonBlockingNoSideEffect");
            if (3 === callType) {
                webWorkerCtx.$postMessage$([ 12, {
                    $msgId$: randomId(),
                    $tasks$: [ ...taskQueue ]
                } ], buffer ? [ buffer instanceof ArrayBuffer ? buffer : buffer.buffer ] : void 0);
                taskQueue.length = 0;
            } else if (1 === callType) {
                return sendToMain(true);
            }
            webWorkerCtx.$asyncMsgTimer$ = setTimeout(sendToMain, 20);
        }
    };
    const sendToMain = isBlocking => {
        clearTimeout(webWorkerCtx.$asyncMsgTimer$);
        if (len(taskQueue)) {
            webWorkerCtx.$config$.logMainAccess && logWorker(`Main access, tasks sent: ${taskQueue.length}`);
            const endTask = taskQueue[len(taskQueue) - 1];
            const accessReq = {
                $msgId$: `${randomId()}.${webWorkerCtx.$tabId$}`,
                $tasks$: [ ...taskQueue ]
            };
            taskQueue.length = 0;
            if (isBlocking) {
                const accessRsp = ((webWorkerCtx, accessReq) => {
                    const sharedDataBuffer = webWorkerCtx.$sharedDataBuffer$;
                    const sharedData = new Int32Array(sharedDataBuffer);
                    Atomics.store(sharedData, 0, 0);
                    webWorkerCtx.$postMessage$([ 11, accessReq ]);
                    Atomics.wait(sharedData, 0, 0);
                    let dataLength = Atomics.load(sharedData, 0);
                    let accessRespStr = "";
                    let i = 0;
                    for (;i < dataLength; i++) {
                        accessRespStr += String.fromCharCode(sharedData[i + 1]);
                    }
                    return JSON.parse(accessRespStr);
                })(webWorkerCtx, accessReq);
                const isPromise = accessRsp.$isPromise$;
                const rtnValue = deserializeFromMain(endTask.$winId$, endTask.$instanceId$, endTask.$applyPath$, accessRsp.$rtnValue$);
                if (accessRsp.$error$) {
                    if (isPromise) {
                        return Promise.reject(accessRsp.$error$);
                    }
                    throw new Error(accessRsp.$error$);
                }
                return isPromise ? Promise.resolve(rtnValue) : rtnValue;
            }
            webWorkerCtx.$postMessage$([ 12, accessReq ]);
        }
    };
    const getter = (instance, applyPath, groupedGetters, rtnValue) => {
        if (webWorkerCtx.$config$.get) {
            rtnValue = webWorkerCtx.$config$.get(createHookOptions(instance, applyPath));
            if (rtnValue !== HookContinue) {
                return rtnValue;
            }
        }
        rtnValue = queue(instance, applyPath, 1, void 0, groupedGetters);
        ((target, applyPath, rtnValue, restrictedToWorker = false, groupedGetters = false) => {
            if (webWorkerCtx.$config$.logGetters) {
                try {
                    const msg = `Get ${getTargetProp(target, applyPath)}, returned: ${getLogValue(applyPath, rtnValue)}${restrictedToWorker ? " (restricted to worker)" : ""}${groupedGetters ? " (grouped getter)" : ""}`;
                    msg.includes("Symbol(") || logWorker(msg, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, rtnValue, false, !!groupedGetters);
        return rtnValue;
    };
    const setter = (instance, applyPath, value, hookSetterValue) => {
        if (webWorkerCtx.$config$.set) {
            hookSetterValue = webWorkerCtx.$config$.set({
                value: value,
                prevent: HookPrevent,
                ...createHookOptions(instance, applyPath)
            });
            if (hookSetterValue === HookPrevent) {
                return;
            }
            hookSetterValue !== HookContinue && (value = hookSetterValue);
        }
        if (dimensionChangingSetterNames.some((s => applyPath.includes(s)))) {
            cachedDimensions.clear();
            ((target, propName) => {
                (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logSetters) && logWorker(`Dimension cache cleared from setter "${propName}"`, target[WinIdKey]);
            })(instance, applyPath[applyPath.length - 1]);
        }
        applyPath = [ ...applyPath, serializeInstanceForMain(instance, value), 0 ];
        ((target, applyPath, value, restrictedToWorker = false) => {
            if (webWorkerCtx.$config$.logSetters) {
                try {
                    applyPath = applyPath.slice(0, applyPath.length - 2);
                    logWorker(`Set ${getTargetProp(target, applyPath)}, value: ${getLogValue(applyPath, value)}${restrictedToWorker ? " (restricted to worker)" : ""}`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, value);
        queue(instance, applyPath, 2);
    };
    const callMethod = (instance, applyPath, args, callType, assignInstanceId, buffer, rtnValue, methodName) => {
        if (webWorkerCtx.$config$.apply) {
            rtnValue = webWorkerCtx.$config$.apply({
                args: args,
                ...createHookOptions(instance, applyPath)
            });
            if (rtnValue !== HookContinue) {
                return rtnValue;
            }
        }
        methodName = applyPath[len(applyPath) - 1];
        applyPath = [ ...applyPath, serializeInstanceForMain(instance, args) ];
        callType = callType || (nonBlockingMethods.includes(methodName) ? 2 : 1);
        if ("setAttribute" === methodName && hasInstanceStateValue(instance, args[0])) {
            setInstanceStateValue(instance, args[0], args[1]);
        } else if (structureChangingMethodNames.includes(methodName)) {
            cachedDimensions.clear();
            cachedStructure.clear();
            ((target, methodName) => {
                (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logCalls) && logWorker(`Dimension and DOM structure cache cleared from method call ${methodName}()`, target[WinIdKey]);
            })(instance, methodName);
        } else if (dimensionChangingMethodNames.includes(methodName)) {
            callType = 2;
            cachedDimensions.clear();
            logDimensionCacheClearMethod(instance, methodName);
        }
        rtnValue = queue(instance, applyPath, callType, assignInstanceId, void 0, buffer);
        ((target, applyPath, args, rtnValue) => {
            if (webWorkerCtx.$config$.logCalls) {
                try {
                    applyPath = applyPath.slice(0, applyPath.length - 1);
                    logWorker(`Call ${getTargetProp(target, applyPath)}(${args.map((v => getLogValue(applyPath, v))).join(", ")}), returned: ${getLogValue(applyPath, rtnValue)}`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, args, rtnValue);
        return rtnValue;
    };
    const constructGlobal = (instance, cstrName, args) => {
        ((target, cstrName, args) => {
            if (webWorkerCtx.$config$.logCalls) {
                try {
                    logWorker(`Construct new ${cstrName}(${args.map((v => getLogValue([], v))).join(", ")})`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, cstrName, args);
        queue(instance, [ 1, cstrName, serializeInstanceForMain(instance, args) ], 1);
    };
    const createHookOptions = (instance, applyPath) => ({
        name: applyPath.join("."),
        continue: HookContinue,
        nodeName: instance[InstanceDataKey],
        constructor: getConstructorName(instance),
        instance: instance,
        window: environments[instance[WinIdKey]].$window$
    });
    const addStorageApi = (win, storageName, isSameOrigin, env) => {
        let storage = {
            getItem(key) {
                if (isSameOrigin) {
                    return callMethod(win, [ storageName, "getItem" ], [ key ], 1);
                }
                warnCrossOrigin("get", storageName, env);
            },
            setItem(key, value) {
                isSameOrigin ? callMethod(win, [ storageName, "setItem" ], [ key, value ], 1) : warnCrossOrigin("set", storageName, env);
            },
            removeItem(key) {
                isSameOrigin ? callMethod(win, [ storageName, "removeItem" ], [ key ], 1) : warnCrossOrigin("remove", storageName, env);
            },
            key(index) {
                if (isSameOrigin) {
                    return callMethod(win, [ storageName, "key" ], [ index ], 1);
                }
                warnCrossOrigin("key", storageName, env);
            },
            clear() {
                isSameOrigin ? callMethod(win, [ storageName, "clear" ], EMPTY_ARRAY, 1) : warnCrossOrigin("clear", storageName, env);
            },
            get length() {
                if (isSameOrigin) {
                    return getter(win, [ storageName, "length" ]);
                }
                warnCrossOrigin("length", storageName, env);
            }
        };
        win[storageName] = new Proxy(storage, {
            get: (target, key) => Reflect.has(target, key) ? Reflect.get(target, key) : target.getItem(key),
            set(target, key, value) {
                target.setItem(key, value);
                return true;
            },
            has: (target, key) => !!Reflect.has(target, key) || "string" == typeof key && null !== target.getItem(key),
            deleteProperty(target, key) {
                target.removeItem(key);
                return true;
            }
        });
    };
    const createCSSStyleDeclarationCstr = (win, WorkerBase, cstrName) => {
        win[cstrName] = defineConstructorName(class extends WorkerBase {
            constructor(winId, instanceId, applyPath, styles) {
                super(winId, instanceId, applyPath, styles || {});
                return new Proxy(this, {
                    get(target, propName) {
                        if (target[propName]) {
                            return target[propName];
                        }
                        target[propName] || "string" != typeof propName || target[InstanceDataKey][propName] || (target[InstanceDataKey][propName] = getter(target, [ propName ]));
                        return target[InstanceDataKey][propName];
                    },
                    set(target, propName, propValue) {
                        target[InstanceDataKey][propName] = propValue;
                        setter(target, [ propName ], propValue);
                        logDimensionCacheClearStyle(target, propName);
                        cachedDimensions.clear();
                        return true;
                    }
                });
            }
            setProperty(...args) {
                this[InstanceDataKey][args[0]] = args[1];
                callMethod(this, [ "setProperty" ], args, 2);
                logDimensionCacheClearStyle(this, args[0]);
                cachedDimensions.clear();
            }
            getPropertyValue(propName) {
                return this[propName];
            }
            removeProperty(propName) {
                let value = this[InstanceDataKey][propName];
                callMethod(this, [ "removeProperty" ], [ propName ], 2);
                logDimensionCacheClearStyle(this, propName);
                cachedDimensions.clear();
                this[InstanceDataKey][propName] = void 0;
                return value;
            }
        }, cstrName);
    };
    const createCSSStyleSheetConstructor = (win, cssStyleSheetCstrName) => {
        win[cssStyleSheetCstrName] = defineConstructorName(class {
            constructor(ownerNode) {
                this.ownerNode = ownerNode;
            }
            get cssRules() {
                const ownerNode = this.ownerNode;
                return new Proxy({}, {
                    get(target, propKey) {
                        const propName = String(propKey);
                        return "item" === propName ? index => getCssRule(ownerNode, index) : "length" === propName ? getCssRules(ownerNode).length : isNaN(propName) ? target[propKey] : getCssRule(ownerNode, propName);
                    }
                });
            }
            insertRule(ruleText, index) {
                const cssRules = getCssRules(this.ownerNode);
                index = void 0 === index ? 0 : index;
                if (index >= 0 && index <= cssRules.length) {
                    callMethod(this.ownerNode, [ "sheet", "insertRule" ], [ ruleText, index ], 2);
                    cssRules.splice(index, 0, 0);
                }
                logDimensionCacheClearMethod(this.ownerNode, "insertRule");
                cachedDimensions.clear();
                return index;
            }
            deleteRule(index) {
                callMethod(this.ownerNode, [ "sheet", "deleteRule" ], [ index ], 2);
                getCssRules(this.ownerNode).splice(index, 1);
                logDimensionCacheClearMethod(this.ownerNode, "deleteRule");
                cachedDimensions.clear();
            }
            get type() {
                return "text/css";
            }
        }, cssStyleSheetCstrName);
        const HTMLStyleDescriptorMap = {
            sheet: {
                get() {
                    return new win[cssStyleSheetCstrName](this);
                }
            }
        };
        definePrototypePropertyDescriptor(win.HTMLStyleElement, HTMLStyleDescriptorMap);
    };
    const getCssRules = (ownerNode, cssRules) => {
        cssRules = getInstanceStateValue(ownerNode, 2);
        if (!cssRules) {
            cssRules = getter(ownerNode, [ "sheet", "cssRules" ]);
            setInstanceStateValue(ownerNode, 2, cssRules);
        }
        return cssRules;
    };
    const getCssRule = (ownerNode, index, cssRules) => {
        cssRules = getCssRules(ownerNode);
        0 === cssRules[index] && (cssRules[index] = getter(ownerNode, [ "sheet", "cssRules", parseInt(index, 10) ]));
        return cssRules[index];
    };
    const runScriptContent = (env, instanceId, scriptContent, winId, errorMsg) => {
        try {
            webWorkerCtx.$config$.logScriptExecution && logWorker(`Execute script: ${scriptContent.substring(0, 100).split("\n").map((l => l.trim())).join(" ").trim().substring(0, 60)}...`, winId);
            env.$currentScriptId$ = instanceId;
            run(env, scriptContent);
        } catch (contentError) {
            console.error(scriptContent, contentError);
            errorMsg = String(contentError.stack || contentError);
        }
        env.$currentScriptId$ = "";
        return errorMsg;
    };
    const run = (env, scriptContent, scriptUrl) => {
        env.$runWindowLoadEvent$ = 1;
        let sourceWithReplacedThis = ((scriptContent, newThis) => scriptContent.replace(/([a-zA-Z0-9_$\.\'\"\`])?(\.\.\.)?this(?![a-zA-Z0-9_$:])/g, ((match, p1, p2) => {
            const prefix = (p1 || "") + (p2 || "");
            return null != p1 ? prefix + "this" : prefix + newThis;
        })))(scriptContent, "(thi$(this)?window:this)");
        scriptContent = `with(this){${sourceWithReplacedThis.replace(/\/\/# so/g, "//Xso")}\n;function thi$(t){return t===this}};${(webWorkerCtx.$config$.globalFns || []).filter((globalFnName => /[a-zA-Z_$][0-9a-zA-Z_$]*/.test(globalFnName))).map((g => `(typeof ${g}=='function'&&(this.${g}=${g}))`)).join(";")};` + (scriptUrl ? "\n//# sourceURL=" + scriptUrl : "");
        env.$isSameOrigin$ || (scriptContent = scriptContent.replace(/.postMessage\(/g, `.postMessage('${env.$winId$}',`));
        new Function(scriptContent).call(env.$window$);
        env.$runWindowLoadEvent$ = 0;
    };
    const runStateLoadHandlers = (instance, type, handlers) => {
        handlers = getInstanceStateValue(instance, type);
        handlers && setTimeout((() => handlers.map((cb => cb({
            type: type
        })))));
    };
    const resolveBaseLocation = (env, baseLocation) => {
        baseLocation = env.$location$;
        while (!baseLocation.host) {
            env = environments[env.$parentWinId$];
            baseLocation = env.$location$;
            if (env.$winId$ === env.$parentWinId$) {
                break;
            }
        }
        return baseLocation;
    };
    const resolveToUrl = (env, url, type, baseLocation, resolvedUrl, configResolvedUrl) => {
        baseLocation = resolveBaseLocation(env, baseLocation);
        resolvedUrl = new URL(url || "", baseLocation);
        if (type && webWorkerCtx.$config$.resolveUrl) {
            configResolvedUrl = webWorkerCtx.$config$.resolveUrl(resolvedUrl, baseLocation, type);
            if (configResolvedUrl) {
                return configResolvedUrl;
            }
        }
        return resolvedUrl;
    };
    const resolveUrl = (env, url, type) => resolveToUrl(env, url, type) + "";
    const resolveSendBeaconRequestParameters = (env, url) => {
        const baseLocation = resolveBaseLocation(env);
        const resolvedUrl = new URL(url || "", baseLocation);
        if (webWorkerCtx.$config$.resolveSendBeaconRequestParameters) {
            const configResolvedParams = webWorkerCtx.$config$.resolveSendBeaconRequestParameters(resolvedUrl, baseLocation);
            if (configResolvedParams) {
                return configResolvedParams;
            }
        }
        return {};
    };
    const getPartytownScript = () => `<script src="${partytownLibUrl("partytown.js?v=0.10.3-dev1734732935152")}"><\/script>`;
    const createImageConstructor = env => class HTMLImageElement {
        constructor() {
            this.s = "";
            this.l = [];
            this.e = [];
            this.style = {};
        }
        get src() {
            return this.s;
        }
        set src(src) {
            webWorkerCtx.$config$.logImageRequests && logWorker(`Image() request: ${resolveUrl(env, src, "image")}`, env.$winId$);
            this.s = src;
            fetch(resolveUrl(env, src, "image"), {
                mode: "no-cors",
                credentials: "include",
                keepalive: true
            }).then((rsp => {
                rsp.ok || 0 === rsp.status ? this.l.map((cb => cb({
                    type: "load"
                }))) : this.e.map((cb => cb({
                    type: "error"
                })));
            }), (() => this.e.forEach((cb => cb({
                type: "error"
            })))));
        }
        addEventListener(eventName, cb) {
            "load" === eventName && this.l.push(cb);
            "error" === eventName && this.e.push(cb);
        }
        removeEventListener(eventName, cb) {
            "load" === eventName && (this.l = this.l.filter((fn => fn !== cb)));
            "error" === eventName && (this.e = this.e.filter((fn => fn !== cb)));
        }
        get onload() {
            return this.l[0];
        }
        set onload(cb) {
            this.l = [ cb ];
        }
        get onerror() {
            return this.e[0];
        }
        set onerror(cb) {
            this.e = [ cb ];
        }
    };
    const HTMLSrcElementDescriptorMap = {
        addEventListener: {
            value(...args) {
                const eventName = args[0];
                const callbacks = getInstanceStateValue(this, eventName) || [];
                callbacks.push(args[1]);
                setInstanceStateValue(this, eventName, callbacks);
            }
        },
        async: {
            get: noop,
            set: noop
        },
        defer: {
            get: noop,
            set: noop
        },
        onload: {
            get() {
                let callbacks = getInstanceStateValue(this, "load");
                return callbacks && callbacks[0] || null;
            },
            set(cb) {
                setInstanceStateValue(this, "load", cb ? [ cb ] : null);
            }
        },
        onerror: {
            get() {
                let callbacks = getInstanceStateValue(this, "error");
                return callbacks && callbacks[0] || null;
            },
            set(cb) {
                setInstanceStateValue(this, "error", cb ? [ cb ] : null);
            }
        },
        getAttribute: {
            value(attrName) {
                return "src" === attrName ? this.src : callMethod(this, [ "getAttribute" ], [ attrName ]);
            }
        },
        setAttribute: {
            value(attrName, attrValue) {
                scriptAttrPropNames.includes(attrName) ? this[attrName] = attrValue : callMethod(this, [ "setAttribute" ], [ attrName, attrValue ]);
            }
        }
    };
    const scriptAttrPropNames = commaSplit("src,type");
    const patchHTMLScriptElement = (WorkerHTMLScriptElement, env) => {
        const HTMLScriptDescriptorMap = {
            innerHTML: innerHTMLDescriptor,
            innerText: innerHTMLDescriptor,
            src: {
                get() {
                    return getInstanceStateValue(this, 4) || "";
                },
                set(url) {
                    const orgUrl = resolveUrl(env, url, null);
                    const config = webWorkerCtx.$config$;
                    url = resolveUrl(env, url, "script");
                    setInstanceStateValue(this, 4, url);
                    setter(this, [ "src" ], url);
                    orgUrl !== url && setter(this, [ "dataset", "ptsrc" ], orgUrl);
                    if (this.type) {
                        const shouldExecuteScriptViaMainThread = testIfMustLoadScriptOnMainThread(config, url);
                        shouldExecuteScriptViaMainThread && setter(this, [ "type" ], "text/javascript");
                    }
                }
            },
            text: innerHTMLDescriptor,
            textContent: innerHTMLDescriptor,
            type: {
                get() {
                    return getter(this, [ "type" ]);
                },
                set(type) {
                    if (!isScriptJsType(type)) {
                        setInstanceStateValue(this, 5, type);
                        setter(this, [ "type" ], type);
                    }
                }
            },
            ...HTMLSrcElementDescriptorMap
        };
        definePrototypePropertyDescriptor(WorkerHTMLScriptElement, HTMLScriptDescriptorMap);
    };
    const innerHTMLDescriptor = {
        get() {
            const type = getter(this, [ "type" ]);
            if (isScriptJsType(type)) {
                const scriptContent = getInstanceStateValue(this, 3);
                if (scriptContent) {
                    return scriptContent;
                }
            }
            return getter(this, [ "innerHTML" ]) || "";
        },
        set(scriptContent) {
            setInstanceStateValue(this, 3, scriptContent);
        }
    };
    const isScriptJsType = scriptType => !scriptType || "text/javascript" === scriptType;
    const createNodeCstr = (win, env, WorkerBase) => {
        const config = webWorkerCtx.$config$;
        const WorkerNode = defineConstructorName(class extends WorkerBase {
            appendChild(node) {
                return this.insertBefore(node, null);
            }
            get href() {}
            set href(_) {}
            insertBefore(newNode, referenceNode) {
                const winId = newNode[WinIdKey] = this[WinIdKey];
                const instanceId = newNode[InstanceIdKey];
                const nodeName = newNode[InstanceDataKey];
                const isScript = "SCRIPT" === nodeName;
                const isIFrame = "IFRAME" === nodeName;
                if (isScript) {
                    const scriptContent = getInstanceStateValue(newNode, 3);
                    const scriptType = getInstanceStateValue(newNode, 5);
                    if (scriptContent) {
                        if (isScriptJsType(scriptType)) {
                            const scriptId = newNode.id;
                            const loadOnMainThread = scriptId && testIfMustLoadScriptOnMainThread(config, scriptId);
                            if (loadOnMainThread) {
                                setter(newNode, [ "type" ], "text/javascript");
                            } else {
                                const errorMsg = runScriptContent(env, instanceId, scriptContent, winId, "");
                                const datasetType = errorMsg ? "pterror" : "ptid";
                                const datasetValue = errorMsg || instanceId;
                                setter(newNode, [ "type" ], "text/partytown-x");
                                setter(newNode, [ "dataset", datasetType ], datasetValue);
                            }
                        }
                        setter(newNode, [ "innerHTML" ], scriptContent);
                    }
                }
                callMethod(this, [ "insertBefore" ], [ newNode, referenceNode ], 2);
                if (isIFrame) {
                    const src = getInstanceStateValue(newNode, 0);
                    if (src && src.startsWith("javascript:")) {
                        const scriptContent = src.split("javascript:")[1];
                        runScriptContent(env, instanceId, scriptContent, winId, "");
                    }
                    ((winId, iframe) => {
                        let i = 0;
                        let type;
                        let handlers;
                        let callback = () => {
                            if (environments[winId] && environments[winId].$isInitialized$ && !environments[winId].$isLoading$) {
                                type = getInstanceStateValue(iframe, 1) ? "error" : "load";
                                handlers = getInstanceStateValue(iframe, type);
                                handlers && handlers.map((handler => handler({
                                    type: type
                                })));
                            } else if (i++ > 2e3) {
                                handlers = getInstanceStateValue(iframe, "error");
                                handlers && handlers.map((handler => handler({
                                    type: "error"
                                })));
                            } else {
                                setTimeout(callback, 9);
                            }
                        };
                        callback();
                    })(instanceId, newNode);
                }
                if (isScript) {
                    sendToMain(true);
                    webWorkerCtx.$postMessage$([ 7, winId ]);
                }
                return newNode;
            }
            get nodeName() {
                return "#s" === this[InstanceDataKey] ? "#document-fragment" : this[InstanceDataKey];
            }
            get nodeType() {
                return 3;
            }
            get ownerDocument() {
                return env.$document$;
            }
        }, "Node");
        cachedTreeProps(WorkerNode, commaSplit("childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling"));
        win.Node = WorkerNode;
    };
    const htmlMedia = commaSplit("AUDIO,CANVAS,VIDEO");
    const windowMediaConstructors = commaSplit("Audio,MediaSource");
    const patchDocument = (WorkerDocument, env, isDocumentImplementation) => {
        const DocumentDescriptorMap = {
            body: {
                get: () => env.$body$
            },
            cookie: {
                get() {
                    if (env.$isSameOrigin$) {
                        return getter(this, [ "cookie" ]);
                    }
                    warnCrossOrigin("get", "cookie", env);
                    return "";
                },
                set(value) {
                    if (env.$isSameOrigin$) {
                        setter(this, [ "cookie" ], value);
                    } else {
                        warnCrossOrigin("set", "cookie", env);
                    }
                }
            },
            createElement: {
                value(tagName) {
                    tagName = tagName.toUpperCase();
                    if (!IS_TAG_REG.test(tagName)) {
                        throw tagName + " not valid";
                    }
                    const isIframe = "IFRAME" === tagName;
                    const winId = this[WinIdKey];
                    const instanceId = (isIframe ? "f_" : "") + randomId();
                    callMethod(this, [ "createElement" ], [ tagName ], 2, instanceId);
                    const elm = getOrCreateNodeInstance(winId, instanceId, tagName);
                    if (isIframe) {
                        const env = createEnvironment({
                            $winId$: instanceId,
                            $parentWinId$: winId,
                            $url$: "about:blank"
                        }, true);
                        env.$window$.fetch = fetch;
                        setter(elm, [ "srcdoc" ], getPartytownScript());
                    } else if ("SCRIPT" === tagName) {
                        const scriptType = getInstanceStateValue(elm, 5);
                        isScriptJsType(scriptType) && setter(elm, [ "type" ], "text/partytown");
                    }
                    return elm;
                }
            },
            createElementNS: {
                value(namespace, tagName) {
                    const instanceId = randomId();
                    const nsElm = getOrCreateNodeInstance(this[WinIdKey], instanceId, tagName, namespace);
                    callMethod(this, [ "createElementNS" ], [ namespace, tagName ], 2, instanceId);
                    return nsElm;
                }
            },
            createTextNode: {
                value(text) {
                    const winId = this[WinIdKey];
                    const instanceId = randomId();
                    const textNode = getOrCreateNodeInstance(winId, instanceId, "#text");
                    callMethod(this, [ "createTextNode" ], [ text ], 2, instanceId);
                    return textNode;
                }
            },
            createEvent: {
                value: type => new Event(type)
            },
            currentScript: {
                get() {
                    return env.$currentScriptId$ ? getOrCreateNodeInstance(this[WinIdKey], env.$currentScriptId$, "SCRIPT") : null;
                }
            },
            defaultView: {
                get: () => isDocumentImplementation ? null : env.$window$
            },
            documentElement: {
                get: () => env.$documentElement$
            },
            getElementsByTagName: {
                value(tagName) {
                    tagName = tagName.toUpperCase();
                    return "BODY" === tagName ? [ env.$body$ ] : "HEAD" === tagName ? [ env.$head$ ] : callMethod(this, [ "getElementsByTagName" ], [ tagName ]);
                }
            },
            head: {
                get: () => env.$head$
            },
            images: {
                get() {
                    return getter(this, [ "images" ]);
                }
            },
            scripts: {
                get() {
                    return getter(this, [ "scripts" ]);
                }
            },
            implementation: {
                get() {
                    return {
                        hasFeature: () => true,
                        createHTMLDocument: title => {
                            const $winId$ = randomId();
                            callMethod(this, [ "implementation", "createHTMLDocument" ], [ title ], 1, {
                                $winId$: $winId$
                            });
                            const docEnv = createEnvironment({
                                $winId$: $winId$,
                                $parentWinId$: $winId$,
                                $url$: env.$location$ + "",
                                $visibilityState$: "hidden"
                            }, true, true);
                            return docEnv.$document$;
                        }
                    };
                }
            },
            location: {
                get: () => env.$location$,
                set(url) {
                    env.$location$.href = url + "";
                }
            },
            nodeType: {
                value: 9
            },
            parentNode: {
                value: null
            },
            parentElement: {
                value: null
            },
            readyState: {
                value: "complete"
            },
            visibilityState: {
                get: () => env.$visibilityState$ || "visible"
            }
        };
        definePrototypePropertyDescriptor(WorkerDocument, DocumentDescriptorMap);
        cachedProps(WorkerDocument, "compatMode,referrer,forms");
    };
    const patchDocumentElementChild = (WokerDocumentElementChild, env) => {
        const DocumentElementChildDescriptorMap = {
            parentElement: {
                get() {
                    return this.parentNode;
                }
            },
            parentNode: {
                get: () => env.$documentElement$
            }
        };
        definePrototypePropertyDescriptor(WokerDocumentElementChild, DocumentElementChildDescriptorMap);
    };
    const patchElement = (WorkerElement, WorkerHTMLElement) => {
        const ElementDescriptorMap = {
            localName: {
                get() {
                    return this[InstanceDataKey].toLowerCase();
                }
            },
            namespaceURI: {
                get() {
                    return this[NamespaceKey] || "http://www.w3.org/1999/xhtml";
                }
            },
            nodeType: {
                value: 1
            },
            tagName: {
                get() {
                    return this[InstanceDataKey];
                }
            }
        };
        definePrototypePropertyDescriptor(WorkerElement, ElementDescriptorMap);
        cachedTreeProps(WorkerElement, elementStructurePropNames);
        cachedProps(WorkerElement, "id");
        cachedDimensionProps(WorkerHTMLElement);
        cachedDimensionMethods(WorkerHTMLElement, commaSplit("getClientRects,getBoundingClientRect"));
    };
    const patchHTMLAnchorElement = (WorkerHTMLAnchorElement, env) => {
        const HTMLAnchorDescriptorMap = {};
        commaSplit("hash,host,hostname,href,origin,pathname,port,protocol,search").map((anchorProp => {
            HTMLAnchorDescriptorMap[anchorProp] = {
                get() {
                    let value = getInstanceStateValue(this, 4);
                    let href;
                    if ("string" != typeof value) {
                        href = getter(this, [ "href" ]);
                        if ("" === href) {
                            return "protocol" === anchorProp ? ":" : "";
                        }
                        setInstanceStateValue(this, 4, href);
                        value = new URL(href)[anchorProp];
                    }
                    return resolveToUrl(env, value, null)[anchorProp];
                },
                set(value) {
                    let url;
                    if ("href" === anchorProp) {
                        if ((url => {
                            try {
                                new URL(url);
                                return true;
                            } catch (_) {
                                return false;
                            }
                        })(value)) {
                            url = new URL(value);
                        } else {
                            const baseHref = env.$location$.href;
                            url = resolveToUrl(env, baseHref, null);
                            url.href = new URL(value + "", url.href);
                        }
                    } else {
                        url = resolveToUrl(env, this.href, null);
                        url[anchorProp] = value;
                    }
                    setInstanceStateValue(this, 4, url.href);
                    setter(this, [ "href" ], url.href);
                }
            };
        }));
        definePrototypePropertyDescriptor(WorkerHTMLAnchorElement, HTMLAnchorDescriptorMap);
    };
    const patchHTMLIFrameElement = (WorkerHTMLIFrameElement, env) => {
        const HTMLIFrameDescriptorMap = {
            contentDocument: {
                get() {
                    return getIframeEnv(this).$document$;
                }
            },
            contentWindow: {
                get() {
                    return getIframeEnv(this).$window$;
                }
            },
            src: {
                get() {
                    let src = getInstanceStateValue(this, 0);
                    if (src && src.startsWith("javascript:")) {
                        return src;
                    }
                    src = getIframeEnv(this).$location$.href;
                    return src.startsWith("about:") ? "" : src;
                },
                set(src) {
                    if (src) {
                        if (src.startsWith("javascript:")) {
                            setInstanceStateValue(this, 0, src);
                        } else if (!src.startsWith("about:")) {
                            let xhr = new XMLHttpRequest;
                            let xhrStatus;
                            let env = getIframeEnv(this);
                            env.$location$.href = src = resolveUrl(env, src, "iframe");
                            env.$isLoading$ = 1;
                            setInstanceStateValue(this, 1, void 0);
                            xhr.open("GET", src, false);
                            xhr.send();
                            xhrStatus = xhr.status;
                            if (xhrStatus > 199 && xhrStatus < 300) {
                                setter(this, [ "srcdoc" ], `<base href="${src}">` + function(text) {
                                    return text.replace(SCRIPT_TAG_REGEXP, ((_, attrs) => {
                                        const parts = [];
                                        let hasType = false;
                                        let match;
                                        while (match = ATTR_REGEXP.exec(attrs)) {
                                            let [keyValue] = match;
                                            if (keyValue.startsWith("type=")) {
                                                hasType = true;
                                                keyValue = keyValue.replace(/(application|text)\/javascript/, SCRIPT_TYPE);
                                            }
                                            parts.push(keyValue);
                                        }
                                        hasType || parts.push('type="text/partytown"');
                                        return `<script ${parts.join(" ")}>`;
                                    }));
                                }(xhr.responseText) + getPartytownScript());
                                sendToMain(true);
                                webWorkerCtx.$postMessage$([ 7, env.$winId$ ]);
                            } else {
                                setInstanceStateValue(this, 1, xhrStatus);
                                env.$isLoading$ = 0;
                            }
                        }
                    }
                }
            },
            ...HTMLSrcElementDescriptorMap
        };
        definePrototypePropertyDescriptor(WorkerHTMLIFrameElement, HTMLIFrameDescriptorMap);
    };
    const ATTR_REGEXP_STR = "((?:\\w|-)+(?:=(?:(?:\\w|-)+|'[^']*'|\"[^\"]*\")?)?)";
    const SCRIPT_TAG_REGEXP = new RegExp(`<script\\s*((${ATTR_REGEXP_STR}\\s*)*)>`, "mg");
    const ATTR_REGEXP = new RegExp(ATTR_REGEXP_STR, "mg");
    const getIframeEnv = iframe => {
        const $winId$ = iframe[InstanceIdKey];
        environments[$winId$] || createEnvironment({
            $winId$: $winId$,
            $parentWinId$: iframe[WinIdKey],
            $url$: getter(iframe, [ "src" ]) || "about:blank"
        }, true);
        return environments[$winId$];
    };
    const patchSvgElement = WorkerSVGGraphicsElement => {
        const getMatrix = (elm, methodName) => {
            const {a: a, b: b, c: c, d: d, e: e, f: f} = callMethod(elm, [ methodName ], EMPTY_ARRAY);
            return new DOMMatrixReadOnly([ a, b, c, d, e, f ]);
        };
        const SVGGraphicsElementDescriptorMap = {
            ...WorkerSVGGraphicsElement,
            getCTM: {
                value: function() {
                    return getMatrix(this, "getCTM");
                }
            },
            getScreenCTM: {
                value: function() {
                    return getMatrix(this, "getScreenCTM");
                }
            }
        };
        definePrototypePropertyDescriptor(WorkerSVGGraphicsElement, SVGGraphicsElementDescriptorMap);
    };
    const createNamedNodeMapCstr = (win, WorkerBase) => {
        win.NamedNodeMap = defineConstructorName(class NamedNodeMap extends WorkerBase {
            constructor(winId, instanceId, applyPath) {
                super(winId, instanceId, applyPath);
                return new Proxy(this, {
                    get(target, propName) {
                        const handler = NAMED_NODE_MAP_HANDLERS[propName];
                        return handler ? handler.bind(target, [ propName ]) : getter(target, [ propName ]);
                    },
                    set(target, propName, propValue) {
                        const handler = NAMED_NODE_MAP_HANDLERS[propName];
                        if (handler) {
                            throw new Error("Can't set read-only property: " + String(propName));
                        }
                        setter(target, [ propName ], propValue);
                        return true;
                    }
                });
            }
        }, "NamedNodeMap");
    };
    function method(applyPath, ...args) {
        return callMethod(this, applyPath, args, 1);
    }
    const NAMED_NODE_MAP_HANDLERS = {
        getNamedItem: method,
        getNamedItemNS: method,
        item: method,
        removeNamedItem: method,
        removeNamedItemNS: method,
        setNamedItem: method,
        setNamedItemNS: method
    };
    const createWindow = ($winId$, $parentWinId$, url, $visibilityState$, isIframeWindow, isDocumentImplementation) => {
        let cstrInstanceId;
        let cstrNodeName;
        let cstrNamespace;
        let cstrPrevInstance;
        const WorkerBase = class {
            constructor(winId, instanceId, applyPath, instanceData, namespace) {
                this[WinIdKey] = winId || $winId$;
                this[InstanceIdKey] = instanceId || cstrInstanceId || randomId();
                this[ApplyPathKey] = applyPath || [];
                this[InstanceDataKey] = instanceData || cstrNodeName;
                this[NamespaceKey] = namespace || cstrNamespace;
                this[InstanceStateKey] = cstrPrevInstance && cstrPrevInstance[InstanceStateKey] || {};
                cstrInstanceId = cstrNodeName = cstrNamespace = void 0;
            }
        };
        const WorkerLocation = defineConstructorName(class extends URL {
            assign() {
                logWorker("location.assign(), noop");
            }
            reload() {
                logWorker("location.reload(), noop");
            }
            replace() {
                logWorker("location.replace(), noop");
            }
        }, "Location");
        const $location$ = new WorkerLocation(url);
        const $isSameOrigin$ = $location$.origin === webWorkerCtx.$origin$ || "about:blank" === $location$.origin;
        const $isTopWindow$ = $parentWinId$ === $winId$;
        const env = {};
        const getChildEnvs = () => {
            let childEnv = [];
            let envWinId;
            let otherEnv;
            for (envWinId in environments) {
                otherEnv = environments[envWinId];
                otherEnv.$parentWinId$ !== $winId$ || otherEnv.$isTopWindow$ || childEnv.push(otherEnv);
            }
            return childEnv;
        };
        const WorkerWindow = defineConstructorName(class extends WorkerBase {
            constructor() {
                super($winId$, $winId$);
                this.addEventListener = (...args) => {
                    "load" === args[0] ? env.$runWindowLoadEvent$ && setTimeout((() => args[1]({
                        type: "load"
                    }))) : callMethod(this, [ "addEventListener" ], args, 2);
                };
                let win = this;
                let value;
                let historyState;
                let hasInitializedMedia = 0;
                let initWindowMedia = () => {
                    if (!hasInitializedMedia) {
                        (() => {
                            if (!webWorkerCtx.$initWindowMedia$) {
                                self.$bridgeToMedia$ = [ getter, setter, callMethod, constructGlobal, definePrototypePropertyDescriptor, randomId, WinIdKey, InstanceIdKey, ApplyPathKey ];
                                webWorkerCtx.$importScripts$(partytownLibUrl("partytown-media.js?v=0.10.3-dev1734732935152"));
                                webWorkerCtx.$initWindowMedia$ = self.$bridgeFromMedia$;
                                delete self.$bridgeFromMedia$;
                            }
                            return webWorkerCtx.$initWindowMedia$;
                        })()(WorkerBase, WorkerEventTargetProxy, env, win, windowMediaConstructors);
                        hasInitializedMedia = 1;
                    }
                };
                let nodeCstrs = {};
                let $createNode$ = (nodeName, instanceId, namespace, prevInstance) => {
                    htmlMedia.includes(nodeName) && initWindowMedia();
                    const NodeCstr = nodeCstrs[nodeName] ? nodeCstrs[nodeName] : nodeName.includes("-") ? nodeCstrs.UNKNOWN : nodeCstrs.I;
                    cstrInstanceId = instanceId;
                    cstrNodeName = nodeName;
                    cstrNamespace = namespace;
                    cstrPrevInstance = prevInstance;
                    return new NodeCstr;
                };
                win.Window = WorkerWindow;
                win.name = name + `${normalizedWinId($winId$)} (${$winId$})`;
                createNodeCstr(win, env, WorkerBase);
                (win => {
                    win.NodeList = defineConstructorName(NodeList, "NodeList");
                })(win);
                createNamedNodeMapCstr(win, WorkerBase);
                createCSSStyleDeclarationCstr(win, WorkerBase, "CSSStyleDeclaration");
                ((win, WorkerBase, cstrName) => {
                    win[cstrName] = defineConstructorName(class extends WorkerBase {
                        now() {
                            return performance.now();
                        }
                    }, cstrName);
                })(win, WorkerBase, "Performance");
                ((win, nodeCstrs) => {
                    const registry = new Map;
                    win.customElements = {
                        define(tagName, Cstr, opts) {
                            registry.set(tagName, Cstr);
                            nodeCstrs[tagName.toUpperCase()] = Cstr;
                            const ceData = [ Cstr.name, Cstr.observedAttributes ];
                            callMethod(win, [ "customElements", "define" ], [ tagName, ceData, opts ]);
                        },
                        get: tagName => registry.get(tagName) || callMethod(win, [ "customElements", "get" ], [ tagName ]),
                        whenDefined: tagName => registry.has(tagName) ? Promise.resolve() : callMethod(win, [ "customElements", "whenDefined" ], [ tagName ]),
                        upgrade: elm => callMethod(win, [ "customElements", "upgrade" ], [ elm ])
                    };
                })(win, nodeCstrs);
                webWorkerCtx.$interfaces$.map((([cstrName, superCstrName, members, interfaceType, nodeName]) => {
                    const SuperCstr = TrapConstructors[cstrName] ? WorkerTrapProxy : "EventTarget" === superCstrName ? WorkerEventTargetProxy : "Object" === superCstrName ? WorkerBase : win[superCstrName];
                    const Cstr = win[cstrName] = defineConstructorName(12 === interfaceType ? class extends WorkerBase {
                        constructor(...args) {
                            super();
                            constructGlobal(this, cstrName, args);
                        }
                    } : win[cstrName] || class extends SuperCstr {}, cstrName);
                    nodeName && (nodeCstrs[nodeName] = Cstr);
                    members.map((([memberName, memberType, staticValue]) => {
                        memberName in Cstr.prototype || memberName in SuperCstr.prototype || ("string" == typeof memberType ? definePrototypeProperty(Cstr, memberName, {
                            get() {
                                if (!hasInstanceStateValue(this, memberName)) {
                                    const instanceId = this[InstanceIdKey];
                                    const applyPath = [ ...this[ApplyPathKey], memberName ];
                                    const PropCstr = win[memberType];
                                    PropCstr && setInstanceStateValue(this, memberName, new PropCstr($winId$, instanceId, applyPath));
                                }
                                return getInstanceStateValue(this, memberName);
                            },
                            set(value) {
                                setInstanceStateValue(this, memberName, value);
                            }
                        }) : 5 === memberType ? definePrototypeValue(Cstr, memberName, (function(...args) {
                            return callMethod(this, [ memberName ], args);
                        })) : memberType > 0 && (void 0 !== staticValue ? definePrototypeValue(Cstr, memberName, staticValue) : definePrototypeProperty(Cstr, memberName, {
                            get() {
                                return getter(this, [ memberName ]);
                            },
                            set(value) {
                                return setter(this, [ memberName ], value);
                            }
                        })));
                    }));
                }));
                commaSplit("atob,btoa,crypto,indexedDB,setTimeout,setInterval,clearTimeout,clearInterval").map((globalName => {
                    delete WorkerWindow.prototype[globalName];
                    if (!(globalName in win)) {
                        value = self[globalName];
                        null != value && (win[globalName] = "function" != typeof value || value.toString().startsWith("class") ? value : value.bind(self));
                    }
                }));
                Object.getOwnPropertyNames(self).map((globalName => {
                    globalName in win || (win[globalName] = self[globalName]);
                }));
                windowMediaConstructors.map((cstrName => defineProperty(win, cstrName, {
                    get() {
                        initWindowMedia();
                        return win[cstrName];
                    }
                })));
                "trustedTypes" in self && (win.trustedTypes = self.trustedTypes);
                patchElement(win.Element, win.HTMLElement);
                patchDocument(win.Document, env, isDocumentImplementation);
                (WorkerDocumentFragment => {
                    definePrototypeNodeType(WorkerDocumentFragment, 11);
                    cachedTreeProps(WorkerDocumentFragment, elementStructurePropNames);
                })(win.DocumentFragment);
                patchHTMLAnchorElement(win.HTMLAnchorElement, env);
                (WorkerHTMLFormElement => {
                    definePrototypePropertyDescriptor(WorkerHTMLFormElement, {});
                    cachedProps(WorkerHTMLFormElement, "elements");
                })(win.HTMLFormElement);
                patchHTMLIFrameElement(win.HTMLIFrameElement);
                patchHTMLScriptElement(win.HTMLScriptElement, env);
                patchSvgElement(win.SVGGraphicsElement);
                patchDocumentElementChild(win.HTMLHeadElement, env);
                patchDocumentElementChild(win.HTMLBodyElement, env);
                ((WorkerHTMLHtmlElement, env) => {
                    const DocumentElementDescriptorMap = {
                        parentElement: {
                            value: null
                        },
                        parentNode: {
                            get: () => env.$document$
                        }
                    };
                    definePrototypePropertyDescriptor(WorkerHTMLHtmlElement, DocumentElementDescriptorMap);
                })(win.HTMLHtmlElement, env);
                createCSSStyleSheetConstructor(win, "CSSStyleSheet");
                definePrototypeNodeType(win.Comment, 8);
                definePrototypeNodeType(win.DocumentType, 10);
                Object.assign(env, {
                    $winId$: $winId$,
                    $parentWinId$: $parentWinId$,
                    $window$: new Proxy(win, {
                        get: (win, propName) => {
                            var _a;
                            if ("string" != typeof propName || isNaN(propName)) {
                                return (null === (_a = webWorkerCtx.$config$.mainWindowAccessors) || void 0 === _a ? void 0 : _a.includes(propName)) ? getter(this, [ propName ]) : win[propName];
                            }
                            {
                                let frame = getChildEnvs()[propName];
                                return frame ? frame.$window$ : void 0;
                            }
                        },
                        has: () => true
                    }),
                    $document$: $createNode$("#document", $winId$ + ".d"),
                    $documentElement$: $createNode$("HTML", $winId$ + ".e"),
                    $head$: $createNode$("HEAD", $winId$ + ".h"),
                    $body$: $createNode$("BODY", $winId$ + ".b"),
                    $location$: $location$,
                    $visibilityState$: $visibilityState$,
                    $isSameOrigin$: $isSameOrigin$,
                    $isTopWindow$: $isTopWindow$,
                    $createNode$: $createNode$
                });
                win.requestAnimationFrame = cb => setTimeout((() => cb(performance.now())), 9);
                win.cancelAnimationFrame = id => clearTimeout(id);
                win.requestIdleCallback = (cb, start) => {
                    start = Date.now();
                    return setTimeout((() => cb({
                        didTimeout: false,
                        timeRemaining: () => Math.max(0, 50 - (Date.now() - start))
                    })), 1);
                };
                win.cancelIdleCallback = id => clearTimeout(id);
                addStorageApi(win, "localStorage", $isSameOrigin$, env);
                addStorageApi(win, "sessionStorage", $isSameOrigin$, env);
                $isSameOrigin$ || (win.indexeddb = void 0);
                if (isIframeWindow) {
                    historyState = {};
                    win.history = {
                        pushState(stateObj) {
                            historyState = stateObj;
                        },
                        replaceState(stateObj) {
                            historyState = stateObj;
                        },
                        get state() {
                            return historyState;
                        },
                        length: 0
                    };
                    win.indexeddb = void 0;
                } else {
                    const originalPushState = win.history.pushState.bind(win.history);
                    const originalReplaceState = win.history.replaceState.bind(win.history);
                    win.history.pushState = (stateObj, _, newUrl) => {
                        false !== env.$propagateHistoryChange$ && originalPushState(stateObj, _, newUrl);
                    };
                    win.history.replaceState = (stateObj, _, newUrl) => {
                        false !== env.$propagateHistoryChange$ && originalReplaceState(stateObj, _, newUrl);
                    };
                }
                win.Worker = void 0;
            }
            get body() {
                return env.$body$;
            }
            get document() {
                return env.$document$;
            }
            get documentElement() {
                return env.$documentElement$;
            }
            fetch(input, init) {
                input = "string" == typeof input || input instanceof URL ? String(input) : input.url;
                return fetch(resolveUrl(env, input, "fetch"), init);
            }
            get frames() {
                return env.$window$;
            }
            get frameElement() {
                return $isTopWindow$ ? null : getOrCreateNodeInstance($parentWinId$, $winId$, "IFRAME");
            }
            get globalThis() {
                return env.$window$;
            }
            get head() {
                return env.$head$;
            }
            get length() {
                return getChildEnvs().length;
            }
            get location() {
                return $location$;
            }
            set location(loc) {
                $location$.href = loc + "";
            }
            get Image() {
                return createImageConstructor(env);
            }
            get navigator() {
                return (env => {
                    const nav = {
                        sendBeacon: (url, body) => {
                            if (webWorkerCtx.$config$.logSendBeaconRequests) {
                                try {
                                    logWorker(`sendBeacon: ${resolveUrl(env, url, null)}${body ? ", data: " + JSON.stringify(body) : ""}, resolvedParams: ${JSON.stringify(resolveSendBeaconRequestParameters(env, url))}`);
                                } catch (e) {
                                    console.error(e);
                                }
                            }
                            try {
                                fetch(resolveUrl(env, url, null), {
                                    method: "POST",
                                    body: body,
                                    mode: "no-cors",
                                    keepalive: true,
                                    ...resolveSendBeaconRequestParameters(env, url)
                                });
                                return true;
                            } catch (e) {
                                console.error(e);
                                return false;
                            }
                        }
                    };
                    for (let key in navigator) {
                        nav[key] = navigator[key];
                    }
                    return new Proxy(nav, {
                        set(_, propName, propValue) {
                            navigator[propName] = propValue;
                            return true;
                        },
                        get(target, prop) {
                            if (Object.prototype.hasOwnProperty.call(target, prop)) {
                                return target[prop];
                            }
                            const value = getter(env.$window$, [ "navigator", prop ]);
                            return value;
                        }
                    });
                })(env);
            }
            get origin() {
                return $location$.origin;
            }
            set origin(_) {}
            get parent() {
                for (let envWinId in environments) {
                    if (environments[envWinId].$winId$ === $parentWinId$) {
                        return environments[envWinId].$window$;
                    }
                }
                return env.$window$;
            }
            postMessage(...args) {
                if (environments[args[0]]) {
                    len(postMessages) > 50 && postMessages.splice(0, 5);
                    postMessages.push({
                        $winId$: args[0],
                        $data$: JSON.stringify(args[1])
                    });
                    args = args.slice(1);
                }
                callMethod(this, [ "postMessage" ], args, 3);
            }
            get self() {
                return env.$window$;
            }
            get top() {
                for (let envWinId in environments) {
                    if (environments[envWinId].$isTopWindow$) {
                        return environments[envWinId].$window$;
                    }
                }
                return env.$window$;
            }
            get window() {
                return env.$window$;
            }
            get XMLHttpRequest() {
                const Xhr = XMLHttpRequest;
                const str = String(Xhr);
                const ExtendedXhr = defineConstructorName(class extends Xhr {
                    open(...args) {
                        args[1] = resolveUrl(env, args[1], "xhr");
                        super.open(...args);
                    }
                    set withCredentials(_) {
                        webWorkerCtx.$config$.allowXhrCredentials && (super.withCredentials = _);
                    }
                    toString() {
                        return str;
                    }
                }, getConstructorName(Xhr));
                ExtendedXhr.prototype.constructor.toString = () => str;
                return ExtendedXhr;
            }
        }, "Window");
        const WorkerTrapProxy = class extends WorkerBase {
            constructor(winId, instanceId, applyPath, nodeName) {
                super(winId, instanceId, applyPath, nodeName);
                return new Proxy(this, {
                    get: (instance, propName) => getter(instance, [ propName ]),
                    set(instance, propName, propValue) {
                        setter(instance, [ propName ], propValue);
                        return true;
                    }
                });
            }
        };
        const WorkerEventTargetProxy = class extends WorkerBase {};
        eventTargetMethods.map((methodName => WorkerEventTargetProxy.prototype[methodName] = function(...args) {
            return callMethod(this, [ methodName ], args, 2);
        }));
        cachedProps(WorkerWindow, "devicePixelRatio");
        cachedDimensionProps(WorkerWindow);
        cachedDimensionMethods(WorkerWindow, [ "getComputedStyle" ]);
        new WorkerWindow;
        return env;
    };
    const TrapConstructors = {
        DOMStringMap: 1,
        NamedNodeMap: 1
    };
    const createEnvironment = ({$winId$: $winId$, $parentWinId$: $parentWinId$, $url$: $url$, $visibilityState$: $visibilityState$}, isIframeWindow, isDocumentImplementation) => {
        if (!environments[$winId$]) {
            environments[$winId$] = createWindow($winId$, $parentWinId$, $url$, $visibilityState$, isIframeWindow, isDocumentImplementation);
            {
                const winType = $winId$ === $parentWinId$ ? "top" : "iframe";
                logWorker(`Created ${winType} window ${normalizedWinId($winId$)} environment`, $winId$);
            }
        }
        webWorkerCtx.$postMessage$([ 7, $winId$ ]);
        return environments[$winId$];
    };
    const queuedEvents = [];
    const receiveMessageFromSandboxToWorker = ev => {
        const msg = ev.data;
        const msgType = msg[0];
        const msgValue = msg[1];
        if (webWorkerCtx.$isInitialized$) {
            if (7 === msgType) {
                (async initScript => {
                    let winId = initScript.$winId$;
                    let instanceId = initScript.$instanceId$;
                    let instance = getOrCreateNodeInstance(winId, instanceId, "SCRIPT");
                    let scriptContent = initScript.$content$;
                    let scriptSrc = initScript.$url$;
                    let scriptOrgSrc = initScript.$orgUrl$;
                    let errorMsg = "";
                    let env = environments[winId];
                    let rsp;
                    let javascriptContentTypes = [ "text/jscript", "text/javascript", "text/x-javascript", "application/javascript", "application/x-javascript", "text/ecmascript", "text/x-ecmascript", "application/ecmascript" ];
                    if (scriptSrc) {
                        try {
                            scriptSrc = resolveToUrl(env, scriptSrc, "script") + "";
                            setInstanceStateValue(instance, 4, scriptSrc);
                            webWorkerCtx.$config$.logScriptExecution && logWorker(`Execute script src: ${scriptOrgSrc}`, winId);
                            rsp = await fetch(scriptSrc);
                            if (rsp.ok) {
                                let responseContentType = rsp.headers.get("content-type");
                                let shouldExecute = javascriptContentTypes.some((ct => {
                                    var _a, _b, _c;
                                    return null === (_c = null === (_a = null == responseContentType ? void 0 : responseContentType.toLowerCase) || void 0 === _a ? void 0 : (_b = _a.call(responseContentType)).includes) || void 0 === _c ? void 0 : _c.call(_b, ct);
                                }));
                                if (shouldExecute) {
                                    scriptContent = await rsp.text();
                                    env.$currentScriptId$ = instanceId;
                                    run(env, scriptContent, scriptOrgSrc || scriptSrc);
                                }
                                runStateLoadHandlers(instance, "load");
                            } else {
                                errorMsg = rsp.statusText;
                                runStateLoadHandlers(instance, "error");
                            }
                        } catch (urlError) {
                            console.error(urlError);
                            errorMsg = String(urlError.stack || urlError);
                            runStateLoadHandlers(instance, "error");
                        }
                    } else {
                        scriptContent && (errorMsg = runScriptContent(env, instanceId, scriptContent, winId, errorMsg));
                    }
                    env.$currentScriptId$ = "";
                    webWorkerCtx.$postMessage$([ 6, winId, instanceId, errorMsg ]);
                })(msgValue);
            } else if (9 === msgType) {
                (({$winId$: $winId$, $instanceId$: $instanceId$, $refId$: $refId$, $thisArg$: $thisArg$, $args$: $args$}) => {
                    if (webWorkerRefsByRefId[$refId$]) {
                        try {
                            webWorkerRefsByRefId[$refId$].apply(deserializeFromMain($winId$, $instanceId$, [], $thisArg$), deserializeFromMain($winId$, $instanceId$, [], $args$));
                        } catch (e) {
                            console.error(e);
                        }
                    }
                })(msgValue);
            } else if (10 === msgType) {
                (({$winId$: $winId$, $forward$: $forward$, $args$: $args$}) => {
                    try {
                        let target = environments[$winId$].$window$;
                        let i = 0;
                        let l = len($forward$);
                        for (;i < l; i++) {
                            i + 1 < l ? target = target[$forward$[i]] : target[$forward$[i]].apply(target, deserializeFromMain(null, $winId$, [], $args$));
                        }
                    } catch (e) {
                        console.error(e);
                    }
                })(msgValue);
            } else if (5 === msgType) {
                createEnvironment(msgValue);
            } else if (8 === msgType) {
                if (1 !== environments[msgValue].$isInitialized$) {
                    const winId = msgValue;
                    const env = environments[winId];
                    const winType = env.$winId$ === env.$parentWinId$ ? "top" : "iframe";
                    logWorker(`Initialized ${winType} window ${normalizedWinId(winId)} environment üéâ`, winId);
                }
                environments[msgValue].$isInitialized$ = 1;
                environments[msgValue].$isLoading$ = 0;
            } else if (14 === msgType) {
                environments[msgValue].$visibilityState$ = msg[2];
            } else if (13 === msgType) {
                const $winId$ = msgValue.$winId$;
                const env = environments[$winId$];
                env.$location$.href = msgValue.url;
                !function($winId$, env, data) {
                    const history = env.$window$.history;
                    switch (data.type) {
                      case 0:
                        env.$propagateHistoryChange$ = false;
                        try {
                            history.pushState(data.state, "", data.newUrl);
                        } catch (e) {}
                        env.$propagateHistoryChange$ = true;
                        break;

                      case 1:
                        env.$propagateHistoryChange$ = false;
                        try {
                            history.replaceState(data.state, "", data.newUrl);
                        } catch (e) {}
                        env.$propagateHistoryChange$ = true;
                    }
                }(msgValue.$winId$, env, msgValue);
            } else {
                15 === msgType && ((_type, winId, instanceId, callbackName, args) => {
                    const elm = getOrCreateNodeInstance(winId, instanceId);
                    elm && "function" == typeof elm[callbackName] && elm[callbackName].apply(elm, args);
                })(...msg);
            }
        } else if (1 === msgType) {
            (initWebWorkerData => {
                const config = webWorkerCtx.$config$ = JSON.parse(initWebWorkerData.$config$);
                const locOrigin = initWebWorkerData.$origin$;
                webWorkerCtx.$importScripts$ = importScripts.bind(self);
                webWorkerCtx.$interfaces$ = initWebWorkerData.$interfaces$;
                webWorkerCtx.$libPath$ = initWebWorkerData.$libPath$;
                webWorkerCtx.$origin$ = locOrigin;
                webWorkerCtx.$postMessage$ = postMessage.bind(self);
                webWorkerCtx.$sharedDataBuffer$ = initWebWorkerData.$sharedDataBuffer$;
                webWorkerCtx.$tabId$ = initWebWorkerData.$tabId$;
                self.importScripts = void 0;
                delete self.postMessage;
                delete self.WorkerGlobalScope;
                commaSplit("resolveUrl,resolveSendBeaconRequestParameters,get,set,apply").map((configName => {
                    config[configName] && (config[configName] = new Function("return " + config[configName])());
                }));
            })(msgValue);
            webWorkerCtx.$postMessage$([ 2 ]);
        } else if (3 === msgType) {
            webWorkerCtx.$interfaces$ = [ ...webWorkerCtx.$interfaces$, ...msgValue ];
            webWorkerCtx.$isInitialized$ = 1;
            logWorker("Initialized web worker");
            webWorkerCtx.$postMessage$([ 4 ]);
            queuedEvents.length && logWorker(`Queued ready messages: ${queuedEvents.length}`);
            [ ...queuedEvents ].map(receiveMessageFromSandboxToWorker);
            queuedEvents.length = 0;
        } else {
            queuedEvents.push(ev);
        }
    };
    self.onmessage = receiveMessageFromSandboxToWorker;
    postMessage([ 0 ]);
})(self);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown-ww-sw.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
(self => {
    const WinIdKey = Symbol();
    const InstanceIdKey = Symbol();
    const InstanceDataKey = Symbol();
    const NamespaceKey = Symbol();
    const ApplyPathKey = Symbol();
    const InstanceStateKey = Symbol();
    const HookContinue = Symbol();
    const HookPrevent = Symbol();
    const webWorkerInstances = new Map;
    const webWorkerRefsByRefId = {};
    const webWorkerRefIdsByRef = new WeakMap;
    const postMessages = [];
    const webWorkerCtx = {};
    const environments = {};
    const cachedDimensions = new Map;
    const cachedStructure = new Map;
    const commaSplit = str => str.split(",");
    const partytownLibUrl = url => {
        url = webWorkerCtx.$libPath$ + url;
        if (new URL(url).origin != location.origin) {
            throw "Invalid " + url;
        }
        return url;
    };
    const getterDimensionPropNames = commaSplit("clientWidth,clientHeight,clientTop,clientLeft,innerWidth,innerHeight,offsetWidth,offsetHeight,offsetTop,offsetLeft,outerWidth,outerHeight,pageXOffset,pageYOffset,scrollWidth,scrollHeight,scrollTop,scrollLeft");
    const elementStructurePropNames = commaSplit("childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling");
    const structureChangingMethodNames = commaSplit("insertBefore,remove,removeChild,replaceChild");
    const dimensionChangingSetterNames = commaSplit("className,width,height,hidden,innerHTML,innerText,textContent,text");
    const dimensionChangingMethodNames = commaSplit("setAttribute,setAttributeNS,setProperty");
    const eventTargetMethods = commaSplit("addEventListener,dispatchEvent,removeEventListener");
    const nonBlockingMethods = eventTargetMethods.concat(dimensionChangingMethodNames, commaSplit("add,observe,remove,unobserve"));
    const IS_TAG_REG = /^[A-Z_]([A-Z0-9-]*[A-Z0-9])?$/;
    const noop = () => {};
    const len = obj => obj.length;
    const getConstructorName = obj => {
        var _a, _b, _c;
        try {
            const constructorName = null === (_a = null == obj ? void 0 : obj.constructor) || void 0 === _a ? void 0 : _a.name;
            if (constructorName) {
                return constructorName;
            }
        } catch (e) {}
        try {
            const zoneJsConstructorName = null === (_c = null === (_b = null == obj ? void 0 : obj.__zone_symbol__originalInstance) || void 0 === _b ? void 0 : _b.constructor) || void 0 === _c ? void 0 : _c.name;
            if (zoneJsConstructorName) {
                return zoneJsConstructorName;
            }
        } catch (e) {}
        return "";
    };
    const EMPTY_ARRAY = [];
    const randomId = () => Math.round(Math.random() * Number.MAX_SAFE_INTEGER).toString(36);
    const SCRIPT_TYPE = "text/partytown";
    const defineProperty = (obj, memberName, descriptor) => Object.defineProperty(obj, memberName, {
        ...descriptor,
        configurable: true
    });
    const defineConstructorName = (Cstr, value) => defineProperty(Cstr, "name", {
        value: value
    });
    const definePrototypeProperty = (Cstr, memberName, descriptor) => defineProperty(Cstr.prototype, memberName, descriptor);
    const definePrototypePropertyDescriptor = (Cstr, propertyDescriptorMap) => Object.defineProperties(Cstr.prototype, propertyDescriptorMap);
    const definePrototypeValue = (Cstr, memberName, value) => definePrototypeProperty(Cstr, memberName, {
        value: value,
        writable: true
    });
    Object.freeze((obj => {
        const properties = new Set;
        let currentObj = obj;
        do {
            Object.getOwnPropertyNames(currentObj).forEach((item => {
                "function" == typeof currentObj[item] && properties.add(item);
            }));
        } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
        return Array.from(properties);
    })([]));
    function testIfMustLoadScriptOnMainThread(config, value) {
        var _a, _b;
        return null !== (_b = null === (_a = config.loadScriptsOnMainThread) || void 0 === _a ? void 0 : _a.map((([type, value]) => new RegExp("string" === type ? function(input) {
            return input.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        }(value) : value))).some((regexp => regexp.test(value)))) && void 0 !== _b && _b;
    }
    const hasInstanceStateValue = (instance, stateKey) => stateKey in instance[InstanceStateKey];
    const getInstanceStateValue = (instance, stateKey) => instance[InstanceStateKey][stateKey];
    const setInstanceStateValue = (instance, stateKey, stateValue) => instance[InstanceStateKey][stateKey] = stateValue;
    const setWorkerRef = (ref, refId) => {
        if (!(refId = webWorkerRefIdsByRef.get(ref))) {
            webWorkerRefIdsByRef.set(ref, refId = randomId());
            webWorkerRefsByRefId[refId] = ref;
        }
        return refId;
    };
    const getOrCreateNodeInstance = (winId, instanceId, nodeName, namespace, instance, prevInstanceId) => {
        instance = webWorkerInstances.get(instanceId);
        if (!instance && nodeName && environments[winId]) {
            const prevInstance = webWorkerInstances.get(prevInstanceId || "");
            instance = environments[winId].$createNode$(nodeName, instanceId, namespace, prevInstance);
            webWorkerInstances.set(instanceId, instance);
        }
        return instance;
    };
    const definePrototypeNodeType = (Cstr, nodeType) => definePrototypeValue(Cstr, "nodeType", nodeType);
    const cachedTreeProps = (Cstr, treeProps) => treeProps.map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            let cacheKey = getInstanceCacheKey(this, propName);
            let result = cachedStructure.get(cacheKey);
            if (!result) {
                result = getter(this, [ propName ]);
                cachedStructure.set(cacheKey, result);
            }
            return result;
        }
    })));
    const getInstanceCacheKey = (instance, memberName, args) => [ instance[WinIdKey], instance[InstanceIdKey], memberName, ...(args || EMPTY_ARRAY).map((arg => String(arg && arg[WinIdKey] ? arg[InstanceIdKey] : arg))) ].join(".");
    const cachedProps = (Cstr, propNames) => commaSplit(propNames).map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            hasInstanceStateValue(this, propName) || setInstanceStateValue(this, propName, getter(this, [ propName ]));
            return getInstanceStateValue(this, propName);
        },
        set(val) {
            getInstanceStateValue(this, propName) !== val && setter(this, [ propName ], val);
            setInstanceStateValue(this, propName, val);
        }
    })));
    const cachedDimensionProps = Cstr => getterDimensionPropNames.map((propName => definePrototypeProperty(Cstr, propName, {
        get() {
            const dimension = cachedDimensions.get(getInstanceCacheKey(this, propName));
            if ("number" == typeof dimension) {
                return dimension;
            }
            const groupedDimensions = getter(this, [ propName ], getterDimensionPropNames);
            if (groupedDimensions && "object" == typeof groupedDimensions) {
                Object.entries(groupedDimensions).map((([dimensionPropName, value]) => cachedDimensions.set(getInstanceCacheKey(this, dimensionPropName), value)));
                return groupedDimensions[propName];
            }
            return groupedDimensions;
        }
    })));
    const cachedDimensionMethods = (Cstr, dimensionMethodNames) => dimensionMethodNames.map((methodName => {
        Cstr.prototype[methodName] = function(...args) {
            let cacheKey = getInstanceCacheKey(this, methodName, args);
            let dimensions = cachedDimensions.get(cacheKey);
            if (!dimensions) {
                dimensions = callMethod(this, [ methodName ], args);
                cachedDimensions.set(cacheKey, dimensions);
            }
            return dimensions;
        };
    }));
    const serializeForMain = ($winId$, $instanceId$, value, added, type) => void 0 !== value && (type = typeof value) ? "string" === type || "boolean" === type || "number" === type || null == value ? [ 0, value ] : "function" === type ? [ 4, {
        $winId$: $winId$,
        $instanceId$: $instanceId$,
        $refId$: setWorkerRef(value)
    } ] : (added = added || new Set) && Array.isArray(value) ? added.has(value) ? [ 1, [] ] : added.add(value) && [ 1, value.map((v => serializeForMain($winId$, $instanceId$, v, added))) ] : "object" === type ? value[InstanceIdKey] ? [ 3, [ value[WinIdKey], value[InstanceIdKey] ] ] : value instanceof Event ? [ 5, serializeObjectForMain($winId$, $instanceId$, value, false, added) ] : supportsTrustedHTML && value instanceof TrustedHTML ? [ 0, value.toString() ] : value instanceof ArrayBuffer ? [ 8, value ] : ArrayBuffer.isView(value) ? [ 9, value.buffer, getConstructorName(value) ] : [ 2, serializeObjectForMain($winId$, $instanceId$, value, true, added) ] : void 0 : value;
    const supportsTrustedHTML = "undefined" != typeof TrustedHTML;
    const serializeObjectForMain = (winId, instanceId, obj, includeFunctions, added, serializedObj, propName, propValue) => {
        serializedObj = {};
        if (!added.has(obj)) {
            added.add(obj);
            for (propName in obj) {
                propValue = obj[propName];
                (includeFunctions || "function" != typeof propValue) && (serializedObj[propName] = serializeForMain(winId, instanceId, propValue, added));
            }
        }
        return serializedObj;
    };
    const serializeInstanceForMain = (instance, value) => instance ? serializeForMain(instance[WinIdKey], instance[InstanceIdKey], value) : [ 0, value ];
    const deserializeFromMain = (winId, instanceId, applyPath, serializedValueTransfer, serializedType, serializedValue, obj, key) => {
        if (serializedValueTransfer) {
            serializedType = serializedValueTransfer[0];
            serializedValue = serializedValueTransfer[1];
            if (0 === serializedType || 11 === serializedType || 12 === serializedType) {
                return serializedValue;
            }
            if (4 === serializedType) {
                return deserializeRefFromMain(applyPath, serializedValue);
            }
            if (6 === serializedType) {
                return winId && applyPath.length > 0 ? (...args) => callMethod(environments[winId].$window$, applyPath, args, 1) : noop;
            }
            if (3 === serializedType) {
                return getOrCreateSerializedInstance(serializedValue);
            }
            if (7 === serializedType) {
                return new NodeList(serializedValue.map(getOrCreateSerializedInstance));
            }
            if (10 === serializedType) {
                return new Attr(serializedValue);
            }
            if (1 === serializedType) {
                return serializedValue.map((v => deserializeFromMain(winId, instanceId, applyPath, v)));
            }
            if (14 === serializedType) {
                return new CustomError(serializedValue);
            }
            obj = {};
            for (key in serializedValue) {
                obj[key] = deserializeFromMain(winId, instanceId, [ ...applyPath, key ], serializedValue[key]);
            }
            if (13 === serializedType) {
                return new environments[winId].$window$.CSSStyleDeclaration(winId, instanceId, applyPath, obj);
            }
            if (5 === serializedType) {
                if ("message" === obj.type && obj.origin) {
                    let postMessageKey = JSON.stringify(obj.data);
                    let postMessageData = postMessages.find((pm => pm.$data$ === postMessageKey));
                    let env;
                    if (postMessageData) {
                        env = environments[postMessageData.$winId$];
                        if (env) {
                            obj.source = env.$window$;
                            obj.origin = env.$location$.origin;
                        }
                    }
                }
                return new Proxy(new Event(obj.type, obj), {
                    get: (target, propName) => propName in obj ? obj[propName] : "function" == typeof target[String(propName)] ? noop : target[String(propName)]
                });
            }
            if (2 === serializedType) {
                return obj;
            }
        }
    };
    const getOrCreateSerializedInstance = ([winId, instanceId, nodeName, prevInstanceId]) => instanceId === winId && environments[winId] ? environments[winId].$window$ : getOrCreateNodeInstance(winId, instanceId, nodeName, void 0, void 0, prevInstanceId);
    const deserializeRefFromMain = (applyPath, {$winId$: $winId$, $instanceId$: $instanceId$, $nodeName$: $nodeName$, $refId$: $refId$}) => {
        webWorkerRefsByRefId[$refId$] || webWorkerRefIdsByRef.set(webWorkerRefsByRefId[$refId$] = function(...args) {
            const instance = getOrCreateNodeInstance($winId$, $instanceId$, $nodeName$);
            return callMethod(instance, applyPath, args);
        }, $refId$);
        return webWorkerRefsByRefId[$refId$];
    };
    class CustomError extends Error {
        constructor(errorObject) {
            super(errorObject.message);
            this.name = errorObject.name;
            this.message = errorObject.message;
            this.stack = errorObject.stack;
        }
    }
    class NodeList {
        constructor(nodes) {
            (this._ = nodes).map(((node, index) => this[index] = node));
        }
        entries() {
            return this._.entries();
        }
        forEach(cb, thisArg) {
            this._.map(cb, thisArg);
        }
        item(index) {
            return this[index];
        }
        keys() {
            return this._.keys();
        }
        get length() {
            return len(this._);
        }
        values() {
            return this._.values();
        }
        [Symbol.iterator]() {
            return this._[Symbol.iterator]();
        }
    }
    const Attr = class {
        constructor(serializedAttr) {
            this.name = serializedAttr[0];
            this.value = serializedAttr[1];
        }
        get nodeName() {
            return this.name;
        }
        get nodeType() {
            return 2;
        }
    };
    const warnCrossOrigin = (apiType, apiName, env) => console.warn(`Partytown unable to ${apiType} cross-origin ${apiName}: ` + env.$location$);
    const logWorker = (msg, winId) => {
        try {
            const config = webWorkerCtx.$config$;
            if (config.logStackTraces) {
                const frames = (new Error).stack.split("\n");
                const i = frames.findIndex((f => f.includes("logWorker")));
                msg += "\n" + frames.slice(i + 1).join("\n");
            }
            let prefix;
            let color;
            if (winId) {
                prefix = `Worker (${normalizedWinId(winId)}) üéâ`;
                color = winColor(winId);
            } else {
                prefix = self.name;
                color = "#9844bf";
            }
            if (webWorkerCtx.lastLog !== msg) {
                webWorkerCtx.lastLog = msg;
                console.debug.apply(console, [ `%c${prefix}`, `background: ${color}; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;`, msg ]);
            }
        } catch (e) {}
    };
    const winIds = [];
    const normalizedWinId = winId => {
        winIds.includes(winId) || winIds.push(winId);
        return winIds.indexOf(winId) + 1;
    };
    const winColor = winId => {
        const colors = [ "#00309e", "#ea3655", "#eea727" ];
        const index = normalizedWinId(winId) - 1;
        return colors[index] || colors[colors.length - 1];
    };
    const getTargetProp = (target, applyPath) => {
        let n = "";
        if (target) {
            const cstrName = getConstructorName(target);
            if ("Window" === cstrName) {
                n = "";
            } else if ("string" == typeof target[InstanceDataKey]) {
                let nodeName = target[InstanceDataKey];
                n = "#text" === nodeName ? "textNode." : "#comment" === nodeName ? "commentNode." : "#document" === nodeName ? "document." : "html" === nodeName ? "doctype." : nodeName.toLowerCase() + ".";
            } else {
                n = "nodeType" in target && 2 === target.nodeType ? "attributes." : "CanvasRenderingContext2D" === cstrName ? "context2D." : "CanvasRenderingContextWebGL" === cstrName ? "contextWebGL." : "CSSStyleDeclaration" === cstrName ? "style." : "MutationObserver" === cstrName ? "mutationObserver." : "NamedNodeMap" === cstrName ? "namedNodeMap." : "ResizeObserver" === cstrName ? "resizeObserver." : cstrName.substring(0, 1).toLowerCase() + cstrName.substring(1) + ".";
            }
            target[ApplyPathKey] && target[ApplyPathKey].length && (n += [ ...target[ApplyPathKey] ].join(".") + ".");
        }
        if (applyPath.length > 1) {
            const first = applyPath.slice(0, applyPath.length - 1);
            const last = applyPath[applyPath.length - 1];
            if (!isNaN(last)) {
                return n + `${first.join(".")}[${last}]`;
            }
        }
        return n + applyPath.join(".");
    };
    const getLogValue = (applyPath, v) => {
        const type = typeof v;
        if (void 0 === v) {
            return "undefined";
        }
        if ("boolean" === type || "number" === type || null == v) {
            return JSON.stringify(v);
        }
        if ("string" === type) {
            return applyPath.includes("cookie") ? JSON.stringify(v.slice(0, 10) + "...") : JSON.stringify(v.length > 50 ? v.slice(0, 40) + "..." : v);
        }
        if (Array.isArray(v)) {
            return `[${v.map(getLogValue).join(", ")}]`;
        }
        if ("object" === type) {
            const instanceId = v[InstanceIdKey];
            const cstrName = getConstructorName(v);
            if ("string" == typeof instanceId) {
                if ("Window" === cstrName) {
                    return "window";
                }
                if ("string" == typeof v[InstanceDataKey]) {
                    if (1 === v.nodeType) {
                        return `<${v[InstanceDataKey].toLowerCase()}>`;
                    }
                    if (10 === v.nodeType) {
                        return `<!DOCTYPE ${v[InstanceDataKey]}>`;
                    }
                    if (v.nodeType <= 11) {
                        return v[InstanceDataKey];
                    }
                }
                return "¬Ø\\_(„ÉÑ)_/¬Ø instance obj";
            }
            return v[Symbol.iterator] ? `[${Array.from(v).map((i => getLogValue(applyPath, i))).join(", ")}]` : "value" in v ? "string" == typeof v.value ? `"${v.value}"` : objToString(v.value) : objToString(v);
        }
        return (v => "object" == typeof v && v && v.then)(v) ? "Promise" : "function" === type ? `∆í() ${v.name || ""}`.trim() : `¬Ø\\_(„ÉÑ)_/¬Ø ${String(v)}`.trim();
    };
    const objToString = obj => {
        const s = [];
        for (let key in obj) {
            const value = obj[key];
            const type = typeof value;
            "string" === type ? s.push(`${key}: "${value}"`) : "function" === type ? s.push(`${key}: ∆í`) : Array.isArray(type) ? s.push(`${key}: [..]`) : "object" === type && value ? s.push(`${key}: {..}`) : s.push(`${key}: ${String(value)}`);
        }
        let str = s.join(", ");
        str.length > 200 && (str = str.substring(0, 200) + "..");
        return `{ ${str} }`;
    };
    const logDimensionCacheClearStyle = (target, propName) => {
        (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logSetters) && logWorker(`Dimension cache cleared from style.${propName} setter`, target[WinIdKey]);
    };
    const logDimensionCacheClearMethod = (target, methodName) => {
        (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logCalls) && logWorker(`Dimension cache cleared from method call ${methodName}()`, target[WinIdKey]);
    };
    const taskQueue = [];
    const queue = (instance, $applyPath$, callType, $assignInstanceId$, $groupedGetters$, buffer) => {
        if (instance[ApplyPathKey]) {
            taskQueue.push({
                $winId$: instance[WinIdKey],
                $instanceId$: instance[InstanceIdKey],
                $applyPath$: [ ...instance[ApplyPathKey], ...$applyPath$ ],
                $assignInstanceId$: $assignInstanceId$,
                $groupedGetters$: $groupedGetters$
            });
            taskQueue[len(taskQueue) - 1].$debug$ = ((target, applyPath, callType) => {
                let m = getTargetProp(target, applyPath);
                1 === callType ? m += " (blocking)" : 2 === callType ? m += " (non-blocking)" : 3 === callType && (m += " (non-blocking, no-side-effect)");
                return m.trim();
            })(instance, $applyPath$, callType);
            buffer && 3 !== callType && console.error("buffer must be sent NonBlockingNoSideEffect");
            if (3 === callType) {
                webWorkerCtx.$postMessage$([ 12, {
                    $msgId$: randomId(),
                    $tasks$: [ ...taskQueue ]
                } ], buffer ? [ buffer instanceof ArrayBuffer ? buffer : buffer.buffer ] : void 0);
                taskQueue.length = 0;
            } else if (1 === callType) {
                return sendToMain(true);
            }
            webWorkerCtx.$asyncMsgTimer$ = setTimeout(sendToMain, 20);
        }
    };
    const sendToMain = isBlocking => {
        clearTimeout(webWorkerCtx.$asyncMsgTimer$);
        if (len(taskQueue)) {
            webWorkerCtx.$config$.logMainAccess && logWorker(`Main access, tasks sent: ${taskQueue.length}`);
            const endTask = taskQueue[len(taskQueue) - 1];
            const accessReq = {
                $msgId$: `${randomId()}.${webWorkerCtx.$tabId$}`,
                $tasks$: [ ...taskQueue ]
            };
            taskQueue.length = 0;
            if (isBlocking) {
                const accessRsp = ((webWorkerCtx, accessReq) => {
                    const xhr = new XMLHttpRequest;
                    xhr.open("POST", partytownLibUrl("proxytown"), false);
                    xhr.send(JSON.stringify(accessReq));
                    return JSON.parse(xhr.responseText);
                })(0, accessReq);
                const isPromise = accessRsp.$isPromise$;
                const rtnValue = deserializeFromMain(endTask.$winId$, endTask.$instanceId$, endTask.$applyPath$, accessRsp.$rtnValue$);
                if (accessRsp.$error$) {
                    if (isPromise) {
                        return Promise.reject(accessRsp.$error$);
                    }
                    throw new Error(accessRsp.$error$);
                }
                return isPromise ? Promise.resolve(rtnValue) : rtnValue;
            }
            webWorkerCtx.$postMessage$([ 12, accessReq ]);
        }
    };
    const getter = (instance, applyPath, groupedGetters, rtnValue) => {
        if (webWorkerCtx.$config$.get) {
            rtnValue = webWorkerCtx.$config$.get(createHookOptions(instance, applyPath));
            if (rtnValue !== HookContinue) {
                return rtnValue;
            }
        }
        rtnValue = queue(instance, applyPath, 1, void 0, groupedGetters);
        ((target, applyPath, rtnValue, restrictedToWorker = false, groupedGetters = false) => {
            if (webWorkerCtx.$config$.logGetters) {
                try {
                    const msg = `Get ${getTargetProp(target, applyPath)}, returned: ${getLogValue(applyPath, rtnValue)}${restrictedToWorker ? " (restricted to worker)" : ""}${groupedGetters ? " (grouped getter)" : ""}`;
                    msg.includes("Symbol(") || logWorker(msg, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, rtnValue, false, !!groupedGetters);
        return rtnValue;
    };
    const setter = (instance, applyPath, value, hookSetterValue) => {
        if (webWorkerCtx.$config$.set) {
            hookSetterValue = webWorkerCtx.$config$.set({
                value: value,
                prevent: HookPrevent,
                ...createHookOptions(instance, applyPath)
            });
            if (hookSetterValue === HookPrevent) {
                return;
            }
            hookSetterValue !== HookContinue && (value = hookSetterValue);
        }
        if (dimensionChangingSetterNames.some((s => applyPath.includes(s)))) {
            cachedDimensions.clear();
            ((target, propName) => {
                (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logSetters) && logWorker(`Dimension cache cleared from setter "${propName}"`, target[WinIdKey]);
            })(instance, applyPath[applyPath.length - 1]);
        }
        applyPath = [ ...applyPath, serializeInstanceForMain(instance, value), 0 ];
        ((target, applyPath, value, restrictedToWorker = false) => {
            if (webWorkerCtx.$config$.logSetters) {
                try {
                    applyPath = applyPath.slice(0, applyPath.length - 2);
                    logWorker(`Set ${getTargetProp(target, applyPath)}, value: ${getLogValue(applyPath, value)}${restrictedToWorker ? " (restricted to worker)" : ""}`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, value);
        queue(instance, applyPath, 2);
    };
    const callMethod = (instance, applyPath, args, callType, assignInstanceId, buffer, rtnValue, methodName) => {
        if (webWorkerCtx.$config$.apply) {
            rtnValue = webWorkerCtx.$config$.apply({
                args: args,
                ...createHookOptions(instance, applyPath)
            });
            if (rtnValue !== HookContinue) {
                return rtnValue;
            }
        }
        methodName = applyPath[len(applyPath) - 1];
        applyPath = [ ...applyPath, serializeInstanceForMain(instance, args) ];
        callType = callType || (nonBlockingMethods.includes(methodName) ? 2 : 1);
        if ("setAttribute" === methodName && hasInstanceStateValue(instance, args[0])) {
            setInstanceStateValue(instance, args[0], args[1]);
        } else if (structureChangingMethodNames.includes(methodName)) {
            cachedDimensions.clear();
            cachedStructure.clear();
            ((target, methodName) => {
                (webWorkerCtx.$config$.logGetters || webWorkerCtx.$config$.logCalls) && logWorker(`Dimension and DOM structure cache cleared from method call ${methodName}()`, target[WinIdKey]);
            })(instance, methodName);
        } else if (dimensionChangingMethodNames.includes(methodName)) {
            callType = 2;
            cachedDimensions.clear();
            logDimensionCacheClearMethod(instance, methodName);
        }
        rtnValue = queue(instance, applyPath, callType, assignInstanceId, void 0, buffer);
        ((target, applyPath, args, rtnValue) => {
            if (webWorkerCtx.$config$.logCalls) {
                try {
                    applyPath = applyPath.slice(0, applyPath.length - 1);
                    logWorker(`Call ${getTargetProp(target, applyPath)}(${args.map((v => getLogValue(applyPath, v))).join(", ")}), returned: ${getLogValue(applyPath, rtnValue)}`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, applyPath, args, rtnValue);
        return rtnValue;
    };
    const constructGlobal = (instance, cstrName, args) => {
        ((target, cstrName, args) => {
            if (webWorkerCtx.$config$.logCalls) {
                try {
                    logWorker(`Construct new ${cstrName}(${args.map((v => getLogValue([], v))).join(", ")})`, target[WinIdKey]);
                } catch (e) {}
            }
        })(instance, cstrName, args);
        queue(instance, [ 1, cstrName, serializeInstanceForMain(instance, args) ], 1);
    };
    const createHookOptions = (instance, applyPath) => ({
        name: applyPath.join("."),
        continue: HookContinue,
        nodeName: instance[InstanceDataKey],
        constructor: getConstructorName(instance),
        instance: instance,
        window: environments[instance[WinIdKey]].$window$
    });
    const addStorageApi = (win, storageName, isSameOrigin, env) => {
        let storage = {
            getItem(key) {
                if (isSameOrigin) {
                    return callMethod(win, [ storageName, "getItem" ], [ key ], 1);
                }
                warnCrossOrigin("get", storageName, env);
            },
            setItem(key, value) {
                isSameOrigin ? callMethod(win, [ storageName, "setItem" ], [ key, value ], 1) : warnCrossOrigin("set", storageName, env);
            },
            removeItem(key) {
                isSameOrigin ? callMethod(win, [ storageName, "removeItem" ], [ key ], 1) : warnCrossOrigin("remove", storageName, env);
            },
            key(index) {
                if (isSameOrigin) {
                    return callMethod(win, [ storageName, "key" ], [ index ], 1);
                }
                warnCrossOrigin("key", storageName, env);
            },
            clear() {
                isSameOrigin ? callMethod(win, [ storageName, "clear" ], EMPTY_ARRAY, 1) : warnCrossOrigin("clear", storageName, env);
            },
            get length() {
                if (isSameOrigin) {
                    return getter(win, [ storageName, "length" ]);
                }
                warnCrossOrigin("length", storageName, env);
            }
        };
        win[storageName] = new Proxy(storage, {
            get: (target, key) => Reflect.has(target, key) ? Reflect.get(target, key) : target.getItem(key),
            set(target, key, value) {
                target.setItem(key, value);
                return true;
            },
            has: (target, key) => !!Reflect.has(target, key) || "string" == typeof key && null !== target.getItem(key),
            deleteProperty(target, key) {
                target.removeItem(key);
                return true;
            }
        });
    };
    const createCSSStyleDeclarationCstr = (win, WorkerBase, cstrName) => {
        win[cstrName] = defineConstructorName(class extends WorkerBase {
            constructor(winId, instanceId, applyPath, styles) {
                super(winId, instanceId, applyPath, styles || {});
                return new Proxy(this, {
                    get(target, propName) {
                        if (target[propName]) {
                            return target[propName];
                        }
                        target[propName] || "string" != typeof propName || target[InstanceDataKey][propName] || (target[InstanceDataKey][propName] = getter(target, [ propName ]));
                        return target[InstanceDataKey][propName];
                    },
                    set(target, propName, propValue) {
                        target[InstanceDataKey][propName] = propValue;
                        setter(target, [ propName ], propValue);
                        logDimensionCacheClearStyle(target, propName);
                        cachedDimensions.clear();
                        return true;
                    }
                });
            }
            setProperty(...args) {
                this[InstanceDataKey][args[0]] = args[1];
                callMethod(this, [ "setProperty" ], args, 2);
                logDimensionCacheClearStyle(this, args[0]);
                cachedDimensions.clear();
            }
            getPropertyValue(propName) {
                return this[propName];
            }
            removeProperty(propName) {
                let value = this[InstanceDataKey][propName];
                callMethod(this, [ "removeProperty" ], [ propName ], 2);
                logDimensionCacheClearStyle(this, propName);
                cachedDimensions.clear();
                this[InstanceDataKey][propName] = void 0;
                return value;
            }
        }, cstrName);
    };
    const createCSSStyleSheetConstructor = (win, cssStyleSheetCstrName) => {
        win[cssStyleSheetCstrName] = defineConstructorName(class {
            constructor(ownerNode) {
                this.ownerNode = ownerNode;
            }
            get cssRules() {
                const ownerNode = this.ownerNode;
                return new Proxy({}, {
                    get(target, propKey) {
                        const propName = String(propKey);
                        return "item" === propName ? index => getCssRule(ownerNode, index) : "length" === propName ? getCssRules(ownerNode).length : isNaN(propName) ? target[propKey] : getCssRule(ownerNode, propName);
                    }
                });
            }
            insertRule(ruleText, index) {
                const cssRules = getCssRules(this.ownerNode);
                index = void 0 === index ? 0 : index;
                if (index >= 0 && index <= cssRules.length) {
                    callMethod(this.ownerNode, [ "sheet", "insertRule" ], [ ruleText, index ], 2);
                    cssRules.splice(index, 0, 0);
                }
                logDimensionCacheClearMethod(this.ownerNode, "insertRule");
                cachedDimensions.clear();
                return index;
            }
            deleteRule(index) {
                callMethod(this.ownerNode, [ "sheet", "deleteRule" ], [ index ], 2);
                getCssRules(this.ownerNode).splice(index, 1);
                logDimensionCacheClearMethod(this.ownerNode, "deleteRule");
                cachedDimensions.clear();
            }
            get type() {
                return "text/css";
            }
        }, cssStyleSheetCstrName);
        const HTMLStyleDescriptorMap = {
            sheet: {
                get() {
                    return new win[cssStyleSheetCstrName](this);
                }
            }
        };
        definePrototypePropertyDescriptor(win.HTMLStyleElement, HTMLStyleDescriptorMap);
    };
    const getCssRules = (ownerNode, cssRules) => {
        cssRules = getInstanceStateValue(ownerNode, 2);
        if (!cssRules) {
            cssRules = getter(ownerNode, [ "sheet", "cssRules" ]);
            setInstanceStateValue(ownerNode, 2, cssRules);
        }
        return cssRules;
    };
    const getCssRule = (ownerNode, index, cssRules) => {
        cssRules = getCssRules(ownerNode);
        0 === cssRules[index] && (cssRules[index] = getter(ownerNode, [ "sheet", "cssRules", parseInt(index, 10) ]));
        return cssRules[index];
    };
    const runScriptContent = (env, instanceId, scriptContent, winId, errorMsg) => {
        try {
            webWorkerCtx.$config$.logScriptExecution && logWorker(`Execute script: ${scriptContent.substring(0, 100).split("\n").map((l => l.trim())).join(" ").trim().substring(0, 60)}...`, winId);
            env.$currentScriptId$ = instanceId;
            run(env, scriptContent);
        } catch (contentError) {
            console.error(scriptContent, contentError);
            errorMsg = String(contentError.stack || contentError);
        }
        env.$currentScriptId$ = "";
        return errorMsg;
    };
    const run = (env, scriptContent, scriptUrl) => {
        env.$runWindowLoadEvent$ = 1;
        let sourceWithReplacedThis = ((scriptContent, newThis) => scriptContent.replace(/([a-zA-Z0-9_$\.\'\"\`])?(\.\.\.)?this(?![a-zA-Z0-9_$:])/g, ((match, p1, p2) => {
            const prefix = (p1 || "") + (p2 || "");
            return null != p1 ? prefix + "this" : prefix + newThis;
        })))(scriptContent, "(thi$(this)?window:this)");
        scriptContent = `with(this){${sourceWithReplacedThis.replace(/\/\/# so/g, "//Xso")}\n;function thi$(t){return t===this}};${(webWorkerCtx.$config$.globalFns || []).filter((globalFnName => /[a-zA-Z_$][0-9a-zA-Z_$]*/.test(globalFnName))).map((g => `(typeof ${g}=='function'&&(this.${g}=${g}))`)).join(";")};` + (scriptUrl ? "\n//# sourceURL=" + scriptUrl : "");
        env.$isSameOrigin$ || (scriptContent = scriptContent.replace(/.postMessage\(/g, `.postMessage('${env.$winId$}',`));
        new Function(scriptContent).call(env.$window$);
        env.$runWindowLoadEvent$ = 0;
    };
    const runStateLoadHandlers = (instance, type, handlers) => {
        handlers = getInstanceStateValue(instance, type);
        handlers && setTimeout((() => handlers.map((cb => cb({
            type: type
        })))));
    };
    const resolveBaseLocation = (env, baseLocation) => {
        baseLocation = env.$location$;
        while (!baseLocation.host) {
            env = environments[env.$parentWinId$];
            baseLocation = env.$location$;
            if (env.$winId$ === env.$parentWinId$) {
                break;
            }
        }
        return baseLocation;
    };
    const resolveToUrl = (env, url, type, baseLocation, resolvedUrl, configResolvedUrl) => {
        baseLocation = resolveBaseLocation(env, baseLocation);
        resolvedUrl = new URL(url || "", baseLocation);
        if (type && webWorkerCtx.$config$.resolveUrl) {
            configResolvedUrl = webWorkerCtx.$config$.resolveUrl(resolvedUrl, baseLocation, type);
            if (configResolvedUrl) {
                return configResolvedUrl;
            }
        }
        return resolvedUrl;
    };
    const resolveUrl = (env, url, type) => resolveToUrl(env, url, type) + "";
    const resolveSendBeaconRequestParameters = (env, url) => {
        const baseLocation = resolveBaseLocation(env);
        const resolvedUrl = new URL(url || "", baseLocation);
        if (webWorkerCtx.$config$.resolveSendBeaconRequestParameters) {
            const configResolvedParams = webWorkerCtx.$config$.resolveSendBeaconRequestParameters(resolvedUrl, baseLocation);
            if (configResolvedParams) {
                return configResolvedParams;
            }
        }
        return {};
    };
    const getPartytownScript = () => `<script src="${partytownLibUrl("partytown.js?v=0.10.3-dev1734732935152")}"><\/script>`;
    const createImageConstructor = env => class HTMLImageElement {
        constructor() {
            this.s = "";
            this.l = [];
            this.e = [];
            this.style = {};
        }
        get src() {
            return this.s;
        }
        set src(src) {
            webWorkerCtx.$config$.logImageRequests && logWorker(`Image() request: ${resolveUrl(env, src, "image")}`, env.$winId$);
            this.s = src;
            fetch(resolveUrl(env, src, "image"), {
                mode: "no-cors",
                credentials: "include",
                keepalive: true
            }).then((rsp => {
                rsp.ok || 0 === rsp.status ? this.l.map((cb => cb({
                    type: "load"
                }))) : this.e.map((cb => cb({
                    type: "error"
                })));
            }), (() => this.e.forEach((cb => cb({
                type: "error"
            })))));
        }
        addEventListener(eventName, cb) {
            "load" === eventName && this.l.push(cb);
            "error" === eventName && this.e.push(cb);
        }
        removeEventListener(eventName, cb) {
            "load" === eventName && (this.l = this.l.filter((fn => fn !== cb)));
            "error" === eventName && (this.e = this.e.filter((fn => fn !== cb)));
        }
        get onload() {
            return this.l[0];
        }
        set onload(cb) {
            this.l = [ cb ];
        }
        get onerror() {
            return this.e[0];
        }
        set onerror(cb) {
            this.e = [ cb ];
        }
    };
    const HTMLSrcElementDescriptorMap = {
        addEventListener: {
            value(...args) {
                const eventName = args[0];
                const callbacks = getInstanceStateValue(this, eventName) || [];
                callbacks.push(args[1]);
                setInstanceStateValue(this, eventName, callbacks);
            }
        },
        async: {
            get: noop,
            set: noop
        },
        defer: {
            get: noop,
            set: noop
        },
        onload: {
            get() {
                let callbacks = getInstanceStateValue(this, "load");
                return callbacks && callbacks[0] || null;
            },
            set(cb) {
                setInstanceStateValue(this, "load", cb ? [ cb ] : null);
            }
        },
        onerror: {
            get() {
                let callbacks = getInstanceStateValue(this, "error");
                return callbacks && callbacks[0] || null;
            },
            set(cb) {
                setInstanceStateValue(this, "error", cb ? [ cb ] : null);
            }
        },
        getAttribute: {
            value(attrName) {
                return "src" === attrName ? this.src : callMethod(this, [ "getAttribute" ], [ attrName ]);
            }
        },
        setAttribute: {
            value(attrName, attrValue) {
                scriptAttrPropNames.includes(attrName) ? this[attrName] = attrValue : callMethod(this, [ "setAttribute" ], [ attrName, attrValue ]);
            }
        }
    };
    const scriptAttrPropNames = commaSplit("src,type");
    const patchHTMLScriptElement = (WorkerHTMLScriptElement, env) => {
        const HTMLScriptDescriptorMap = {
            innerHTML: innerHTMLDescriptor,
            innerText: innerHTMLDescriptor,
            src: {
                get() {
                    return getInstanceStateValue(this, 4) || "";
                },
                set(url) {
                    const orgUrl = resolveUrl(env, url, null);
                    const config = webWorkerCtx.$config$;
                    url = resolveUrl(env, url, "script");
                    setInstanceStateValue(this, 4, url);
                    setter(this, [ "src" ], url);
                    orgUrl !== url && setter(this, [ "dataset", "ptsrc" ], orgUrl);
                    if (this.type) {
                        const shouldExecuteScriptViaMainThread = testIfMustLoadScriptOnMainThread(config, url);
                        shouldExecuteScriptViaMainThread && setter(this, [ "type" ], "text/javascript");
                    }
                }
            },
            text: innerHTMLDescriptor,
            textContent: innerHTMLDescriptor,
            type: {
                get() {
                    return getter(this, [ "type" ]);
                },
                set(type) {
                    if (!isScriptJsType(type)) {
                        setInstanceStateValue(this, 5, type);
                        setter(this, [ "type" ], type);
                    }
                }
            },
            ...HTMLSrcElementDescriptorMap
        };
        definePrototypePropertyDescriptor(WorkerHTMLScriptElement, HTMLScriptDescriptorMap);
    };
    const innerHTMLDescriptor = {
        get() {
            const type = getter(this, [ "type" ]);
            if (isScriptJsType(type)) {
                const scriptContent = getInstanceStateValue(this, 3);
                if (scriptContent) {
                    return scriptContent;
                }
            }
            return getter(this, [ "innerHTML" ]) || "";
        },
        set(scriptContent) {
            setInstanceStateValue(this, 3, scriptContent);
        }
    };
    const isScriptJsType = scriptType => !scriptType || "text/javascript" === scriptType;
    const createNodeCstr = (win, env, WorkerBase) => {
        const config = webWorkerCtx.$config$;
        const WorkerNode = defineConstructorName(class extends WorkerBase {
            appendChild(node) {
                return this.insertBefore(node, null);
            }
            get href() {}
            set href(_) {}
            insertBefore(newNode, referenceNode) {
                const winId = newNode[WinIdKey] = this[WinIdKey];
                const instanceId = newNode[InstanceIdKey];
                const nodeName = newNode[InstanceDataKey];
                const isScript = "SCRIPT" === nodeName;
                const isIFrame = "IFRAME" === nodeName;
                if (isScript) {
                    const scriptContent = getInstanceStateValue(newNode, 3);
                    const scriptType = getInstanceStateValue(newNode, 5);
                    if (scriptContent) {
                        if (isScriptJsType(scriptType)) {
                            const scriptId = newNode.id;
                            const loadOnMainThread = scriptId && testIfMustLoadScriptOnMainThread(config, scriptId);
                            if (loadOnMainThread) {
                                setter(newNode, [ "type" ], "text/javascript");
                            } else {
                                const errorMsg = runScriptContent(env, instanceId, scriptContent, winId, "");
                                const datasetType = errorMsg ? "pterror" : "ptid";
                                const datasetValue = errorMsg || instanceId;
                                setter(newNode, [ "type" ], "text/partytown-x");
                                setter(newNode, [ "dataset", datasetType ], datasetValue);
                            }
                        }
                        setter(newNode, [ "innerHTML" ], scriptContent);
                    }
                }
                callMethod(this, [ "insertBefore" ], [ newNode, referenceNode ], 2);
                if (isIFrame) {
                    const src = getInstanceStateValue(newNode, 0);
                    if (src && src.startsWith("javascript:")) {
                        const scriptContent = src.split("javascript:")[1];
                        runScriptContent(env, instanceId, scriptContent, winId, "");
                    }
                    ((winId, iframe) => {
                        let i = 0;
                        let type;
                        let handlers;
                        let callback = () => {
                            if (environments[winId] && environments[winId].$isInitialized$ && !environments[winId].$isLoading$) {
                                type = getInstanceStateValue(iframe, 1) ? "error" : "load";
                                handlers = getInstanceStateValue(iframe, type);
                                handlers && handlers.map((handler => handler({
                                    type: type
                                })));
                            } else if (i++ > 2e3) {
                                handlers = getInstanceStateValue(iframe, "error");
                                handlers && handlers.map((handler => handler({
                                    type: "error"
                                })));
                            } else {
                                setTimeout(callback, 9);
                            }
                        };
                        callback();
                    })(instanceId, newNode);
                }
                if (isScript) {
                    sendToMain(true);
                    webWorkerCtx.$postMessage$([ 7, winId ]);
                }
                return newNode;
            }
            get nodeName() {
                return "#s" === this[InstanceDataKey] ? "#document-fragment" : this[InstanceDataKey];
            }
            get nodeType() {
                return 3;
            }
            get ownerDocument() {
                return env.$document$;
            }
        }, "Node");
        cachedTreeProps(WorkerNode, commaSplit("childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling"));
        win.Node = WorkerNode;
    };
    const htmlMedia = commaSplit("AUDIO,CANVAS,VIDEO");
    const windowMediaConstructors = commaSplit("Audio,MediaSource");
    const patchDocument = (WorkerDocument, env, isDocumentImplementation) => {
        const DocumentDescriptorMap = {
            body: {
                get: () => env.$body$
            },
            cookie: {
                get() {
                    if (env.$isSameOrigin$) {
                        return getter(this, [ "cookie" ]);
                    }
                    warnCrossOrigin("get", "cookie", env);
                    return "";
                },
                set(value) {
                    if (env.$isSameOrigin$) {
                        setter(this, [ "cookie" ], value);
                    } else {
                        warnCrossOrigin("set", "cookie", env);
                    }
                }
            },
            createElement: {
                value(tagName) {
                    tagName = tagName.toUpperCase();
                    if (!IS_TAG_REG.test(tagName)) {
                        throw tagName + " not valid";
                    }
                    const isIframe = "IFRAME" === tagName;
                    const winId = this[WinIdKey];
                    const instanceId = (isIframe ? "f_" : "") + randomId();
                    callMethod(this, [ "createElement" ], [ tagName ], 2, instanceId);
                    const elm = getOrCreateNodeInstance(winId, instanceId, tagName);
                    if (isIframe) {
                        const env = createEnvironment({
                            $winId$: instanceId,
                            $parentWinId$: winId,
                            $url$: "about:blank"
                        }, true);
                        env.$window$.fetch = fetch;
                        setter(elm, [ "srcdoc" ], getPartytownScript());
                    } else if ("SCRIPT" === tagName) {
                        const scriptType = getInstanceStateValue(elm, 5);
                        isScriptJsType(scriptType) && setter(elm, [ "type" ], "text/partytown");
                    }
                    return elm;
                }
            },
            createElementNS: {
                value(namespace, tagName) {
                    const instanceId = randomId();
                    const nsElm = getOrCreateNodeInstance(this[WinIdKey], instanceId, tagName, namespace);
                    callMethod(this, [ "createElementNS" ], [ namespace, tagName ], 2, instanceId);
                    return nsElm;
                }
            },
            createTextNode: {
                value(text) {
                    const winId = this[WinIdKey];
                    const instanceId = randomId();
                    const textNode = getOrCreateNodeInstance(winId, instanceId, "#text");
                    callMethod(this, [ "createTextNode" ], [ text ], 2, instanceId);
                    return textNode;
                }
            },
            createEvent: {
                value: type => new Event(type)
            },
            currentScript: {
                get() {
                    return env.$currentScriptId$ ? getOrCreateNodeInstance(this[WinIdKey], env.$currentScriptId$, "SCRIPT") : null;
                }
            },
            defaultView: {
                get: () => isDocumentImplementation ? null : env.$window$
            },
            documentElement: {
                get: () => env.$documentElement$
            },
            getElementsByTagName: {
                value(tagName) {
                    tagName = tagName.toUpperCase();
                    return "BODY" === tagName ? [ env.$body$ ] : "HEAD" === tagName ? [ env.$head$ ] : callMethod(this, [ "getElementsByTagName" ], [ tagName ]);
                }
            },
            head: {
                get: () => env.$head$
            },
            images: {
                get() {
                    return getter(this, [ "images" ]);
                }
            },
            scripts: {
                get() {
                    return getter(this, [ "scripts" ]);
                }
            },
            implementation: {
                get() {
                    return {
                        hasFeature: () => true,
                        createHTMLDocument: title => {
                            const $winId$ = randomId();
                            callMethod(this, [ "implementation", "createHTMLDocument" ], [ title ], 1, {
                                $winId$: $winId$
                            });
                            const docEnv = createEnvironment({
                                $winId$: $winId$,
                                $parentWinId$: $winId$,
                                $url$: env.$location$ + "",
                                $visibilityState$: "hidden"
                            }, true, true);
                            return docEnv.$document$;
                        }
                    };
                }
            },
            location: {
                get: () => env.$location$,
                set(url) {
                    env.$location$.href = url + "";
                }
            },
            nodeType: {
                value: 9
            },
            parentNode: {
                value: null
            },
            parentElement: {
                value: null
            },
            readyState: {
                value: "complete"
            },
            visibilityState: {
                get: () => env.$visibilityState$ || "visible"
            }
        };
        definePrototypePropertyDescriptor(WorkerDocument, DocumentDescriptorMap);
        cachedProps(WorkerDocument, "compatMode,referrer,forms");
    };
    const patchDocumentElementChild = (WokerDocumentElementChild, env) => {
        const DocumentElementChildDescriptorMap = {
            parentElement: {
                get() {
                    return this.parentNode;
                }
            },
            parentNode: {
                get: () => env.$documentElement$
            }
        };
        definePrototypePropertyDescriptor(WokerDocumentElementChild, DocumentElementChildDescriptorMap);
    };
    const patchElement = (WorkerElement, WorkerHTMLElement) => {
        const ElementDescriptorMap = {
            localName: {
                get() {
                    return this[InstanceDataKey].toLowerCase();
                }
            },
            namespaceURI: {
                get() {
                    return this[NamespaceKey] || "http://www.w3.org/1999/xhtml";
                }
            },
            nodeType: {
                value: 1
            },
            tagName: {
                get() {
                    return this[InstanceDataKey];
                }
            }
        };
        definePrototypePropertyDescriptor(WorkerElement, ElementDescriptorMap);
        cachedTreeProps(WorkerElement, elementStructurePropNames);
        cachedProps(WorkerElement, "id");
        cachedDimensionProps(WorkerHTMLElement);
        cachedDimensionMethods(WorkerHTMLElement, commaSplit("getClientRects,getBoundingClientRect"));
    };
    const patchHTMLAnchorElement = (WorkerHTMLAnchorElement, env) => {
        const HTMLAnchorDescriptorMap = {};
        commaSplit("hash,host,hostname,href,origin,pathname,port,protocol,search").map((anchorProp => {
            HTMLAnchorDescriptorMap[anchorProp] = {
                get() {
                    let value = getInstanceStateValue(this, 4);
                    let href;
                    if ("string" != typeof value) {
                        href = getter(this, [ "href" ]);
                        if ("" === href) {
                            return "protocol" === anchorProp ? ":" : "";
                        }
                        setInstanceStateValue(this, 4, href);
                        value = new URL(href)[anchorProp];
                    }
                    return resolveToUrl(env, value, null)[anchorProp];
                },
                set(value) {
                    let url;
                    if ("href" === anchorProp) {
                        if ((url => {
                            try {
                                new URL(url);
                                return true;
                            } catch (_) {
                                return false;
                            }
                        })(value)) {
                            url = new URL(value);
                        } else {
                            const baseHref = env.$location$.href;
                            url = resolveToUrl(env, baseHref, null);
                            url.href = new URL(value + "", url.href);
                        }
                    } else {
                        url = resolveToUrl(env, this.href, null);
                        url[anchorProp] = value;
                    }
                    setInstanceStateValue(this, 4, url.href);
                    setter(this, [ "href" ], url.href);
                }
            };
        }));
        definePrototypePropertyDescriptor(WorkerHTMLAnchorElement, HTMLAnchorDescriptorMap);
    };
    const patchHTMLIFrameElement = (WorkerHTMLIFrameElement, env) => {
        const HTMLIFrameDescriptorMap = {
            contentDocument: {
                get() {
                    return getIframeEnv(this).$document$;
                }
            },
            contentWindow: {
                get() {
                    return getIframeEnv(this).$window$;
                }
            },
            src: {
                get() {
                    let src = getInstanceStateValue(this, 0);
                    if (src && src.startsWith("javascript:")) {
                        return src;
                    }
                    src = getIframeEnv(this).$location$.href;
                    return src.startsWith("about:") ? "" : src;
                },
                set(src) {
                    if (src) {
                        if (src.startsWith("javascript:")) {
                            setInstanceStateValue(this, 0, src);
                        } else if (!src.startsWith("about:")) {
                            let xhr = new XMLHttpRequest;
                            let xhrStatus;
                            let env = getIframeEnv(this);
                            env.$location$.href = src = resolveUrl(env, src, "iframe");
                            env.$isLoading$ = 1;
                            setInstanceStateValue(this, 1, void 0);
                            xhr.open("GET", src, false);
                            xhr.send();
                            xhrStatus = xhr.status;
                            if (xhrStatus > 199 && xhrStatus < 300) {
                                setter(this, [ "srcdoc" ], `<base href="${src}">` + function(text) {
                                    return text.replace(SCRIPT_TAG_REGEXP, ((_, attrs) => {
                                        const parts = [];
                                        let hasType = false;
                                        let match;
                                        while (match = ATTR_REGEXP.exec(attrs)) {
                                            let [keyValue] = match;
                                            if (keyValue.startsWith("type=")) {
                                                hasType = true;
                                                keyValue = keyValue.replace(/(application|text)\/javascript/, SCRIPT_TYPE);
                                            }
                                            parts.push(keyValue);
                                        }
                                        hasType || parts.push('type="text/partytown"');
                                        return `<script ${parts.join(" ")}>`;
                                    }));
                                }(xhr.responseText) + getPartytownScript());
                                sendToMain(true);
                                webWorkerCtx.$postMessage$([ 7, env.$winId$ ]);
                            } else {
                                setInstanceStateValue(this, 1, xhrStatus);
                                env.$isLoading$ = 0;
                            }
                        }
                    }
                }
            },
            ...HTMLSrcElementDescriptorMap
        };
        definePrototypePropertyDescriptor(WorkerHTMLIFrameElement, HTMLIFrameDescriptorMap);
    };
    const ATTR_REGEXP_STR = "((?:\\w|-)+(?:=(?:(?:\\w|-)+|'[^']*'|\"[^\"]*\")?)?)";
    const SCRIPT_TAG_REGEXP = new RegExp(`<script\\s*((${ATTR_REGEXP_STR}\\s*)*)>`, "mg");
    const ATTR_REGEXP = new RegExp(ATTR_REGEXP_STR, "mg");
    const getIframeEnv = iframe => {
        const $winId$ = iframe[InstanceIdKey];
        environments[$winId$] || createEnvironment({
            $winId$: $winId$,
            $parentWinId$: iframe[WinIdKey],
            $url$: getter(iframe, [ "src" ]) || "about:blank"
        }, true);
        return environments[$winId$];
    };
    const patchSvgElement = WorkerSVGGraphicsElement => {
        const getMatrix = (elm, methodName) => {
            const {a: a, b: b, c: c, d: d, e: e, f: f} = callMethod(elm, [ methodName ], EMPTY_ARRAY);
            return new DOMMatrixReadOnly([ a, b, c, d, e, f ]);
        };
        const SVGGraphicsElementDescriptorMap = {
            ...WorkerSVGGraphicsElement,
            getCTM: {
                value: function() {
                    return getMatrix(this, "getCTM");
                }
            },
            getScreenCTM: {
                value: function() {
                    return getMatrix(this, "getScreenCTM");
                }
            }
        };
        definePrototypePropertyDescriptor(WorkerSVGGraphicsElement, SVGGraphicsElementDescriptorMap);
    };
    const createNamedNodeMapCstr = (win, WorkerBase) => {
        win.NamedNodeMap = defineConstructorName(class NamedNodeMap extends WorkerBase {
            constructor(winId, instanceId, applyPath) {
                super(winId, instanceId, applyPath);
                return new Proxy(this, {
                    get(target, propName) {
                        const handler = NAMED_NODE_MAP_HANDLERS[propName];
                        return handler ? handler.bind(target, [ propName ]) : getter(target, [ propName ]);
                    },
                    set(target, propName, propValue) {
                        const handler = NAMED_NODE_MAP_HANDLERS[propName];
                        if (handler) {
                            throw new Error("Can't set read-only property: " + String(propName));
                        }
                        setter(target, [ propName ], propValue);
                        return true;
                    }
                });
            }
        }, "NamedNodeMap");
    };
    function method(applyPath, ...args) {
        return callMethod(this, applyPath, args, 1);
    }
    const NAMED_NODE_MAP_HANDLERS = {
        getNamedItem: method,
        getNamedItemNS: method,
        item: method,
        removeNamedItem: method,
        removeNamedItemNS: method,
        setNamedItem: method,
        setNamedItemNS: method
    };
    const createWindow = ($winId$, $parentWinId$, url, $visibilityState$, isIframeWindow, isDocumentImplementation) => {
        let cstrInstanceId;
        let cstrNodeName;
        let cstrNamespace;
        let cstrPrevInstance;
        const WorkerBase = class {
            constructor(winId, instanceId, applyPath, instanceData, namespace) {
                this[WinIdKey] = winId || $winId$;
                this[InstanceIdKey] = instanceId || cstrInstanceId || randomId();
                this[ApplyPathKey] = applyPath || [];
                this[InstanceDataKey] = instanceData || cstrNodeName;
                this[NamespaceKey] = namespace || cstrNamespace;
                this[InstanceStateKey] = cstrPrevInstance && cstrPrevInstance[InstanceStateKey] || {};
                cstrInstanceId = cstrNodeName = cstrNamespace = void 0;
            }
        };
        const WorkerLocation = defineConstructorName(class extends URL {
            assign() {
                logWorker("location.assign(), noop");
            }
            reload() {
                logWorker("location.reload(), noop");
            }
            replace() {
                logWorker("location.replace(), noop");
            }
        }, "Location");
        const $location$ = new WorkerLocation(url);
        const $isSameOrigin$ = $location$.origin === webWorkerCtx.$origin$ || "about:blank" === $location$.origin;
        const $isTopWindow$ = $parentWinId$ === $winId$;
        const env = {};
        const getChildEnvs = () => {
            let childEnv = [];
            let envWinId;
            let otherEnv;
            for (envWinId in environments) {
                otherEnv = environments[envWinId];
                otherEnv.$parentWinId$ !== $winId$ || otherEnv.$isTopWindow$ || childEnv.push(otherEnv);
            }
            return childEnv;
        };
        const WorkerWindow = defineConstructorName(class extends WorkerBase {
            constructor() {
                super($winId$, $winId$);
                this.addEventListener = (...args) => {
                    "load" === args[0] ? env.$runWindowLoadEvent$ && setTimeout((() => args[1]({
                        type: "load"
                    }))) : callMethod(this, [ "addEventListener" ], args, 2);
                };
                let win = this;
                let value;
                let historyState;
                let hasInitializedMedia = 0;
                let initWindowMedia = () => {
                    if (!hasInitializedMedia) {
                        (() => {
                            if (!webWorkerCtx.$initWindowMedia$) {
                                self.$bridgeToMedia$ = [ getter, setter, callMethod, constructGlobal, definePrototypePropertyDescriptor, randomId, WinIdKey, InstanceIdKey, ApplyPathKey ];
                                webWorkerCtx.$importScripts$(partytownLibUrl("partytown-media.js?v=0.10.3-dev1734732935152"));
                                webWorkerCtx.$initWindowMedia$ = self.$bridgeFromMedia$;
                                delete self.$bridgeFromMedia$;
                            }
                            return webWorkerCtx.$initWindowMedia$;
                        })()(WorkerBase, WorkerEventTargetProxy, env, win, windowMediaConstructors);
                        hasInitializedMedia = 1;
                    }
                };
                let nodeCstrs = {};
                let $createNode$ = (nodeName, instanceId, namespace, prevInstance) => {
                    htmlMedia.includes(nodeName) && initWindowMedia();
                    const NodeCstr = nodeCstrs[nodeName] ? nodeCstrs[nodeName] : nodeName.includes("-") ? nodeCstrs.UNKNOWN : nodeCstrs.I;
                    cstrInstanceId = instanceId;
                    cstrNodeName = nodeName;
                    cstrNamespace = namespace;
                    cstrPrevInstance = prevInstance;
                    return new NodeCstr;
                };
                win.Window = WorkerWindow;
                win.name = name + `${normalizedWinId($winId$)} (${$winId$})`;
                createNodeCstr(win, env, WorkerBase);
                (win => {
                    win.NodeList = defineConstructorName(NodeList, "NodeList");
                })(win);
                createNamedNodeMapCstr(win, WorkerBase);
                createCSSStyleDeclarationCstr(win, WorkerBase, "CSSStyleDeclaration");
                ((win, WorkerBase, cstrName) => {
                    win[cstrName] = defineConstructorName(class extends WorkerBase {
                        now() {
                            return performance.now();
                        }
                    }, cstrName);
                })(win, WorkerBase, "Performance");
                ((win, nodeCstrs) => {
                    const registry = new Map;
                    win.customElements = {
                        define(tagName, Cstr, opts) {
                            registry.set(tagName, Cstr);
                            nodeCstrs[tagName.toUpperCase()] = Cstr;
                            const ceData = [ Cstr.name, Cstr.observedAttributes ];
                            callMethod(win, [ "customElements", "define" ], [ tagName, ceData, opts ]);
                        },
                        get: tagName => registry.get(tagName) || callMethod(win, [ "customElements", "get" ], [ tagName ]),
                        whenDefined: tagName => registry.has(tagName) ? Promise.resolve() : callMethod(win, [ "customElements", "whenDefined" ], [ tagName ]),
                        upgrade: elm => callMethod(win, [ "customElements", "upgrade" ], [ elm ])
                    };
                })(win, nodeCstrs);
                webWorkerCtx.$interfaces$.map((([cstrName, superCstrName, members, interfaceType, nodeName]) => {
                    const SuperCstr = TrapConstructors[cstrName] ? WorkerTrapProxy : "EventTarget" === superCstrName ? WorkerEventTargetProxy : "Object" === superCstrName ? WorkerBase : win[superCstrName];
                    const Cstr = win[cstrName] = defineConstructorName(12 === interfaceType ? class extends WorkerBase {
                        constructor(...args) {
                            super();
                            constructGlobal(this, cstrName, args);
                        }
                    } : win[cstrName] || class extends SuperCstr {}, cstrName);
                    nodeName && (nodeCstrs[nodeName] = Cstr);
                    members.map((([memberName, memberType, staticValue]) => {
                        memberName in Cstr.prototype || memberName in SuperCstr.prototype || ("string" == typeof memberType ? definePrototypeProperty(Cstr, memberName, {
                            get() {
                                if (!hasInstanceStateValue(this, memberName)) {
                                    const instanceId = this[InstanceIdKey];
                                    const applyPath = [ ...this[ApplyPathKey], memberName ];
                                    const PropCstr = win[memberType];
                                    PropCstr && setInstanceStateValue(this, memberName, new PropCstr($winId$, instanceId, applyPath));
                                }
                                return getInstanceStateValue(this, memberName);
                            },
                            set(value) {
                                setInstanceStateValue(this, memberName, value);
                            }
                        }) : 5 === memberType ? definePrototypeValue(Cstr, memberName, (function(...args) {
                            return callMethod(this, [ memberName ], args);
                        })) : memberType > 0 && (void 0 !== staticValue ? definePrototypeValue(Cstr, memberName, staticValue) : definePrototypeProperty(Cstr, memberName, {
                            get() {
                                return getter(this, [ memberName ]);
                            },
                            set(value) {
                                return setter(this, [ memberName ], value);
                            }
                        })));
                    }));
                }));
                commaSplit("atob,btoa,crypto,indexedDB,setTimeout,setInterval,clearTimeout,clearInterval").map((globalName => {
                    delete WorkerWindow.prototype[globalName];
                    if (!(globalName in win)) {
                        value = self[globalName];
                        null != value && (win[globalName] = "function" != typeof value || value.toString().startsWith("class") ? value : value.bind(self));
                    }
                }));
                Object.getOwnPropertyNames(self).map((globalName => {
                    globalName in win || (win[globalName] = self[globalName]);
                }));
                windowMediaConstructors.map((cstrName => defineProperty(win, cstrName, {
                    get() {
                        initWindowMedia();
                        return win[cstrName];
                    }
                })));
                "trustedTypes" in self && (win.trustedTypes = self.trustedTypes);
                patchElement(win.Element, win.HTMLElement);
                patchDocument(win.Document, env, isDocumentImplementation);
                (WorkerDocumentFragment => {
                    definePrototypeNodeType(WorkerDocumentFragment, 11);
                    cachedTreeProps(WorkerDocumentFragment, elementStructurePropNames);
                })(win.DocumentFragment);
                patchHTMLAnchorElement(win.HTMLAnchorElement, env);
                (WorkerHTMLFormElement => {
                    definePrototypePropertyDescriptor(WorkerHTMLFormElement, {});
                    cachedProps(WorkerHTMLFormElement, "elements");
                })(win.HTMLFormElement);
                patchHTMLIFrameElement(win.HTMLIFrameElement);
                patchHTMLScriptElement(win.HTMLScriptElement, env);
                patchSvgElement(win.SVGGraphicsElement);
                patchDocumentElementChild(win.HTMLHeadElement, env);
                patchDocumentElementChild(win.HTMLBodyElement, env);
                ((WorkerHTMLHtmlElement, env) => {
                    const DocumentElementDescriptorMap = {
                        parentElement: {
                            value: null
                        },
                        parentNode: {
                            get: () => env.$document$
                        }
                    };
                    definePrototypePropertyDescriptor(WorkerHTMLHtmlElement, DocumentElementDescriptorMap);
                })(win.HTMLHtmlElement, env);
                createCSSStyleSheetConstructor(win, "CSSStyleSheet");
                definePrototypeNodeType(win.Comment, 8);
                definePrototypeNodeType(win.DocumentType, 10);
                Object.assign(env, {
                    $winId$: $winId$,
                    $parentWinId$: $parentWinId$,
                    $window$: new Proxy(win, {
                        get: (win, propName) => {
                            var _a;
                            if ("string" != typeof propName || isNaN(propName)) {
                                return (null === (_a = webWorkerCtx.$config$.mainWindowAccessors) || void 0 === _a ? void 0 : _a.includes(propName)) ? getter(this, [ propName ]) : win[propName];
                            }
                            {
                                let frame = getChildEnvs()[propName];
                                return frame ? frame.$window$ : void 0;
                            }
                        },
                        has: () => true
                    }),
                    $document$: $createNode$("#document", $winId$ + ".d"),
                    $documentElement$: $createNode$("HTML", $winId$ + ".e"),
                    $head$: $createNode$("HEAD", $winId$ + ".h"),
                    $body$: $createNode$("BODY", $winId$ + ".b"),
                    $location$: $location$,
                    $visibilityState$: $visibilityState$,
                    $isSameOrigin$: $isSameOrigin$,
                    $isTopWindow$: $isTopWindow$,
                    $createNode$: $createNode$
                });
                win.requestAnimationFrame = cb => setTimeout((() => cb(performance.now())), 9);
                win.cancelAnimationFrame = id => clearTimeout(id);
                win.requestIdleCallback = (cb, start) => {
                    start = Date.now();
                    return setTimeout((() => cb({
                        didTimeout: false,
                        timeRemaining: () => Math.max(0, 50 - (Date.now() - start))
                    })), 1);
                };
                win.cancelIdleCallback = id => clearTimeout(id);
                addStorageApi(win, "localStorage", $isSameOrigin$, env);
                addStorageApi(win, "sessionStorage", $isSameOrigin$, env);
                $isSameOrigin$ || (win.indexeddb = void 0);
                if (isIframeWindow) {
                    historyState = {};
                    win.history = {
                        pushState(stateObj) {
                            historyState = stateObj;
                        },
                        replaceState(stateObj) {
                            historyState = stateObj;
                        },
                        get state() {
                            return historyState;
                        },
                        length: 0
                    };
                    win.indexeddb = void 0;
                } else {
                    const originalPushState = win.history.pushState.bind(win.history);
                    const originalReplaceState = win.history.replaceState.bind(win.history);
                    win.history.pushState = (stateObj, _, newUrl) => {
                        false !== env.$propagateHistoryChange$ && originalPushState(stateObj, _, newUrl);
                    };
                    win.history.replaceState = (stateObj, _, newUrl) => {
                        false !== env.$propagateHistoryChange$ && originalReplaceState(stateObj, _, newUrl);
                    };
                }
                win.Worker = void 0;
            }
            get body() {
                return env.$body$;
            }
            get document() {
                return env.$document$;
            }
            get documentElement() {
                return env.$documentElement$;
            }
            fetch(input, init) {
                input = "string" == typeof input || input instanceof URL ? String(input) : input.url;
                return fetch(resolveUrl(env, input, "fetch"), init);
            }
            get frames() {
                return env.$window$;
            }
            get frameElement() {
                return $isTopWindow$ ? null : getOrCreateNodeInstance($parentWinId$, $winId$, "IFRAME");
            }
            get globalThis() {
                return env.$window$;
            }
            get head() {
                return env.$head$;
            }
            get length() {
                return getChildEnvs().length;
            }
            get location() {
                return $location$;
            }
            set location(loc) {
                $location$.href = loc + "";
            }
            get Image() {
                return createImageConstructor(env);
            }
            get navigator() {
                return (env => {
                    const nav = {
                        sendBeacon: (url, body) => {
                            if (webWorkerCtx.$config$.logSendBeaconRequests) {
                                try {
                                    logWorker(`sendBeacon: ${resolveUrl(env, url, null)}${body ? ", data: " + JSON.stringify(body) : ""}, resolvedParams: ${JSON.stringify(resolveSendBeaconRequestParameters(env, url))}`);
                                } catch (e) {
                                    console.error(e);
                                }
                            }
                            try {
                                fetch(resolveUrl(env, url, null), {
                                    method: "POST",
                                    body: body,
                                    mode: "no-cors",
                                    keepalive: true,
                                    ...resolveSendBeaconRequestParameters(env, url)
                                });
                                return true;
                            } catch (e) {
                                console.error(e);
                                return false;
                            }
                        }
                    };
                    for (let key in navigator) {
                        nav[key] = navigator[key];
                    }
                    return new Proxy(nav, {
                        set(_, propName, propValue) {
                            navigator[propName] = propValue;
                            return true;
                        },
                        get(target, prop) {
                            if (Object.prototype.hasOwnProperty.call(target, prop)) {
                                return target[prop];
                            }
                            const value = getter(env.$window$, [ "navigator", prop ]);
                            return value;
                        }
                    });
                })(env);
            }
            get origin() {
                return $location$.origin;
            }
            set origin(_) {}
            get parent() {
                for (let envWinId in environments) {
                    if (environments[envWinId].$winId$ === $parentWinId$) {
                        return environments[envWinId].$window$;
                    }
                }
                return env.$window$;
            }
            postMessage(...args) {
                if (environments[args[0]]) {
                    len(postMessages) > 50 && postMessages.splice(0, 5);
                    postMessages.push({
                        $winId$: args[0],
                        $data$: JSON.stringify(args[1])
                    });
                    args = args.slice(1);
                }
                callMethod(this, [ "postMessage" ], args, 3);
            }
            get self() {
                return env.$window$;
            }
            get top() {
                for (let envWinId in environments) {
                    if (environments[envWinId].$isTopWindow$) {
                        return environments[envWinId].$window$;
                    }
                }
                return env.$window$;
            }
            get window() {
                return env.$window$;
            }
            get XMLHttpRequest() {
                const Xhr = XMLHttpRequest;
                const str = String(Xhr);
                const ExtendedXhr = defineConstructorName(class extends Xhr {
                    open(...args) {
                        args[1] = resolveUrl(env, args[1], "xhr");
                        super.open(...args);
                    }
                    set withCredentials(_) {
                        webWorkerCtx.$config$.allowXhrCredentials && (super.withCredentials = _);
                    }
                    toString() {
                        return str;
                    }
                }, getConstructorName(Xhr));
                ExtendedXhr.prototype.constructor.toString = () => str;
                return ExtendedXhr;
            }
        }, "Window");
        const WorkerTrapProxy = class extends WorkerBase {
            constructor(winId, instanceId, applyPath, nodeName) {
                super(winId, instanceId, applyPath, nodeName);
                return new Proxy(this, {
                    get: (instance, propName) => getter(instance, [ propName ]),
                    set(instance, propName, propValue) {
                        setter(instance, [ propName ], propValue);
                        return true;
                    }
                });
            }
        };
        const WorkerEventTargetProxy = class extends WorkerBase {};
        eventTargetMethods.map((methodName => WorkerEventTargetProxy.prototype[methodName] = function(...args) {
            return callMethod(this, [ methodName ], args, 2);
        }));
        cachedProps(WorkerWindow, "devicePixelRatio");
        cachedDimensionProps(WorkerWindow);
        cachedDimensionMethods(WorkerWindow, [ "getComputedStyle" ]);
        new WorkerWindow;
        return env;
    };
    const TrapConstructors = {
        DOMStringMap: 1,
        NamedNodeMap: 1
    };
    const createEnvironment = ({$winId$: $winId$, $parentWinId$: $parentWinId$, $url$: $url$, $visibilityState$: $visibilityState$}, isIframeWindow, isDocumentImplementation) => {
        if (!environments[$winId$]) {
            environments[$winId$] = createWindow($winId$, $parentWinId$, $url$, $visibilityState$, isIframeWindow, isDocumentImplementation);
            {
                const winType = $winId$ === $parentWinId$ ? "top" : "iframe";
                logWorker(`Created ${winType} window ${normalizedWinId($winId$)} environment`, $winId$);
            }
        }
        webWorkerCtx.$postMessage$([ 7, $winId$ ]);
        return environments[$winId$];
    };
    const queuedEvents = [];
    const receiveMessageFromSandboxToWorker = ev => {
        const msg = ev.data;
        const msgType = msg[0];
        const msgValue = msg[1];
        if (webWorkerCtx.$isInitialized$) {
            if (7 === msgType) {
                (async initScript => {
                    let winId = initScript.$winId$;
                    let instanceId = initScript.$instanceId$;
                    let instance = getOrCreateNodeInstance(winId, instanceId, "SCRIPT");
                    let scriptContent = initScript.$content$;
                    let scriptSrc = initScript.$url$;
                    let scriptOrgSrc = initScript.$orgUrl$;
                    let errorMsg = "";
                    let env = environments[winId];
                    let rsp;
                    let javascriptContentTypes = [ "text/jscript", "text/javascript", "text/x-javascript", "application/javascript", "application/x-javascript", "text/ecmascript", "text/x-ecmascript", "application/ecmascript" ];
                    if (scriptSrc) {
                        try {
                            scriptSrc = resolveToUrl(env, scriptSrc, "script") + "";
                            setInstanceStateValue(instance, 4, scriptSrc);
                            webWorkerCtx.$config$.logScriptExecution && logWorker(`Execute script src: ${scriptOrgSrc}`, winId);
                            rsp = await fetch(scriptSrc);
                            if (rsp.ok) {
                                let responseContentType = rsp.headers.get("content-type");
                                let shouldExecute = javascriptContentTypes.some((ct => {
                                    var _a, _b, _c;
                                    return null === (_c = null === (_a = null == responseContentType ? void 0 : responseContentType.toLowerCase) || void 0 === _a ? void 0 : (_b = _a.call(responseContentType)).includes) || void 0 === _c ? void 0 : _c.call(_b, ct);
                                }));
                                if (shouldExecute) {
                                    scriptContent = await rsp.text();
                                    env.$currentScriptId$ = instanceId;
                                    run(env, scriptContent, scriptOrgSrc || scriptSrc);
                                }
                                runStateLoadHandlers(instance, "load");
                            } else {
                                errorMsg = rsp.statusText;
                                runStateLoadHandlers(instance, "error");
                            }
                        } catch (urlError) {
                            console.error(urlError);
                            errorMsg = String(urlError.stack || urlError);
                            runStateLoadHandlers(instance, "error");
                        }
                    } else {
                        scriptContent && (errorMsg = runScriptContent(env, instanceId, scriptContent, winId, errorMsg));
                    }
                    env.$currentScriptId$ = "";
                    webWorkerCtx.$postMessage$([ 6, winId, instanceId, errorMsg ]);
                })(msgValue);
            } else if (9 === msgType) {
                (({$winId$: $winId$, $instanceId$: $instanceId$, $refId$: $refId$, $thisArg$: $thisArg$, $args$: $args$}) => {
                    if (webWorkerRefsByRefId[$refId$]) {
                        try {
                            webWorkerRefsByRefId[$refId$].apply(deserializeFromMain($winId$, $instanceId$, [], $thisArg$), deserializeFromMain($winId$, $instanceId$, [], $args$));
                        } catch (e) {
                            console.error(e);
                        }
                    }
                })(msgValue);
            } else if (10 === msgType) {
                (({$winId$: $winId$, $forward$: $forward$, $args$: $args$}) => {
                    try {
                        let target = environments[$winId$].$window$;
                        let i = 0;
                        let l = len($forward$);
                        for (;i < l; i++) {
                            i + 1 < l ? target = target[$forward$[i]] : target[$forward$[i]].apply(target, deserializeFromMain(null, $winId$, [], $args$));
                        }
                    } catch (e) {
                        console.error(e);
                    }
                })(msgValue);
            } else if (5 === msgType) {
                createEnvironment(msgValue);
            } else if (8 === msgType) {
                if (1 !== environments[msgValue].$isInitialized$) {
                    const winId = msgValue;
                    const env = environments[winId];
                    const winType = env.$winId$ === env.$parentWinId$ ? "top" : "iframe";
                    logWorker(`Initialized ${winType} window ${normalizedWinId(winId)} environment üéâ`, winId);
                }
                environments[msgValue].$isInitialized$ = 1;
                environments[msgValue].$isLoading$ = 0;
            } else if (14 === msgType) {
                environments[msgValue].$visibilityState$ = msg[2];
            } else if (13 === msgType) {
                const $winId$ = msgValue.$winId$;
                const env = environments[$winId$];
                env.$location$.href = msgValue.url;
                !function($winId$, env, data) {
                    const history = env.$window$.history;
                    switch (data.type) {
                      case 0:
                        env.$propagateHistoryChange$ = false;
                        try {
                            history.pushState(data.state, "", data.newUrl);
                        } catch (e) {}
                        env.$propagateHistoryChange$ = true;
                        break;

                      case 1:
                        env.$propagateHistoryChange$ = false;
                        try {
                            history.replaceState(data.state, "", data.newUrl);
                        } catch (e) {}
                        env.$propagateHistoryChange$ = true;
                    }
                }(msgValue.$winId$, env, msgValue);
            } else {
                15 === msgType && ((_type, winId, instanceId, callbackName, args) => {
                    const elm = getOrCreateNodeInstance(winId, instanceId);
                    elm && "function" == typeof elm[callbackName] && elm[callbackName].apply(elm, args);
                })(...msg);
            }
        } else if (1 === msgType) {
            (initWebWorkerData => {
                const config = webWorkerCtx.$config$ = JSON.parse(initWebWorkerData.$config$);
                const locOrigin = initWebWorkerData.$origin$;
                webWorkerCtx.$importScripts$ = importScripts.bind(self);
                webWorkerCtx.$interfaces$ = initWebWorkerData.$interfaces$;
                webWorkerCtx.$libPath$ = initWebWorkerData.$libPath$;
                webWorkerCtx.$origin$ = locOrigin;
                webWorkerCtx.$postMessage$ = postMessage.bind(self);
                webWorkerCtx.$sharedDataBuffer$ = initWebWorkerData.$sharedDataBuffer$;
                webWorkerCtx.$tabId$ = initWebWorkerData.$tabId$;
                self.importScripts = void 0;
                delete self.postMessage;
                delete self.WorkerGlobalScope;
                commaSplit("resolveUrl,resolveSendBeaconRequestParameters,get,set,apply").map((configName => {
                    config[configName] && (config[configName] = new Function("return " + config[configName])());
                }));
            })(msgValue);
            webWorkerCtx.$postMessage$([ 2 ]);
        } else if (3 === msgType) {
            webWorkerCtx.$interfaces$ = [ ...webWorkerCtx.$interfaces$, ...msgValue ];
            webWorkerCtx.$isInitialized$ = 1;
            logWorker("Initialized web worker");
            webWorkerCtx.$postMessage$([ 4 ]);
            queuedEvents.length && logWorker(`Queued ready messages: ${queuedEvents.length}`);
            [ ...queuedEvents ].map(receiveMessageFromSandboxToWorker);
            queuedEvents.length = 0;
        } else {
            queuedEvents.push(ev);
        }
    };
    self.onmessage = receiveMessageFromSandboxToWorker;
    postMessage([ 0 ]);
})(self);
```

--------------------------------------------------------------------------------üìÑ FILE PATH: public\~partytown\debug\partytown.js--------------------------------------------------------------------------------```/* Partytown 0.10.3-dev1734732935152 - MIT builder.io */
const defaultPartytownForwardPropertySettings = {
    preserveBehavior: false
};

const resolvePartytownForwardProperty = propertyOrPropertyWithSettings => {
    if ("string" == typeof propertyOrPropertyWithSettings) {
        return [ propertyOrPropertyWithSettings, defaultPartytownForwardPropertySettings ];
    }
    const [property, settings = defaultPartytownForwardPropertySettings] = propertyOrPropertyWithSettings;
    return [ property, {
        ...defaultPartytownForwardPropertySettings,
        ...settings
    } ];
};

const arrayMethods = Object.freeze((obj => {
    const properties = new Set;
    let currentObj = obj;
    do {
        Object.getOwnPropertyNames(currentObj).forEach((item => {
            "function" == typeof currentObj[item] && properties.add(item);
        }));
    } while ((currentObj = Object.getPrototypeOf(currentObj)) !== Object.prototype);
    return Array.from(properties);
})([]));

!function(win, doc, nav, top, useAtomics, config, libPath, timeout, scripts, sandbox, mainForwardFn = win, isReady) {
    function ready() {
        if (!isReady) {
            isReady = 1;
            libPath = (config.lib || "/~partytown/") + (false !== config.debug ? "debug/" : "");
            if ("/" == libPath[0]) {
                scripts = doc.querySelectorAll('script[type="text/partytown"]');
                if (top != win) {
                    top.dispatchEvent(new CustomEvent("pt1", {
                        detail: win
                    }));
                } else {
                    timeout = setTimeout(fallback, 999999999);
                    doc.addEventListener("pt0", clearFallback);
                    useAtomics ? loadSandbox(1) : nav.serviceWorker ? nav.serviceWorker.register(libPath + (config.swPath || "partytown-sw.js"), {
                        scope: libPath
                    }).then((function(swRegistration) {
                        if (swRegistration.active) {
                            loadSandbox();
                        } else if (swRegistration.installing) {
                            swRegistration.installing.addEventListener("statechange", (function(ev) {
                                "activated" == ev.target.state && loadSandbox();
                            }));
                        } else {
                            console.warn(swRegistration);
                        }
                    }), console.error) : fallback();
                }
            } else {
                console.warn('Partytown config.lib url must start with "/"');
            }
        }
    }
    function loadSandbox(isAtomics) {
        sandbox = doc.createElement(isAtomics ? "script" : "iframe");
        win._pttab = Date.now();
        if (!isAtomics) {
            sandbox.style.display = "block";
            sandbox.style.width = "0";
            sandbox.style.height = "0";
            sandbox.style.border = "0";
            sandbox.style.visibility = "hidden";
            sandbox.setAttribute("aria-hidden", !0);
        }
        sandbox.src = libPath + "partytown-" + (isAtomics ? "atomics.js?v=0.10.3-dev1734732935152" : "sandbox-sw.html?" + win._pttab);
        doc.querySelector(config.sandboxParent || "body").appendChild(sandbox);
    }
    function fallback(i, script) {
        console.warn("Partytown script fallback");
        clearFallback();
        top == win && (config.forward || []).map((function(forwardProps) {
            const [property] = resolvePartytownForwardProperty(forwardProps);
            delete win[property.split(".")[0]];
        }));
        for (i = 0; i < scripts.length; i++) {
            script = doc.createElement("script");
            script.innerHTML = scripts[i].innerHTML;
            script.nonce = config.nonce;
            doc.head.appendChild(script);
        }
        sandbox && sandbox.parentNode.removeChild(sandbox);
    }
    function clearFallback() {
        clearTimeout(timeout);
    }
    config = win.partytown || {};
    top == win && (config.forward || []).map((function(forwardProps) {
        const [property, {preserveBehavior: preserveBehavior}] = resolvePartytownForwardProperty(forwardProps);
        mainForwardFn = win;
        property.split(".").map((function(_, i, forwardPropsArr) {
            mainForwardFn = mainForwardFn[forwardPropsArr[i]] = i + 1 < forwardPropsArr.length ? mainForwardFn[forwardPropsArr[i]] || (propertyName => arrayMethods.includes(propertyName) ? [] : {})(forwardPropsArr[i + 1]) : (() => {
                let originalFunction = null;
                if (preserveBehavior) {
                    const {methodOrProperty: methodOrProperty, thisObject: thisObject} = ((window, properties) => {
                        let thisObject = window;
                        for (let i = 0; i < properties.length - 1; i += 1) {
                            thisObject = thisObject[properties[i]];
                        }
                        return {
                            thisObject: thisObject,
                            methodOrProperty: properties.length > 0 ? thisObject[properties[properties.length - 1]] : void 0
                        };
                    })(win, forwardPropsArr);
                    "function" == typeof methodOrProperty && (originalFunction = (...args) => methodOrProperty.apply(thisObject, ...args));
                }
                return function() {
                    let returnValue;
                    originalFunction && (returnValue = originalFunction(arguments));
                    (win._ptf = win._ptf || []).push(forwardPropsArr, arguments);
                    return returnValue;
                };
            })();
        }));
    }));
    if ("complete" == doc.readyState) {
        ready();
    } else {
        win.addEventListener("DOMContentLoaded", ready);
        win.addEventListener("load", ready);
    }
}(window, document, navigator, top, window.crossOriginIsolated);```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\globals.css--------------------------------------------------------------------------------```@tailwind base;
@tailwind components;
@tailwind utilities;

/* * CRITICAL LCP FIX: INLINE FONT DATA URI 
 * Replace the 'Base64_String_Goes_Here' placeholder below with the Base64 data from your GeistVF.woff file.
 * This removes the 47.59 KiB file from the critical network chain.
 */
@font-face {
  font-family: var(--font-geist-sans);
/* FIX: Wrap the entire data URI string in single quotes to prevent Webpack from trying to resolve it as a relative file import.
*/
  src: url('data:font/woff;charset=utf-8;base64,YOUR_VERY_LONG_BASE64_STRING_HERE') format('woff');
  font-weight: 100 900;
  font-display: swap;
}
/* ... rest of the file */```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\layout.tsx--------------------------------------------------------------------------------```import type { Metadata } from "next";
import Script from "next/script";
import { Partytown } from "@builder.io/partytown/react";
import { Inter } from "next/font/google";
import "@/app/globals.css";
import { Header } from "@/components/layout/header";
import { Footer } from "@/components/layout/footer";
import { siteConfig } from "@/lib/seo";
import { GoogleTagManager } from "@/components/analytics/gtm-partytown"; // <--- NEW IMPORT

// FIX: Add 'display: swap' and EXPLICITLY set 'preload: true' for non-blocking optimization.
const inter = Inter({ subsets: ["latin"], display: "swap", preload: true });

const baseUrl = siteConfig.url.replace(/\/$/, "");
const defaultOgImage = `${baseUrl}/images/munyaka-midrand.jpg`;

export const metadata: Metadata = {
  metadataBase: new URL(siteConfig.url),
  applicationName: siteConfig.shortName,
  title: {
    default: `${siteConfig.name} | Gauteng Painting & Waterproofing Experts`,
    template: `%s | ${siteConfig.shortName}`,
  },
  description: siteConfig.description,
  keywords: siteConfig.keywords,
  creator: siteConfig.legalName,
  publisher: siteConfig.legalName,
  category: "construction",
  alternates: {
    canonical: baseUrl,
  },
  openGraph: {
    type: "website",
    locale: "en_ZA",
    url: baseUrl,
    siteName: siteConfig.name,
    title: `${siteConfig.name} | Gauteng Painting & Waterproofing Experts`,
    description: siteConfig.description,
    images: [
      {
        url: defaultOgImage,
        width: 1200,
        height: 628,
        alt: "Maverick Painting Contractors - Structural repairs, coatings and waterproofing",
      },
    ],
  },
  twitter: {
    card: "summary_large_image",
    site: "@maverickpainting",
    title: `${siteConfig.name} | Gauteng Painting & Waterproofing Experts`,
    description: siteConfig.description,
    images: [defaultOgImage],
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      "max-image-preview": "large",
      "max-snippet": -1,
      "max-video-preview": -1,
    },
  },
  verification: {
    google: process.env.NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION,
    other: process.env.NEXT_PUBLIC_BING_VERIFICATION
      ? {
          "msvalidate.01": process.env.NEXT_PUBLIC_BING_VERIFICATION,
        }
      : undefined,
  },
  icons: {
    icon: "/favicon.ico",
    shortcut: "/favicon.ico",
    apple: "/apple-touch-icon.png",
  },
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  const organizationJsonLd = {
    "@context": "https://schema.org",
    "@type": "ProfessionalService",
    name: siteConfig.name,
    url: baseUrl,
    legalName: siteConfig.legalName,
    slogan: siteConfig.slogan,
    email: siteConfig.email,
    telephone: siteConfig.phoneNumber,
    areaServed: siteConfig.serviceAreas,
    sameAs: Object.values(siteConfig.social).filter(Boolean),
    address: {
      "@type": "PostalAddress",
      streetAddress: siteConfig.address.street,
      addressLocality: siteConfig.address.city,
      addressRegion: siteConfig.address.region,
      postalCode: siteConfig.address.postalCode,
      addressCountry: siteConfig.address.country,
    },
    geo: siteConfig.address.latitude
      ? {
          "@type": "GeoCoordinates",
          latitude: siteConfig.address.latitude,
          longitude: siteConfig.address.longitude,
        }
      : undefined,
    contactPoint: [
      {
        "@type": "ContactPoint",
        telephone: siteConfig.phoneNumber,
        contactType: "sales",
        areaServed: "ZA",
        availableLanguage: ["English"],
      },
    ],
  };

  const serviceJsonLd = {
    "@context": "https://schema.org",
    "@type": "Service",
    name: "Owner Supervised Painting, Structural Repairs & Waterproofing",
    provider: {
      "@type": "Organization",
      name: siteConfig.name,
      url: baseUrl,
    },
    areaServed: siteConfig.serviceAreas,
    serviceType: [
      "Commercial & Industrial Painting",
      "Body Corporate Asset Maintenance",
      "Structural & Concrete Repairs",
      "Waterproofing & Damp Proofing",
      "High-Access Rope Painting",
    ],
  };

  return (
    <html lang="en-ZA">
      <head>
        <Partytown debug={false} forward={["dataLayer.push"]} />
      </head>
      <body className={inter.className}>
        
        {/* --- ANALYTICS INJECTION (Off-Main Thread) --- */}
        {/* REPLACE "GTM-YOURID" WITH YOUR ACTUAL CONTAINER ID */}
        <GoogleTagManager containerId="GTM-YOURID" />

        <Header />

        <main className="flex-grow">
          {children}
        </main>

        <Footer />
        
        <Script id="organization-schema" type="application/ld+json" strategy="beforeInteractive">
          {JSON.stringify(organizationJsonLd)}
        </Script>
        <Script id="service-schema" type="application/ld+json" strategy="beforeInteractive">
          {JSON.stringify(serviceJsonLd)}
        </Script>
      </body>
    </html>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\page.tsx--------------------------------------------------------------------------------```// src/app/page.tsx
import { HeroSection } from "@/components/hero-section";
import { TrustStripMobileCarousel } from "@/components/trust-strip-mobile-carousel";
import { ClientLogoStrip } from "@/components/client-logo-strip"; // <-- NEW IMPORT
import { ServiceExpertiseGrid } from "@/components/service-expertise-grid";
import { CtaStripModule } from "@/components/cta-strip-module"; 
import { ProjectShowcaseModule } from "@/components/project-showcase-module";
import { QaProcessModule } from "@/components/qa-process-module";
// Position Swapped
import { AccreditationsStrip } from "@/components/accreditations-strip";

export default function Home() {
  return (
    <>
      <HeroSection />
      
      {/* --- Trust Strip / Mobile Carousel --- */}
      <TrustStripMobileCarousel />

      {/* --- NEW MODULE: CLIENT LOGO STRIP (Authority/Trust) --- */}
      <ClientLogoStrip />

      {/* --- Service Expertise Grid --- */}
      <ServiceExpertiseGrid />
      
      {/* --- HIGH-VALUE CTA STRIP --- */}
      <CtaStripModule />
      
     
      {/* NEW ORDERING:
        1. Project Showcase (Visual Proof)
        2. QA Process Module (The Mechanism)
      */}
      
      {/* 1. PROJECT SHOWCASE MODULE (Visual Proof / Hyper-Local SEO) */}
      <ProjectShowcaseModule /> 

      {/* 2. QA Process / De-Risking Engine (The Mechanism) */}
      <QaProcessModule /> 
      
   
      {/* --- Accreditations / Logos Strip --- */}
      <AccreditationsStrip />
    </>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\robots.ts--------------------------------------------------------------------------------```import type { MetadataRoute } from "next";
import { siteConfig } from "@/lib/seo";

const getEnvironment = () =>
  process.env.VERCEL_ENV ?? process.env.NODE_ENV ?? "development";

export default function robots(): MetadataRoute.Robots {
  const env = getEnvironment();
  const isProduction = env === "production";
  const baseUrl = siteConfig.url.replace(/\/$/, "");

  if (!isProduction) {
    return {
      rules: [
        {
          userAgent: "*",
          disallow: "/",
        },
      ],
    };
  }

  return {
    rules: {
      userAgent: "*",
      allow: "/",
      disallow: ["/api/"],
    },
    sitemap: [`${baseUrl}/sitemap.xml`],
    host: baseUrl,
  };
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\sitemap.ts--------------------------------------------------------------------------------```import type { MetadataRoute } from "next";
import { siteConfig, defaultChangeFrequency } from "@/lib/seo";
import { projectCaseStudies } from "@/data/projects";
import { getPillars } from "@/lib/pillars";
import { serviceLocations } from "@/data/locations"; // <--- NEW IMPORT

const baseUrl = siteConfig.url.replace(/\/$/, "");

const normalizePath = (path: string) =>
  path === "/" ? baseUrl : `${baseUrl}${path}`;

const getPrimaryEntries = (now: Date): MetadataRoute.Sitemap =>
  siteConfig.primaryPages.map((path) => ({
    url: normalizePath(path),
    changeFrequency: defaultChangeFrequency,
    priority: path === "/" ? 1 : 0.7,
    lastModified: now,
  }));

const getProjectEntries = async (now: Date): Promise<MetadataRoute.Sitemap> =>
  projectCaseStudies.map((project) => ({
    url: `${baseUrl}/projects/${project.slug}`,
    changeFrequency: "yearly",
    priority: 0.6,
    lastModified: project.lastModified ? new Date(project.lastModified) : now,
  }));

const getPillarEntries = (now: Date): MetadataRoute.Sitemap => {
  const pillars = getPillars();

  return pillars.flatMap((pillar) => [
    {
      url: normalizePath(pillar.metadata.path ?? `/blog/${pillar.slug}`),
      changeFrequency: "weekly" as const,
      priority: 0.75,
      lastModified: now,
    },
    ...pillar.clusters.map((cluster) => ({
      url: normalizePath(cluster.metadata.path ?? `/blog/${pillar.slug}/${cluster.slug}`),
      changeFrequency: "weekly" as const,
      priority: 0.65,
      lastModified: now,
    })),
  ]);
};

// <--- NEW FUNCTION FOR LOCATION PAGES
const getLocationEntries = (now: Date): MetadataRoute.Sitemap =>
  serviceLocations.map((loc) => ({
    url: `${baseUrl}/locations/${loc.slug}`,
    changeFrequency: "weekly",
    priority: 0.85, // High priority for local SEO
    lastModified: now,
  }));

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const now = new Date();

  const [projectEntries] = await Promise.all([getProjectEntries(now)]);

  return [
    ...getPrimaryEntries(now),
    ...getLocationEntries(now), // <--- INJECTED HERE
    ...getPillarEntries(now),
    ...projectEntries,
  ];
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\about-us\page.tsx--------------------------------------------------------------------------------```// src/app/about-us/page.tsx
import Link from 'next/link';
import { ClipboardCheck, Medal, Scroll, Users, Phone, Wrench, Sprout, Shield } from 'lucide-react'; // Removed Layers, Home, Factory
import { buildPageMetadata } from '@/lib/metadata';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module'; // Reusing existing module
import { AccreditationsStrip } from '@/components/accreditations-strip'; // Reusing existing module

// --- Temporary Local Components for the About Page ---

// NOTE: In a professional setup, complex components like this would be moved 
// to src/components/about/section-name.tsx for clean architecture.

// Component for the "Experience" statistics grid
function ExperienceStatCard({ value, label, icon: Icon }: { value: string; label: string; icon: React.ElementType }) {
    return (
        <div className="flex flex-col items-center p-6 bg-primary border border-secondary/50 rounded-xl shadow-xl">
            <Icon className="w-8 h-8 text-secondary mb-3 animate-shake" />
            <h3 className="text-4xl font-extrabold text-white">{value}</h3>
            <p className="text-sm uppercase tracking-wider text-tertiary mt-1 font-semibold">{label}</p>
        </div>
    );
}

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Owner Supervised Painting Contractors - 50+ Years Experience | Maverick',
    description: 'Established in 2004, Maverick Painting offers structural repair and specialized coatings, backed by Independent 3rd Party Quality Assurance on every high-value project.',
    path: '/about-us',
});


// --- MAIN PAGE COMPONENT ---
export default function AboutUsPage() {
    return (
        <div className="bg-primary pt-24">
            
            {/* --- MODULE 1: THE AUTHORITY HERO (Experience & Mission) --- */}
            <section className="relative py-24 md:py-32 px-4 text-white">
                <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
                    
                    {/* LEFT: Headline & Core USP */}
                    <div className="lg:col-span-7">
                        <p className="text-xl font-medium uppercase tracking-widest text-secondary mb-2">
                            The Structural Asset Maintenance Partner
                        </p>
                        <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase text-white">
                            Driven by Experience. Built for Trust.
                        </h1>
                        <p className="text-xl font-light mt-6 max-w-2xl text-gray-400">
                            Maverick Painting was established in 2004 and is led by a management team with more than 50 years combined experience in the coatings and structural solutions industry. 
                            We are committed to verifiable safety, reliability, and guaranteed quality workmanship.
                        </p>

                        {/* Direct CTA */}
                        <Button asChild 
                            className="mt-8 bg-tertiary hover:bg-[#9ED529] text-primary font-bold text-lg h-12 shadow-xl transform hover:scale-[1.02]"
                        >
                            <Link href="/contact">
                                Get Your Verifiable Quote Now
                            </Link>
                        </Button>
                    </div>

                    {/* RIGHT: Visual Proof & Stats Grid */}
                    <div className="lg:col-span-5 space-y-6">
                        {/* Placeholder for Management Photo */}
                        <div className="w-full h-80 bg-gray-800 rounded-xl shadow-2xl flex items-center justify-center">
                            <span className="text-white/60 text-lg"></span>
                        </div>
                        
                        {/* Stats Grid */}
                        <div className="grid grid-cols-2 gap-4">
                            <ExperienceStatCard value="50+" label="Years Combined" icon={Medal} />
                            <ExperienceStatCard value="Est. 2004" label="Since Inception" icon={Scroll} />
                        </div>
                    </div>
                </div>
            </section>

            {/* --- MODULE 2: CORE PILLARS & INDEPENDENCE (4-Column Grid) --- */}
            <section className="bg-gray-900 py-24 px-4 border-t border-b border-primary/50">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-3xl mx-auto mb-16">
                         <h2 className="text-4xl font-extrabold uppercase text-white mb-3">
                            The Maverick Difference
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our process is built on four non-negotiable standards that de-risk the project for every high-value client.
                        </p>
                    </header>
                    
                    {/* 4-Column Feature Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        
                        {/* Pillar 1: Owner Supervision */}
                        <div className="p-6 bg-primary rounded-xl shadow-xl border-t-4 border-tertiary transform hover:shadow-tertiary/40 transition duration-300">
                            <Users className="w-8 h-8 text-tertiary mb-3" />
                            <h3 className="text-xl font-bold uppercase text-white mb-2">Daily Owner Supervision</h3>
                            <p className="text-gray-400 text-sm">
                                Every project is owner supervised daily with a dedicated foreman on-site, ensuring the highest quality of workmanship is maintained.
                            </p>
                        </div>

                        {/* Pillar 2: Specialized Access */}
                        <div className="p-6 bg-primary rounded-xl shadow-xl border-t-4 border-secondary transform hover:shadow-secondary/40 transition duration-300">
                            <Scroll className="w-8 h-8 text-secondary mb-3" />
                            <h3 className="text-xl font-bold uppercase text-white mb-2">Advanced Access Solutions</h3>
                            <p className="text-gray-400 text-sm">
                                We invest in advanced access methods, including scaffolding, rope access, and cherry pickers, to ensure cost-effective access to the most difficult surfaces.
                            </p>
                        </div>
                        
                        {/* Pillar 3: Manufacturer Compliance */}
                        <div className="p-6 bg-primary rounded-xl shadow-xl border-t-4 border-tertiary transform hover:shadow-tertiary/40 transition duration-300">
                            <Medal className="w-8 h-8 text-tertiary mb-3" />
                            <h3 className="text-xl font-bold uppercase text-white mb-2">Manufacturer Guarantees</h3>
                            <p className="text-gray-400 text-sm">
                                We work closely with the best paint & waterproofing manufacturers to issue manufacturer and workmanship guarantees.
                            </p>
                        </div>
                        
                        {/* Pillar 4: Independent QA (The Differentiator) */}
                        <div className="p-6 bg-primary rounded-xl shadow-xl border-t-4 border-secondary transform hover:shadow-secondary/40 transition duration-300">
                            <ClipboardCheck className="w-8 h-8 text-secondary mb-3" />
                            <h3 className="text-xl font-bold uppercase text-white mb-2">Independent QA Process</h3>
                            <p className="text-gray-400 text-sm">
                                We use independent 3rd party quality assurance on all projects, with fortnightly reports on progress and film thickness.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            {/* --- NEW MODULE 3: THE STRUCTURAL THESIS (Paint vs. Plaster) --- */}
            <section className="py-24 px-4 text-white bg-primary">
                 <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    
                    {/* LEFT: Core Structural Statement */}
                    <div className="lg:pr-12">
                        <span className="text-xl font-medium uppercase tracking-widest text-tertiary mb-2 block">
                            Our Core Thesis
                        </span>
                        <h2 className="text-5xl font-extrabold leading-tight uppercase mb-4">
                            We Don&apos;t Just Paint Over Problems.
                        </h2>
                        <p className="text-xl font-light text-gray-400">
                            We pivot the conversation from cosmetic painting to structural protection. Visible cracks, spalling, and damp are symptoms of deeper asset failure. We handle defect identification, structural repairs, waterproofing, and specialized coatings‚Äîproviding a complete turn-key solution.
                        </p>
                        
                        <Button asChild 
                            variant="link"
                            className="text-secondary hover:text-white mt-4 pl-0 text-lg font-bold"
                        >
                            <Link href="/structural-repairs">
                                Explore Our Structural Repair Services &rarr;
                            </Link>
                        </Button>
                    </div>

                    {/* RIGHT: Service Breakdown Grid (The Proof) */}
                    <div className="grid grid-cols-2 gap-6 p-4 bg-gray-900 rounded-xl shadow-2xl">
                         <div className="p-4">
                            <Wrench className="w-6 h-6 text-secondary mb-2" />
                            <h4 className="font-bold text-lg text-white">Structural Repairs</h4>
                            <p className="text-sm text-gray-400">Concrete spalling, crack injection, and expansion joint sealing are fixed structurally, not just patched.</p>
                        </div>
                        <div className="p-4">
                            <Shield className="w-6 h-6 text-tertiary mb-2" />
                            <h4 className="font-bold text-lg text-white">Waterproofing First</h4>
                            <p className="text-sm text-gray-400">Guaranteed systems for flat roofs and balconies using manufacturer-approved membranes and liquid-applied coatings.</p>
                        </div>
                         <div className="p-4">
                            <Sprout className="w-6 h-6 text-tertiary mb-2" />
                            <h4 className="font-bold text-lg text-white">Turn-Key Service</h4>
                            <p className="text-sm text-gray-400">From defect identification to preparation and final specialized coating application, we provide a full solution.</p>
                        </div>
                        <div className="p-4">
                            <ClipboardCheck className="w-6 h-6 text-secondary mb-2" />
                            <h4 className="font-bold text-lg text-white">Specialized Coatings</h4>
                            <p className="text-sm text-gray-400">We are one of a select few applicators for high-performance, industrial-grade floor and wall systems.</p>
                        </div>
                    </div>
                </div>
            </section>


            {/* --- MODULE 4: THE PROCESS IN DEPTH (Reusing existing module) --- */}
            {/* The QA Process module is perfectly suited for the narrative architecture. */}
            <QaProcessModule />

            {/* --- MODULE 5: ACCREDITATIONS (Reusing existing module) --- */}
            {/* Displaying logos to build visual trust. */}
            <AccreditationsStrip />

            {/* --- MODULE 6: FINAL CTA STRIP (Conversion Funnel) --- */}
            <section className="bg-header-dark py-12 px-4">
                <div className="max-w-7xl mx-auto text-center">
                    <h2 className="text-3xl font-extrabold text-white mb-4">
                        Ready for Verifiable, Zero-Risk Quality?
                    </h2>
                    <p className="text-gray-400 text-lg mb-6">
                        Contact us today to schedule an on-site assessment and receive your substrate-specific specification.
                    </p>
                     <Button asChild 
                        className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-xl h-14 shadow-2xl transform hover:scale-105"
                    >
                        <a href="tel:0826277082" className="flex items-center space-x-2">
                             <Phone className="w-6 h-6" />
                             <span>Call Lawrence Brooks: 082 627 7082</span>
                        </a>
                    </Button>
                </div>
            </section>

        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\access-solutions\page.tsx--------------------------------------------------------------------------------```// src/app/access-solutions/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { PersonStanding, Shield, TrendingUp, Truck } from 'lucide-react'; // REMOVED: Zap, Phone
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Rope Access & High-Access Painting Solutions | Cost-Effective & OHS Compliant',
    description: 'Expert rope access and high-access painting contractors. We use scaffolding, boom lifts, and certified rope access to provide cost-effective maintenance for high-rise facades and difficult-to-reach industrial areas.',
    path: '/access-solutions',
});

// --- TECHNICAL DATA FOR CONTENT MODULES ---
const AccessMethods = [
    {
        title: "Certified Rope Access",
        description: "IRATA/SAQA certified rope access teams provide flexible, fast, and cost-effective maintenance for high-rise and complex architectural structures.",
        icon: PersonStanding,
        accentColor: "border-secondary",
    },
    {
        title: "Scaffolding & Boom Lifts",
        description: "Utilizing professional, OHS-compliant scaffolding and mechanical access equipment (e.g., boom lifts) for extensive facade painting and repair projects.",
        icon: Truck,
        accentColor: "border-tertiary",
    },
    {
        title: "Full OHS Compliance",
        description: "Our safety file is comprehensive and audited. We eliminate all client liability by rigorously adhering to Occupational Health and Safety standards on site.",
        icon: Shield,
        accentColor: "border-secondary",
    },
    {
        title: "Cost & Time Efficiency",
        description: "Selecting the optimal access method‚Äîrope access for speed, scaffolding for stability‚Äîto maximize site efficiency and reduce total project cost.",
        icon: TrendingUp,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function AccessSolutionsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: ACCESS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Difficult Access Expertise
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Rope Access & High-Access Painting Solutions.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We provide safe, cost-effective solutions for all **difficult-to-reach facades and industrial structures**. Our certified teams eliminate the complexity and liability of working at height.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Inquire About Access Solutions &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: METHODS BREAKDOWN GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Access Methods Designed for Efficiency
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            We select the optimal method‚Äîrope access, scaffolding, or mechanical lifts‚Äîto maximize safety and minimize cost and time.
                        </p>
                    </header>

                    {/* Solutions Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {AccessMethods.map((method, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${method.accentColor}`}>
                                <method.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {method.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {method.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\accreditations\page.tsx--------------------------------------------------------------------------------```// src/app/accreditations/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
// FIX: Added Paintbrush to resolve TypeScript error.
import { Shield, Layers, Users, Factory, Award, Scroll, ClipboardCheck, Paintbrush } from 'lucide-react';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Approved Manufacturer Applicators & Certified Contractors | Maverick',
    description: 'View our official accreditations, manufacturer applicator status (Sika, Plascon, Marmoran), and compliance certificates (OHS, MBA, NAMA). Your guarantee of verifiable quality.',
    path: '/accreditations',
});

// --- DATA: MANUFACTURER PARTNERSHIPS ---
const ManufacturerPartners = [
    {
        name: "Sika Approved Contractor",
        expertise: "Waterproofing & Structural Repairs",
        icon: Layers,
        accentColor: "border-secondary",
    },
    {
        name: "Plascon Preferred Applicator",
        expertise: "Commercial & Industrial Coatings",
        icon: Factory,
        accentColor: "border-tertiary",
    },
    {
        name: "Dulux Accredited Painter",
        expertise: "High-Volume Residential & Facades",
        icon: Award,
        accentColor: "border-secondary",
    },
    {
        name: "Marmoran Master Applicator",
        expertise: "Specialized Decorative Finishes",
        icon: Paintbrush, 
        accentColor: "border-tertiary",
    },
];

// --- DATA: COMPLIANCE & SAFETY ---
const ComplianceChecklist = [
    {
        title: "MBA & NAMA Registered",
        description: "Official registration with Master Builders Association and National Association of Managing Agents.",
        icon: Users,
    },
    {
        title: "Full OHS Compliance",
        description: "Rigorously audited safety file, site management, and liability coverage for all high-access work.",
        icon: Shield,
    },
    {
        title: "Independent QA Process",
        description: "Commitment to using third-party inspectors for auditable proof of film thickness and application quality.",
        icon: ClipboardCheck,
    },
    {
        title: "Manufacturer Guarantees",
        description: "Ability to issue 5, 7, and 15-year guarantees co-signed by the material manufacturer.",
        icon: Scroll,
    },
];

// --- MAIN PAGE COMPONENT ---
export default function AccreditationsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: ACCREDITATION HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Verifiable Authority
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Certified Applicators. Guaranteed Quality.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We hold official **applicator status** with the world&apos;s leading coating manufacturers, ensuring every product warranty is valid and backed by expert application.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Verify Our Credentials & Get a Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: MANUFACTURER PARTNERSHIPS GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Official Manufacturer Applicator Status
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Manufacturer guarantees rely on the applicator. We are certified by these partners:
                        </p>
                    </header>

                    {/* Partnerships Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {ManufacturerPartners.map((partner, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${partner.accentColor}`}>
                                <partner.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {partner.name}
                                </h3>
                                <p className="text-tertiary text-sm font-semibold">
                                    {partner.expertise}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: COMPLIANCE CHECKLIST --- */}
            <section className="py-24 px-4 bg-gray-900">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3 text-white">
                            Industry & Safety Compliance Checklist
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            All necessary registrations and safety protocols are in place to eliminate client liability.
                        </p>
                    </header>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        {ComplianceChecklist.map((item, index) => (
                            <div key={index} className="flex items-start space-x-4 p-6 bg-primary rounded-xl shadow-xl">
                                <ClipboardCheck className="w-6 h-6 text-tertiary flex-shrink-0 mt-1" />
                                <div>
                                    <h3 className="text-xl font-bold uppercase mb-1 text-white">
                                        {item.title}
                                    </h3>
                                    <p className="text-gray-400 text-base">
                                        {item.description}
                                    </p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 4: ACCREDITATIONS STRIP (Reused Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\api\auth\[...nextauth]\route.ts--------------------------------------------------------------------------------```// src/app/api/auth/[...nextauth]/route.ts
import NextAuth from "next-auth";
import { authOptions } from "@/lib/auth";

// This dynamic file exports the NextAuth handler function, connecting it to our core configuration.

const handler = NextAuth(authOptions);

// Required by Next.js App Router for handling API requests
export { handler as GET, handler as POST };```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\api\revalidate\route.ts--------------------------------------------------------------------------------```import { NextResponse, type NextRequest } from "next/server";
import { revalidatePath, revalidateTag } from "next/cache";
import {
  getClusterBySlugs,
  getPillarBySlug,
  getPillars,
} from "@/lib/pillars";
import { clusterTag, pillarTag, GLOBAL_SITEMAP_TAG } from "@/lib/cache-tags";

type Scope = "all" | "pillar" | "cluster";

type RevalidatePayload = {
  secret?: string;
  scope?: Scope;
  pillar?: string;
  cluster?: string;
};

const REVALIDATE_SECRET = process.env.REVALIDATE_SECRET;

export async function POST(request: NextRequest) {
  if (!REVALIDATE_SECRET) {
    return NextResponse.json(
      { error: "Revalidation secret is not configured" },
      { status: 500 }
    );
  }

  let payload: RevalidatePayload;
  try {
    payload = await request.json();
  } catch {
    return NextResponse.json({ error: "Invalid JSON payload" }, { status: 400 });
  }

  if (payload.secret !== REVALIDATE_SECRET) {
    return NextResponse.json({ error: "Unauthorized" }, { status: 401 });
  }

  const scope: Scope = payload.scope ?? "all";

  try {
    if (scope === "all") {
      const results = revalidateEntireSite();
      return NextResponse.json({ revalidated: results }, { status: 200 });
    }

    if (scope === "pillar") {
      if (!payload.pillar) {
        return NextResponse.json(
          { error: "Missing 'pillar' slug" },
          { status: 400 }
        );
      }
      const result = revalidatePillar(payload.pillar);
      return NextResponse.json({ revalidated: [result] }, { status: 200 });
    }

    if (scope === "cluster") {
      if (!payload.pillar || !payload.cluster) {
        return NextResponse.json(
          { error: "Missing 'pillar' or 'cluster' slug" },
          { status: 400 }
        );
      }

      const result = revalidateCluster(payload.pillar, payload.cluster);
      return NextResponse.json({ revalidated: [result] }, { status: 200 });
    }

    return NextResponse.json({ error: "Unknown scope" }, { status: 400 });
  } catch (error) {
    return NextResponse.json(
      {
        error:
          error instanceof Error ? error.message : "Failed to trigger revalidation",
      },
      { status: 500 }
    );
  }
}

function revalidateEntireSite() {
  const results = getPillars().map((pillar) => revalidatePillar(pillar.slug));
  revalidateTag(GLOBAL_SITEMAP_TAG);
  revalidatePath("/sitemap.xml");
  return results;
}

function revalidatePillar(pillarSlug: string) {
  const pillar = getPillarBySlug(pillarSlug);
  if (!pillar) {
    throw new Error(`Unknown pillar slug: ${pillarSlug}`);
  }

  const paths = [pillar.metadata.path ?? `/blog/${pillar.slug}`, `/blog/${pillar.slug}`];
  paths.forEach((path) => revalidatePath(path));
  revalidateTag(pillarTag(pillar.slug));

  pillar.clusters.forEach((cluster) => {
    if (cluster.metadata.path) {
      revalidatePath(cluster.metadata.path);
    }
    revalidateTag(clusterTag(pillar.slug, cluster.slug));
  });

  return {
    pillar: pillar.slug,
    paths,
    clusters: pillar.clusters.map((cluster) => ({
      slug: cluster.slug,
      path: cluster.metadata.path,
    })),
  };
}

function revalidateCluster(pillarSlug: string, clusterSlug: string) {
  const cluster = getClusterBySlugs(pillarSlug, clusterSlug);
  if (!cluster) {
    throw new Error(
      `Unknown cluster '${clusterSlug}' for pillar '${pillarSlug}'`
    );
  }

  if (cluster.metadata.path) {
    revalidatePath(cluster.metadata.path);
  }
  revalidateTag(clusterTag(pillarSlug, clusterSlug));

  return {
    pillar: pillarSlug,
    cluster: clusterSlug,
    path: cluster.metadata.path,
  };
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\blog\page.tsx--------------------------------------------------------------------------------```// src/app/blog/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { BookOpen, Wrench, Layers, Building } from 'lucide-react';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Expertise Hub: Structural Repair, Waterproofing & Coating Guides | Maverick Blog',
    description: 'Read technical guides and expert advice on concrete spalling, high-performance epoxy coatings, industrial waterproofing, and managing body corporate maintenance projects.',
    path: '/blog',
});

// --- DATA: Content Categories (Future SEO Silos) ---
const ContentCategories = [
    { title: "Structural Remediation", icon: Wrench, description: "Deep dives into concrete cancer, crack injection, and spalling repair methodologies.", href: "/blog/structural-remediation" },
    { title: "Waterproofing & Damp", icon: Layers, description: "Guides on choosing the right torch-on or liquid membrane system for flat roofs and balconies.", href: "/blog/waterproofing" },
    { title: "Commercial & Industrial", icon: Building, description: "Best practices for facility managers, corrosion control, and large-scale project management.", href: "/blog/industrial" },
];

// --- MAIN PAGE COMPONENT ---
export default function BlogIndexPage() {
    return (
        <div className="bg-primary pt-24 text-white min-h-screen">

            {/* --- MODULE 1: BLOG HERO (Authority Statement) --- */}
            <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <BookOpen className="w-12 h-12 text-tertiary mb-4" />
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        The Expertise Hub. Technical Guides & Insights.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We don&apos;t just paint; we educate. Access expert resources on solving complex structural and waterproofing defects for high-value assets.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Contact an Expert Now &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: CONTENT CATEGORIES (SEO Silo Links) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Explore Technical Categories
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Jump straight into the expert knowledge required to protect your asset.
                        </p>
                    </header>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {ContentCategories.map((category, index) => (
                            <Link key={index} href={category.href}
                                className="p-8 bg-gray-900 rounded-xl shadow-xl border-t-4 border-tertiary 
                                           transition-all duration-300 transform hover:scale-[1.03] hover:shadow-tertiary/50 group"
                            >
                                <category.icon className="w-8 h-8 text-secondary mb-4 group-hover:text-tertiary" />
                                <h3 className="text-2xl font-bold uppercase mb-2 text-white">
                                    {category.title}
                                </h3>
                                <p className="text-gray-400 text-base">
                                    {category.description}
                                </p>
                                <span className="text-tertiary font-bold mt-4 block group-hover:text-white transition-colors">
                                    View Articles &rarr;
                                </span>
                            </Link>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: FEATURED ARTICLES (Placeholder for Dynamic Content) --- */}
            <section className="py-24 px-4 bg-gray-900">
                <div className="max-w-7xl mx-auto">
                    <h2 className="text-4xl font-extrabold uppercase mb-12">
                        Latest Insights
                    </h2>
                    
                    {/* Placeholder for fetching and mapping dynamic articles */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-center text-gray-500 italic">
                        <p className="p-12 bg-primary rounded-xl">Article Placeholder 1 (Requires CMS/Database Integration)</p>
                        <p className="p-12 bg-primary rounded-xl">Article Placeholder 2 (Requires CMS/Database Integration)</p>
                        <p className="p-12 bg-primary rounded-xl">Article Placeholder 3 (Requires CMS/Database Integration)</p>
                    </div>
                </div>
            </section>

            {/* --- MODULE 4: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\blog\[pillar]\layout.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { notFound } from "next/navigation";
import type { ReactNode } from "react";
import { getPillarBySlug } from "@/lib/pillars";

type PillarLayoutProps = {
  children: ReactNode;
  params: { pillar: string };
};

export default function PillarLayout({ children, params }: PillarLayoutProps) {
  const pillar = getPillarBySlug(params.pillar);

  if (!pillar) {
    notFound();
  }

  return (
    <div className="min-h-screen bg-primary/5 text-primary">
      <div className="bg-gray-950 text-white border-b border-white/10">
        <div className="max-w-7xl mx-auto px-4 py-4 flex flex-wrap gap-4 items-center justify-between">
          <div className="flex items-center gap-3 text-sm uppercase tracking-wide">
            <Link href="/blog" className="text-secondary font-semibold">
              ‚Üê All Guides
            </Link>
            <span className="text-gray-500">/</span>
            <span className="font-semibold">{pillar.title}</span>
          </div>

          <div className="flex flex-wrap gap-3 text-sm">
            {pillar.clusters.map((cluster) => (
              <Link
                key={cluster.slug}
                href={`/blog/${pillar.slug}/${cluster.slug}`}
                className="px-3 py-1 rounded-full border border-white/20 hover:border-secondary hover:text-secondary transition-colors"
              >
                {cluster.title}
              </Link>
            ))}
          </div>
        </div>
      </div>
      {children}
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\blog\[pillar]\page.tsx--------------------------------------------------------------------------------```import { notFound } from "next/navigation";
import type { Metadata } from "next";
import { buildPageMetadata } from "@/lib/metadata";
import {
  getPillarBySlug,
  getPillarStaticParams,
  getPillarJsonLd,
} from "@/lib/pillars";

type PillarPageProps = {
  params: Promise<{ pillar: string }>;
};

export function generateStaticParams() {
  return getPillarStaticParams();
}

export async function generateMetadata({ params }: PillarPageProps): Promise<Metadata> {
  const { pillar: pillarSlug } = await params;
  const pillar = getPillarBySlug(pillarSlug);
  if (!pillar) {
    return {};
  }
  return buildPageMetadata(pillar.metadata);
}

export default async function PillarPage({ params }: PillarPageProps) {
  const { pillar: pillarSlug } = await params;
  const pillar = getPillarBySlug(pillarSlug);
  if (!pillar) {
    notFound();
  }

  const PillarComponent = pillar.component;

  const jsonLd = getPillarJsonLd(pillar.slug);

  return (
    <>
      {jsonLd ? (
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
        />
      ) : null}
      <PillarComponent />
    </>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\blog\[pillar]\[cluster]\opengraph-image.tsx--------------------------------------------------------------------------------```import { ImageResponse } from 'next/og'
import { getClusterBySlugs } from '@/lib/pillars'

export const runtime = 'edge'
export const size = { width: 1200, height: 630 }
export const contentType = 'image/png'

export const headers = {
  'Cache-Control': 'public, max-age=86400, stale-while-revalidate=3600',
}

export default async function Image({ params }: { params: { pillar: string; cluster: string } }) {
  const cluster = getClusterBySlugs(params.pillar, params.cluster)
  const title = cluster?.title || 'Maverick Painting Technical Guide'
  const category = params.pillar.replace('-', ' ').toUpperCase()

  return new ImageResponse(
    (
      <div
        style={{
          background: '#171716', // Primary Dark
          width: '100%',
          height: '100%',
          display: 'flex',
          flexDirection: 'column',
          padding: '80px',
          justifyContent: 'space-between',
        }}
      >
        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '16px', background: '#5AD5E2' }} />
        <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>
          <div style={{ fontSize: 32, color: '#A9D834', letterSpacing: '0.1em', fontWeight: 700, textTransform: 'uppercase' }}>
            {category} GUIDE
          </div>
          <div style={{ fontSize: 72, color: 'white', fontWeight: 900, lineHeight: 1.1, textTransform: 'uppercase' }}>
            {title}
          </div>
        </div>
        <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>
          <div style={{ width: '60px', height: '60px', background: '#A9D834', borderRadius: '50%' }} />
          <div style={{ fontSize: 30, color: 'gray', fontWeight: 600 }}>MAVERICK PAINTING</div>
        </div>
      </div>
    ),
    { ...size }
  )
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\blog\[pillar]\[cluster]\page.tsx--------------------------------------------------------------------------------```import type { Metadata } from "next";
import { notFound } from "next/navigation";
import { buildPageMetadata } from "@/lib/metadata";
import {
  getClusterBySlugs,
  getClusterStaticParams,
  getPillarBySlug,
  getClusterJsonLd,
} from "@/lib/pillars";

type ClusterPageProps = {
  params: Promise<{ pillar: string; cluster: string }>;
};

export function generateStaticParams() {
  return getClusterStaticParams();
}

export async function generateMetadata({ params }: ClusterPageProps): Promise<Metadata> {
  const { pillar: pillarSlug, cluster: clusterSlug } = await params;
  const cluster = getClusterBySlugs(pillarSlug, clusterSlug);
  if (!cluster) {
    return {};
  }
  return buildPageMetadata(cluster.metadata);
}

export default async function ClusterPage({ params }: ClusterPageProps) {
  const { pillar: pillarSlug, cluster: clusterSlug } = await params;
  const cluster = getClusterBySlugs(pillarSlug, clusterSlug);
  const pillar = getPillarBySlug(pillarSlug);

  if (!cluster || !pillar) {
    notFound();
  }

  const ClusterComponent = cluster.component;
  const jsonLd = getClusterJsonLd(pillar.slug, cluster.slug);

  return (
    <>
      {jsonLd ? (
        <script
          type="application/ld+json"
          dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
        />
      ) : null}
      <ClusterComponent />
    </>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\coatings\hygienic-food-grade-flooring\page.tsx--------------------------------------------------------------------------------```// src/app/coatings/hygienic-food-grade-flooring/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { FlaskConical, Beaker, Utensils, Shield } from 'lucide-react'; 
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Food-Grade & Hygienic Epoxy Flooring Contractors | HACCP Compliance',
    description: 'Seamless, non-porous, and chemical-resistant epoxy and polyurethane floor systems for food and beverage plants, commercial kitchens, and healthcare facilities. Guaranteed HACCP compliance.',
    path: '/coatings/hygienic-food-grade-flooring',
});

// --- KEY FEATURES DATA ---
const HygienicFeatures = [
    {
        title: "Seamless & Non-Porous",
        description: "Creates a joint-free, non-absorbent surface that prevents bacteria growth and simplifies wash-down procedures, crucial for HACCP compliance.",
        icon: FlaskConical,
        accentColor: "border-tertiary",
    },
    {
        title: "Chemical & Thermal Shock",
        description: "Systems are designed to withstand aggressive cleaning agents and rapid temperature changes common in commercial kitchens and processing areas.",
        icon: Beaker,
        accentColor: "border-secondary",
    },
    {
        title: "Safety & Slip Resistance",
        description: "Customized aggregate finishes provide controlled slip resistance, improving staff safety in wet processing zones.",
        icon: Shield,
        accentColor: "border-tertiary",
    },
    {
        title: "Minimal Disruption Install",
        description: "Utilizing fast-curing resins to minimize downtime, allowing facilities to return to operation faster than traditional flooring methods.",
        icon: Utensils,
        accentColor: "border-secondary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function HygienicFlooringPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: INDUSTRIAL FOCUS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Specialized Floor Systems
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Hygienic Food-Grade Epoxy & Floor Coatings.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We deliver **HACCP-compliant, seamless resin floors** required for food and beverage processing, pharmaceutical, and cleanroom facilities where cleanliness is paramount.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Hygienic Floor Specification &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Features of Compliant Flooring
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our systems meet the most stringent regulatory requirements for seamlessness and cleanability.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {HygienicFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\contact\page.tsx--------------------------------------------------------------------------------```// src/app/contact/page.tsx
import { Phone, Mail, MapPin, MessageCircle, Layers, ClipboardCheck, Scroll } from 'lucide-react'; 
import { Button } from '@/components/ui/button';
import { HeroContactForm } from '@/components/hero-contact-form'; // Reusing the form logic
import { buildPageMetadata } from '@/lib/metadata';


// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Get a Professional Painting, Structural Repair Quote | Contact Maverick',
    description: 'Contact Maverick Painting for a free site assessment and comprehensive quote. Specialized solutions for Body Corporates, Developers, and high-value properties in Gauteng, South Africa.',
    path: '/contact',
});

// --- MAIN PAGE COMPONENT ---
export default function ContactPage() {
    return (
        <div className="bg-primary pt-24 text-white">
            
            {/* --- MODULE 1: CONVERSION HERO --- */}
            <section className="relative py-20 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12">
                    
                    {/* LEFT (Server Component): Dynamic Contact Info & Trust Signals */}
                    <div className="lg:col-span-6 space-y-10 lg:pr-12">
                        <header>
                            <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-2">
                                Talk to a Specialist
                            </p>
                            <h1 className="text-5xl md:text-6xl font-extrabold leading-tight uppercase text-white">
                                Eliminate Risk. Get a Verifiable Quote.
                            </h1>
                            <p className="text-xl font-light mt-4 text-gray-400">
                                Schedule your free on-site assessment now. Our technical team is ready to assist with substrate-specific specifications for your high-value asset.
                            </p>
                        </header>

                        {/* Direct Contact Links (High Visual Priority) */}
                        <div className="space-y-8 p-6 bg-primary rounded-xl shadow-2xl border border-gray-800">
                            
                            <div className="flex items-center space-x-4">
                                <Phone className="w-10 h-10 text-tertiary flex-shrink-0" />
                                <div>
                                    <p className="text-sm font-semibold uppercase text-gray-400">Call Lawrence Brooks (Owner Supervision)</p>
                                    <a href="tel:0826277082" className="text-3xl font-extrabold text-tertiary hover:text-white transition-colors">
                                        082 627 7082
                                    </a>
                                </div>
                            </div>
                            
                            <div className="flex items-center space-x-4 border-t border-gray-800 pt-4">
                                <Mail className="w-10 h-10 text-secondary flex-shrink-0" />
                                <div>
                                    <p className="text-sm font-semibold uppercase text-gray-400">Email for Technical Specifications</p>
                                    <a href="mailto:maverickpainters1984@gmail.com" className="text-xl font-bold text-white hover:text-tertiary transition-colors">
                                        maverickpainters1984@gmail.com
                                    </a>
                                </div>
                            </div>
                        </div>

                        {/* Trust Bar Section: Core USPs */}
                         <div className="pt-6 space-y-4">
                            <h3 className="text-xl font-bold uppercase text-secondary">Why Quote with Maverick?</h3>
                            <div className="grid grid-cols-2 gap-4 text-gray-400">
                                <p className="flex items-center space-x-2 text-sm">
                                    <Layers className="w-5 h-5 text-tertiary" />
                                    <span>Specialized, Structural Solutions.</span>
                                </p>
                                <p className="flex items-center space-x-2 text-sm">
                                    <ClipboardCheck className="w-5 h-5 text-tertiary" />
                                    <span>Independent 3rd Party QA.</span>
                                </p>
                                <p className="flex items-center space-x-2 text-sm">
                                    <Scroll className="w-5 h-5 text-tertiary" />
                                    <span>Manufacturer Guarantees Issued.</span>
                                </p>
                                <p className="flex items-center space-x-2 text-sm">
                                    <MapPin className="w-5 h-5 text-tertiary" />
                                    <span>Gauteng-Wide Service Area.</span>
                                </p>
                            </div>
                        </div>

                    </div>

                    {/* RIGHT (Client Component): The Form Container */}
                    <div className="lg:col-span-6 flex justify-center lg:pl-12">
                        {/* HeroContactForm already contains its own white/shadow card styling */}
                        <HeroContactForm />
                    </div>

                </div>
            </section>
            
            {/* --- MODULE 2: FOOTER CTA STRIP (WhatsApp Focus) --- */}
            <section className="bg-header-dark py-12 px-4 border-t border-primary/50">
                <div className="max-w-7xl mx-auto text-center">
                    <h2 className="text-3xl font-extrabold text-white mb-4">
                        Prefer WhatsApp? Get a Quick Response.
                    </h2>
                    <p className="text-gray-400 text-lg mb-6">
                        Send us pictures of your defect or project scope now for immediate attention.
                    </p>
                     <Button asChild 
                        className="bg-whatsapp-green hover:bg-[#25C356] text-primary font-bold text-xl h-14 shadow-2xl transform hover:scale-105"
                    >
                        <a href="https://wa.me/27826277082" target="_blank" rel="noopener noreferrer" className="flex items-center space-x-2">
                             <MessageCircle className="w-6 h-6" />
                             <span>WhatsApp Maverick Painting</span>
                        </a>
                    </Button>
                </div>
            </section>

        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\damp-proofing-services\page.tsx--------------------------------------------------------------------------------```// src/app/damp-proofing-services/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Droplet, Sprout, Building, MessageSquare } from 'lucide-react'; // REMOVED: AirVent
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Rising Damp & Damp Proofing Solutions | Chemical DPC & Moisture Control',
    description: 'Specialized rising damp treatment contractors offering guaranteed chemical DPC (Damp Proof Course) injection and full moisture control solutions for basements and ground-level walls.',
    path: '/damp-proofing-services',
});

// --- KEY FEATURES DATA ---
const DampFeatures = [
    {
        title: "Chemical DPC Injection",
        description: "Permanent solution for rising damp via pressure injection of silicone-based cream to form a new, effective damp-proof barrier in the masonry.",
        icon: Droplet,
        accentColor: "border-secondary",
    },
    {
        title: "Basement Waterproofing",
        description: "Internal tanking and cementitious slurry systems applied to negative-side walls to stop moisture ingress in below-ground structures.",
        icon: Building,
        accentColor: "border-tertiary",
    },
    {
        title: "Mold Remediation Protocol",
        description: "Full cleaning and treatment protocol to remediate mold and mildew resulting from condensation or rising damp, ensuring a healthy indoor environment.",
        icon: Sprout,
        accentColor: "border-secondary",
    },
    {
        title: "Verifiable Diagnostics",
        description: "Utilizing professional moisture meters and thermal imaging to accurately diagnose the source of damp before specifying treatment.",
        icon: MessageSquare,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function DampProofingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: DAMP PROOFING HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Moisture Control & Remediation
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Guaranteed Rising Damp & Damp Proofing Solutions.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We provide **permanent chemical damp proof course (DPC) injection** and full basement tanking systems to eliminate moisture ingress, protecting your structural assets from mold and decay.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Damp Assessment & Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Verifiable Damp Remediation Methods
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            We solve the root cause of the damp problem, ensuring a long-term guarantee against re-occurrence.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {DampFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\locations\[city]\page.tsx--------------------------------------------------------------------------------```import { notFound } from "next/navigation";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { AccreditationsStrip } from "@/components/accreditations-strip";
import { MapPin, CheckSquare, Shield, Phone } from "lucide-react";
import { serviceLocations, getLocation } from "@/data/locations";
import { siteConfig } from "@/lib/seo";
import { buildPageMetadata } from "@/lib/metadata";

// 1. Static Params Generation
export function generateStaticParams() {
  return serviceLocations.map((location) => ({
    city: location.slug,
  }));
}

// 2. Dynamic SEO Metadata (Next.js 16: async params)
export async function generateMetadata({ params }: { params: Promise<{ city: string }> }) {
  const { city } = await params;
  const loc = getLocation(city);
  if (!loc) return {};

  return buildPageMetadata({
    title: loc.metaTitle,
    description: loc.metaDescription,
    path: `/locations/${loc.slug}`,
  });
}

// 3. The Local Landing Page Component (Next.js 16: async params)
export default async function LocationPage({ params }: { params: Promise<{ city: string }> }) {
  const { city } = await params;
  const loc = getLocation(city);
  if (!loc) notFound();

  const localSchema = {
    "@context": "https://schema.org",
    "@type": "Service",
    "name": `Painting & Waterproofing in ${loc.name}`,
    "provider": {
      "@type": "LocalBusiness",
      "name": siteConfig.name,
      "address": {
        "@type": "PostalAddress",
        "addressLocality": loc.name,
        "addressRegion": "Gauteng",
        "addressCountry": "ZA"
      }
    },
    "areaServed": {
      "@type": "City",
      "name": loc.name
    }
  };

  return (
    <div className="bg-primary pt-24 text-white">
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(localSchema) }}
      />

      {/* HERO SECTION */}
      <section className="relative py-24 px-4 bg-gray-900 border-b-4 border-secondary">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center space-x-2 text-tertiary mb-4">
            <MapPin className="w-5 h-5" />
            <span className="uppercase tracking-widest font-bold">{loc.name} Contractor</span>
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl mb-6">
            Reliable Asset Maintenance in {loc.name}.
          </h1>
          <p className="text-xl text-gray-400 max-w-3xl mb-8">
            We provide owner-supervised structural repairs, waterproofing, and painting services 
            specifically for commercial and body corporate assets near 
            <span className="text-white font-semibold"> {loc.landmarks.join(", ")}</span>.
          </p>
          <Button asChild className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 px-8">
            <Link href="/contact">Get a {loc.name} Quote &rarr;</Link>
          </Button>
        </div>
      </section>

      {/* LOCAL SERVICE GRID */}
      <section className="py-20 px-4 bg-primary">
        <div className="max-w-7xl mx-auto">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-tertiary">
              <Shield className="w-10 h-10 text-tertiary mb-4" />
              <h3 className="text-2xl font-bold mb-2">{loc.name} Waterproofing</h3>
              <p className="text-gray-400">Guaranteed flat roof and balcony systems designed for the specific climate challenges of {loc.name}.</p>
            </div>
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-secondary">
              <CheckSquare className="w-10 h-10 text-secondary mb-4" />
              <h3 className="text-2xl font-bold mb-2">Independent QA</h3>
              <p className="text-gray-400">We bring independent inspectors to every site in {loc.name} to verify film thickness and adhesion.</p>
            </div>
            <div className="p-8 bg-gray-900 rounded-xl border-t-4 border-tertiary">
              <Phone className="w-10 h-10 text-tertiary mb-4" />
              <h3 className="text-2xl font-bold mb-2">Fast Response</h3>
              <p className="text-gray-400">Our teams are active in {loc.landmarks[0]} and surrounding areas daily, ensuring rapid assessment times.</p>
            </div>
          </div>
        </div>
      </section>

      <AccreditationsStrip />
      <CtaFinalStrip />
    </div>
  );
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\our-process-independent-qa\page.tsx--------------------------------------------------------------------------------```// src/app/our-process-independent-qa/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
// import { QaProcessModule } from '@/components/qa-process-module'; // REMOVED: Replaced by custom module below
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Scroll, CheckSquare, FileText, BarChart } from 'lucide-react';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Independent 3rd Party QA Process & Guarantee | Maverick Painting',
    description: 'Learn how our Independent 3rd Party Quality Assurance (QA) process eliminates project risk. Receive bi-weekly reports on film thickness and application quality, guaranteed.',
    path: '/our-process-independent-qa',
});

// --- TECHNICAL DATA FOR THE PROCESS MODULE ---
const FullQAProcess = [
    {
        step: 1,
        title: "Pre-Project Substrate Assessment",
        description: "An independent coatings inspector conducts the initial hammer tests, moisture readings, and adhesion tests. We use this data to finalize a **non-negotiable technical specification** that includes material type, minimum film thickness, and preparation method.",
        icon: Scroll,
    },
    {
        step: 2,
        title: "Mandatory Surface Preparation Checks",
        description: "The inspector verifies that surface preparation (e.g., crack cleaning, spalling repair, washing) meets SANS and manufacturer standards *before* primer is applied. This ensures maximum adhesion and product lifespan.",
        icon: CheckSquare,
    },
    {
        step: 3,
        title: "Film Thickness Measurement & Verification",
        // FIX: Replaced single quote ' with &apos; to escape the character
        description: "The inspector monitors the **Wet Film Thickness (WFT)** and **Dry Film Thickness (DFT)** of every coat. This is critical: if minimum thickness is not met, the manufacturer guarantee is void. We ensure it&apos;s verified.",
        icon: BarChart,
    },
    {
        step: 4,
        title: "Bi-Weekly Progress & Technical Reporting",
        description: "You receive a comprehensive report every two weeks detailing all tests, compliance checks, and a visual project overview. This provides **total, verifiable transparency** for trustees or building owners.",
        icon: FileText,
    },
];

// --- MAIN PAGE COMPONENT ---
export default function IndependentQAPage() {
    return (
        <div className="bg-gray-50 pt-24">

            {/* --- MODULE 1: TRUST HERO (Server Component) --- */}
            <section className="relative py-24 md:py-40 px-4 bg-primary text-white border-b-4 border-tertiary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-secondary mb-3">
                        Our Unbeatable De-Risking Strategy
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-4xl">
                        Independent QA. The Only Real Guarantee.
                    </h1>
                    <p className="text-2xl font-light mt-6 max-w-3xl text-gray-400">
                        We do not rely on self-inspection. We pay a trusted, **independent 3rd party** to verify every critical phase of your high-value project, giving you auditable, bi-weekly proof of quality.
                    </p>

                    <Button asChild
                        className="mt-10 bg-tertiary hover:bg-[#9ED529] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Eliminate Risk & Get a Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: FULL PROCESS BREAKDOWN (Custom Module for Depth) --- */}
            <section className="py-24 px-4 bg-gray-50">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-3xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase text-primary mb-3">
                            The Four Steps to Auditable Quality
                        </h2>
                        <p className="text-lg text-gray-700 font-light">
                            Our process is co-signed by the manufacturer, the contractor (Maverick), and the independent inspection body.
                        </p>
                    </header>

                    {/* Timeline/Steps Grid */}
                    <div className="space-y-12">
                        {FullQAProcess.map((item) => (
                            <div key={item.step} className="flex flex-col md:flex-row space-x-0 md:space-x-12 items-start group">
                                <div className="flex-shrink-0 mb-4 md:mb-0 w-full md:w-48">
                                    <div className="text-5xl font-extrabold text-secondary group-hover:text-tertiary transition-colors">
                                        {`0${item.step}`}
                                    </div>
                                    <h3 className="text-2xl font-bold uppercase text-primary mt-1">
                                        {`Step ${item.step}`}
                                    </h3>
                                </div>
                                <div className="flex-1 border-l-4 border-gray-300 pl-6 py-2 rounded-r-lg group-hover:border-secondary transition-colors duration-300">
                                    <div className="flex items-center space-x-4 mb-3">
                                        <item.icon className="w-8 h-8 text-secondary group-hover:text-tertiary transition-colors" />
                                        <h4 className="text-2xl font-bold text-primary">{item.title}</h4>
                                    </div>
                                    <p className="text-lg text-gray-700">
                                        {item.description}
                                    </p>
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="mt-16 text-center">
                        <p className="text-xl font-semibold text-primary">Ready for a guarantee that holds up to scrutiny?</p>
                        <Button asChild
                            className="mt-4 bg-primary hover:bg-gray-800 text-white font-bold text-lg h-12 shadow-xl"
                        >
                            <Link href="/contact">
                                Request Auditable Quote &rarr;
                            </Link>
                        </Button>
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 4: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\painting\body-corporate-painting\page.tsx--------------------------------------------------------------------------------```// src/app/painting/body-corporate-painting/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Paintbrush, Truck, Users, Clock } from 'lucide-react'; // REMOVED: Building
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Large-Scale Body Corporate Painting Contractors Gauteng | Auditable Quality',
    description: 'Expert residential complex and Body Corporate painting services. We ensure minimal resident disturbance, full site compliance, and transparent Independent QA on all common property painting projects.',
    path: '/painting/body-corporate-painting',
});

// --- KEY FEATURES DATA ---
const ProjectFeatures = [
    {
        title: "Owner Supervision",
        description: "Every project is overseen daily by a director or senior manager, ensuring quality standards are maintained.",
        icon: Users,
        accentColor: "border-tertiary",
    },
    {
        title: "Advanced Access",
        description: "We utilize our own scaffolding and high-access methods to manage costs and ensure safe, compliant painting of high-rise structures.",
        icon: Truck,
        accentColor: "border-secondary",
    },
    {
        title: "Minimal Disruption",
        description: "Strict scheduling and site cleanup protocols minimize noise and inconvenience for residents and unit owners.",
        icon: Clock,
        accentColor: "border-tertiary",
    },
    {
        title: "Common Property Focus",
        description: "Specialized in common area painting, including boundary walls, guard houses, lift shafts, and large unit facades.",
        icon: Paintbrush,
        accentColor: "border-secondary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function BodyCorporatePaintingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: PAINTING FOCUS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Large-Scale Residential Complexes
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Dedicated Body Corporate Painting Services.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We deliver the durability and compliance required by trustees, supported by our **Independent QA guarantee** that eliminates debates over application quality.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Get Quote for Common Property &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Project Management That Works for Residents
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our team is optimized for efficiency and resident respect when working in complex, high-density residential environments.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {ProjectFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                    
                    <div className="mt-12 text-center">
                         <Button asChild
                            variant="link"
                            className="text-tertiary hover:text-white mt-4 pl-0 text-lg font-bold"
                        >
                            <Link href="/solutions/for-body-corporates">
                                See How We Eliminate Trustee Risk &rarr;
                            </Link>
                        </Button>
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\painting\commercial-painting\page.tsx--------------------------------------------------------------------------------```// src/app/painting/commercial-painting/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Stethoscope, ClipboardCheck, MessageCircle, Building } from 'lucide-react'; 
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Commercial & Healthcare Painting Contractors | Low-VOC & Sensitive Environment Coatings',
    description: 'Specialist low-VOC and anti-microbial coating application for commercial offices, healthcare facilities, and retail spaces. We ensure minimal disruption and high air quality compliance.',
    path: '/painting/commercial-painting',
});

// --- KEY FEATURES DATA ---
const CommercialFeatures = [
    {
        title: "Low-VOC / Zero-VOC Coatings",
        description: "Application of specialized paints that maintain high air quality and minimize disruption, essential for occupied offices, schools, and hospitals.",
        icon: MessageCircle,
        accentColor: "border-tertiary",
    },
    {
        title: "Healthcare Grade Finishes",
        description: "Anti-microbial and fungicidal coatings for facilities where hygiene is critical, applied following strict healthcare application protocols.",
        icon: Stethoscope,
        accentColor: "border-secondary",
    },
    {
        title: "Managed Disruption",
        description: "Projects are tightly managed, often executed after hours or in phased sections to ensure commercial operations continue seamlessly.",
        icon: Building,
        accentColor: "border-tertiary",
    },
    {
        title: "Compliance Documentation",
        description: "Full documentation provided for all products and application methods, ensuring compliance for property managers and facilities.",
        icon: ClipboardCheck,
        accentColor: "border-secondary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function CommercialPaintingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: COMMERCIAL FOCUS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Sensitive Environment Coatings
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Low-VOC Commercial & Healthcare Painting.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We specialize in **sensitive environment coatings** for offices and medical facilities, guaranteeing high air quality, minimal disruption, and certified hygiene finishes.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Commercial Site Assessment &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Solutions for Occupied & Sensitive Spaces
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our application methods are designed around maintaining site operations and air quality.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {CommercialFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\painting\high-volume-commercial-painting\page.tsx--------------------------------------------------------------------------------```// src/app/painting/high-volume-commercial-painting/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Scale, Factory, Clock, Building } from 'lucide-react'; 
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Large-Scale Commercial Painting Contractors | High-Volume Industrial Facades',
    description: 'High-volume commercial painting services for large retail centres, office blocks, and industrial complexes. We specialize in projects requiring strict scheduling and multi-phase execution.',
    path: '/painting/high-volume-commercial-painting',
});

// --- KEY FEATURES DATA ---
const VolumeFeatures = [
    {
        title: "Large-Scale Capacity",
        description: "Dedicated project management and labor resources to handle painting projects exceeding R1 million in value and complex commercial specifications.",
        icon: Scale,
        accentColor: "border-secondary",
    },
    {
        title: "Multi-Phase Scheduling",
        description: "Expertise in segmenting large sites into multi-phase execution plans to minimize operational disruption and maintain access control.",
        icon: Clock,
        accentColor: "border-tertiary",
    },
    {
        title: "Commercial Facade Restoration",
        description: "Specialized in preparation and coating systems tailored to protect modern commercial facades against weathering and environmental pollutants.",
        icon: Building,
        accentColor: "border-secondary",
    },
    {
        title: "Industrial Complex Painting",
        description: "High-level access and specialized anti-corrosion applications for painting large industrial sites, warehouses, and storage depots.",
        icon: Factory,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function HighVolumeCommercialPaintingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: HIGH-VOLUME HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Project Volume Expertise
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        High-Volume Commercial & Large-Scale Painting.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We are the preferred contractors for large retail groups and property management firms, specializing in **high-volume, multi-phase commercial painting** and asset restoration.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Large Project Tender &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Capacity Built for Scale & Scheduling
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our resources and project planning are optimized to deliver large commercial tenders on time and within operational constraints.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {VolumeFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\painting\industrial-painting\page.tsx--------------------------------------------------------------------------------```// src/app/painting/industrial-painting/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Factory, Shield, Wrench, Sprout } from 'lucide-react'; 
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Industrial Painting & Corrosion Control Contractors | Plant & Steel Structures',
    description: 'Specialist industrial painting services including corrosion control, surface preparation (abrasive blasting), and protective coatings for factories, plants, and steel structures.',
    path: '/painting/industrial-painting',
});

// --- KEY FEATURES DATA ---
const IndustrialFeatures = [
    {
        title: "Corrosion Control Systems",
        description: "Application of specialized zinc-rich primers, epoxies, and polyurethanes designed to prevent rust and corrosion in extreme industrial environments.",
        icon: Shield,
        accentColor: "border-secondary",
    },
    {
        title: "Abrasive Blasting Prep",
        description: "Mandatory surface preparation via abrasive blasting or hydro-blasting to achieve the necessary profile (e.g., SA 2.5) for optimal coating adhesion and longevity.",
        icon: Wrench,
        accentColor: "border-tertiary",
    },
    {
        title: "High-Volume Execution",
        description: "Expertise in managing large-scale, complex industrial sites, minimizing plant downtime and adhering to strict safety shutdown schedules.",
        icon: Factory,
        accentColor: "border-secondary",
    },
    {
        title: "OHS & Site Compliance",
        description: "Full compliance with all Occupational Health and Safety regulations, including comprehensive safety files for industrial sites.",
        icon: Sprout,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function IndustrialPaintingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: INDUSTRIAL FOCUS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Plant Asset Protection
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Industrial Painting & Corrosion Control Services.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We specialize in the **protective coating of industrial assets**, steel structures, and plant machinery, ensuring long-term defense against chemical wear and atmospheric corrosion.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Plant Assessment & Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT FEATURES GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Specialized Industrial Solutions
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our process focuses on the longevity of the coating system, starting with superior surface preparation.
                        </p>
                    </header>

                    {/* Features Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {IndustrialFeatures.map((feature, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${feature.accentColor}`}>
                                <feature.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {feature.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {feature.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\painting-services\page.tsx--------------------------------------------------------------------------------```// src/app/painting-services/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Building, Factory, Wrench, Truck } from 'lucide-react'; // REMOVED: Paintbrush, Phone
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Commercial & High-Access Painting Contractors | Industrial & Body Corporate',
    description: 'Specialist large-scale painting services for industrial sites, factories, and commercial buildings. Expert high-access, rope access, and cost-effective solutions with Independent QA.',
    path: '/painting-services',
});

// --- TECHNICAL DATA FOR CONTENT MODULES ---
const CommercialPaintingServices = [
    {
        title: "Industrial & Factory Painting",
        description: "Application of specialized corrosion control and protective coatings for steel structures, silos, and internal factory assets in harsh environments.",
        icon: Factory,
        accentColor: "border-secondary",
    },
    {
        title: "Commercial & Retail Facades",
        description: "High-volume, complex exterior and interior coating solutions for shopping centres, office parks, and multi-story commercial properties.",
        icon: Building,
        accentColor: "border-tertiary",
    },
    {
        title: "Advanced Surface Preparation",
        description: "From structural crack repairs to abrasive blasting, preparation dictates longevity. We ensure the surface is scientifically ready for the new system.",
        icon: Wrench,
        accentColor: "border-secondary",
    },
    {
        title: "Expert Access Management",
        description: "Utilizing professional scaffolding, boom lifts, and certified rope access to manage costs and ensure safe, compliant high-rise work.",
        icon: Truck,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function PaintingServicesPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: PAINTING FOCUS HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Large-Scale Coating Solutions
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        High-Access Industrial & Commercial Painting.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We are specialized contractors focused exclusively on large-format, high-access projects for **industrial, commercial, and body corporate assets**, ensuring high compliance and zero risk.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Commercial Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: SERVICES BREAKDOWN GRID --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Specialist Coating Applications
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our focus is on durability, corrosion control, and providing a final finish that lasts under intense environmental conditions.
                        </p>
                    </header>

                    {/* Solutions Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {CommercialPaintingServices.map((service, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${service.accentColor}`}>
                                <service.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {service.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {service.description}
                                </p>
                            </div>
                        ))}
                    </div>
                    
                    <div className="mt-12 text-center">
                        <Button asChild
                            variant="link"
                            className="text-tertiary hover:text-white mt-4 pl-0 text-lg font-bold"
                        >
                            <Link href="/painting/body-corporate-painting">
                                See Body Corporate Solutions &rarr;
                            </Link>
                        </Button>
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\privacy\page.tsx--------------------------------------------------------------------------------```// src/app/privacy/page.tsx
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Shield } from 'lucide-react'; // REMOVED: FileText
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Privacy Policy | Data Collection and Use | Maverick Painting Contractors',
    description: 'Review the official Privacy Policy for Maverick Painting, detailing how user data is collected, used, and protected.',
    path: '/privacy',
});

// --- MAIN PAGE COMPONENT ---
export default function PrivacyPage() {
    return (
        <div className="bg-primary pt-32 pb-24 text-white min-h-screen">
            <div className="max-w-4xl mx-auto px-4">
                
                <header className="mb-12 border-b border-gray-700 pb-6">
                    <Shield className="w-10 h-10 text-secondary mb-3" />
                    <h1 className="text-5xl font-extrabold uppercase mb-3">
                        Privacy Policy
                    </h1>
                    <p className="text-lg text-gray-400">
                        Last Updated: November 9, 2025
                    </p>
                </header>

                <div className="space-y-8 text-gray-300 leading-relaxed text-base">
                    
                    {/* SECTION 1: Data Collection */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">1. Information We Collect</h2>
                        <p>
                            We collect personal identification information only when you voluntarily provide it through our contact forms, quote request forms, or direct email correspondence. This typically includes your name, email address, phone number, and details regarding your specific project or property maintenance needs.
                        </p>
                        <p>
                            We also collect non-personal information automatically when you visit our website, such as your IP address, browser type, operating system, and the pages you view. This is used for traffic analysis and site improvement.
                        </p>
                    </section>
                    
                    {/* SECTION 2: Use of Information */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">2. How We Use Your Information</h2>
                        <ul className="list-disc list-inside space-y-2 ml-4">
                            <li>To respond to your inquiries and schedule on-site assessments for quotations.</li>
                            <li>To improve our website functionality and user experience.</li>
                            <li>To comply with legal obligations.</li>
                            <li>We do not sell, rent, or lease our customer lists to third parties.</li>
                        </ul>
                    </section>
                    
                    {/* SECTION 3: Security and Cookies */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">3. Data Security and Cookies</h2>
                        <p>
                            We adopt appropriate data collection, storage, and processing practices and security measures to protect against unauthorized access, alteration, disclosure, or destruction of your personal information.
                        </p>
                        <p>
                            Our website uses cookies to enhance user experience. You may choose to set your web browser to refuse cookies, or to alert you when cookies are being sent. If you do so, note that some parts of the Site may not function properly.
                        </p>
                    </section>
                </div>

            </div>
            {/* The final CTA strip sits below the main content, outside the text container */}
            <div className="mt-20">
                <CtaFinalStrip />
            </div>
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\projects\page.tsx--------------------------------------------------------------------------------```// src/app/projects/page.tsx
// import Link from 'next/link'; // REMOVED: Unused
// import { Button } from '@/components/ui/button'; // REMOVED: Unused
import { ProjectShowcaseModule } from '@/components/project-showcase-module';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Layers, MapPin, CheckSquare } from 'lucide-react';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Gauteng Painting & Structural Repair Project Portfolio | Maverick',
    description: 'View our portfolio of high-value commercial, body corporate, and industrial projects across Gauteng, including Midrand, Pretoria East, and North Riding. Verifiable quality assurance on every job.',
    path: '/projects',
});

// --- CORE FEATURE DATA (Proof Points) ---
const ProofPoints = [
    { text: "Hyper-Local Focus: Midrand, Pretoria, Benoni", icon: MapPin },
    { text: "Structural Complexity Handled", icon: Layers },
    { text: "Independent QA Verified Quality", icon: CheckSquare },
];

// --- MAIN PAGE COMPONENT ---
export default function ProjectsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: PORTFOLIO HERO --- */}
            <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Verifiable Track Record
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-4xl">
                        Proof in Paint. Our Commercial Portfolio.
                    </h1>
                    <div className="flex flex-wrap space-x-6 mt-6">
                        {ProofPoints.map((point, index) => (
                             <div key={index} className="flex items-center space-x-2 text-lg font-medium text-gray-400">
                                 <point.icon className="w-5 h-5 text-secondary" />
                                 <span>{point.text}</span>
                             </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 2: PROJECT SHOWCASE (The Engine) --- */}
            {/* This re-uses the list component from the homepage, but its purpose is 
                now purely to serve local SEO links to dynamic project pages. */}
            <ProjectShowcaseModule />

            {/* --- MODULE 3: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\projects\[slug]\page.tsx--------------------------------------------------------------------------------```// src/app/projects/[slug]/page.tsx
import type { Metadata } from 'next';
import { notFound } from 'next/navigation';
import Link from 'next/link';
import { MapPin, Clock } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { projectCaseStudies } from '@/data/projects';
import { siteConfig } from '@/lib/seo';

// --- DYNAMIC METADATA GENERATION (Next.js 16: async params) ---
interface ProjectPageProps {
    params: Promise<{
        slug: string;
    }>;
}

export async function generateMetadata({ params }: ProjectPageProps): Promise<Metadata> {
    const { slug } = await params;
    const project = projectCaseStudies.find(p => p.slug === slug);

    if (!project) {
        // If project isn't found, Next.js will handle the 404 via the notFound() call in the component
        return {
            title: 'Project Not Found | Maverick',
            description: 'The requested project could not be found.',
        };
    }

    const title = `${project.name} | Structural Repair & Painting Case Study | Maverick`;
    const description = `Case study for ${project.name} in ${project.location}. Scope: ${project.scope}. Project completed ${project.date}.`;

    return {
        title: `${project.name} | Structural Repair & Painting Case Study | Maverick`,
        description,
        alternates: {
            canonical: `${siteConfig.url}/projects/${project.slug}`,
        },
        openGraph: {
            title,
            description,
            type: 'article',
            url: `${siteConfig.url}/projects/${project.slug}`,
        },
    };
}

export function generateStaticParams() {
    return projectCaseStudies.map((project) => ({ slug: project.slug }));
}

// --- MAIN PAGE COMPONENT (Next.js 16: async params) ---
export default async function ProjectDetailPage({ params }: ProjectPageProps) {
    const { slug } = await params;
    const project = projectCaseStudies.find(p => p.slug === slug);

    if (!project) {
        // Use Next.js's built-in notFound() function to render the 404 page
        notFound();
    }

    return (
        <div className="bg-primary pt-24 text-white min-h-screen">

            {/* --- MODULE 1: PROJECT HERO (Dynamic Content) --- */}
            <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Project Case Study
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        {project.name}
                    </h1>
                    <div className="flex flex-wrap space-x-6 mt-6">
                        <p className="flex items-center space-x-2 text-lg font-medium text-gray-400">
                            <MapPin className="w-5 h-5 text-secondary" />
                            <span>{project.location}</span>
                        </p>
                        <p className="flex items-center space-x-2 text-lg font-medium text-gray-400">
                            <Clock className="w-5 h-5 text-secondary" />
                            <span>Completed: {project.date}</span>
                        </p>
                    </div>
                    <p className="text-2xl font-light mt-6 max-w-4xl text-gray-300">
                        {project.scope}
                    </p>
                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Assessment for a Similar Project &rarr;
                        </Link>
                    </Button>
                </div>
            </section>
            
            {/* --- MODULE 2: PROJECT DETAIL POINTS --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <h2 className="text-4xl font-extrabold uppercase mb-12">
                        Key Project Highlights
                    </h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {project.details.map((detail, index) => {
                             // Corrected: Use the actual icon reference from the data structure
                             const IconComponent = detail.icon;

                            return (
                                <div key={index} className="p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 border-tertiary">
                                    <IconComponent className="w-8 h-8 text-secondary mb-4" />
                                    <p className="text-gray-400 text-base">
                                        {detail.text}
                                    </p>
                                </div>
                            );
                        })}
                    </div>
                </div>
            </section>


            {/* --- MODULE 3: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\services\page.tsx--------------------------------------------------------------------------------```// src/app/services/page.tsx
import Link from 'next/link';
import Script from 'next/script';
import { Button } from '@/components/ui/button';
import { buildPageMetadata } from '@/lib/metadata';
// FIX: Re-added Home and Phone to resolve the "Cannot find name" compilation errors (Lines 180 and 303 in the error report).
import { ClipboardCheck, Shield, Wrench, FlaskConical, Building, Layers, Factory, Home, Phone } from 'lucide-react';
import { QaProcessModule } from '@/components/qa-process-module'; // Reusing existing module
import { AccreditationsStrip } from '@/components/accreditations-strip';
// Reusing existing module

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Specialized Painting, Waterproofing & Structural Repair Services | Gauteng Contractor',
    description: 'A structural asset maintenance partner offering guaranteed, turn-key solutions for commercial, industrial, and body corporate properties, including structural repairs, specialized coatings, and Independent QA. Johannesburg & Pretoria.',
    path: '/services',
});
// --- CORE SERVICE PILLAR DATA (Central to SEO Silo) ---
const servicePillars = [
    {
        title: "Structural & Remedial Repairs",
        href: "/structural-repairs",
        icon: Wrench,
        description: "The foundation of asset maintenance. We fix concrete cancer, spalling, structural cracks, and joint defects before any coating is applied.",
        subServices: [
            "Concrete Spalling Repair",

            "Structural Crack Injection",
            "Expansion Joint Sealing",
            "Rising Damp Treatment",
        ],
        accentColor: "border-tertiary",
        isFeatured: true, // Used for visual prominence
    },
    {
        title: "Specialized Coating Systems",
       
 href: "/specialized-coatings",

        icon: FlaskConical,
        description: "Beyond standard paint. We are approved applicators for high-performance, durable floor, wall, and industrial coating systems.",
        subServices: [
            "Epoxy & Polyurethane Flooring",
            "Hygienic Food-Grade Floors",
            "Marmoran Master Applicator",
            "Industrial Corrosion Control",

        ],
        accentColor: "border-secondary",
        isFeatured: false,
    },
    {
        title: "Advanced Waterproofing",
        href: "/waterproofing-services",
        icon: Shield,
        description: "Guaranteed systems for high-stakes water ingress problems in flat roofs, slabs, and balconies, using both Torch-On and Liquid Applied Membranes.",
        subServices: [

            "Flat Concrete Roof Systems",
            "Leaking Balcony Repair (Under-Tile)",
            "Torch-On & Liquid Membranes",
            "Basement Waterproofing",
        ],
        accentColor: "border-tertiary",
        isFeatured: false,
    },
    {
        
 title: "Commercial & High-Access Painting",
        href: "/painting-services",
        icon: Building,
        description: "High-volume painting solutions for Body Corporates, industrial sites, and commercial spaces, including complex access and full project management.",
        subServices: [
            "Body Corporate Painting",
            "Industrial & Factory Painting",
            "Rope Access Painting",

            "Roof Painting & Restoration",
        ],
        accentColor: "border-secondary",
        isFeatured: false,
    },
];

const servicesFaq = [
    {
        question: "What makes Maverick's structural repairs different from standard painters?",
        answer: "Every remedial scope starts with substrate diagnostics, engineer-approved specifications and independent QA sign-off, so defects are fixed at the structural level before we apply coatings.",
    },
    {
        question: 'Do you handle waterproofing, painting and access in a single contract?',
        answer: 'Yes. Our turnkey teams manage advanced access (rope, scaffold, boom lifts), waterproofing membranes and final coating systems, giving body corporates and developers one accountable partner.',
    },
    {
        question: 'How do you guarantee compliance and warranties?',
        answer: 'We partner with leading manufacturers, document film thickness with third-party inspectors and co-sign workmanship + product guarantees ranging from 5 to 15 years.',
    },
];
// --- MAIN PAGE COMPONENT ---
export default function ServicesPage() {
    return (
        <div className="bg-primary pt-24">
            <Script id="services-faq-schema" type="application/ld+json" strategy="afterInteractive">
                {JSON.stringify({
                    '@context': 'https://schema.org',
                    '@type': 'FAQPage',
                    mainEntity: servicesFaq.map((item) => ({
                        '@type': 'Question',
                        name: item.question,
                        acceptedAnswer: {
                            '@type': 'Answer',
                            text: item.answer,
                        },
                    })),
                })}
            </Script>

            {/* --- MODULE 1: SEO HERO (Structural Thesis) --- */}
            <section className="relative py-20 md:py-32 px-4 text-white bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12 
items-center">

            
            {/* LEFT: Headline */}
                    <div className="lg:col-span-6">
                        <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-2">
                            The Turn-Key Asset Solution
       
                  </p>
                        <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase text-white">
                            Beyond Paint. Specialized Contractor Services.
                     
                   </h1>
                    </div>

                    {/* RIGHT: Core Thesis/CTA */}
                    <div 
className="lg:col-span-6 lg:pl-12">
                        <p className="text-xl font-light text-gray-400 mb-6">
   
                          We are not general painters.
 We are structural remediation specialists, approved applicators, and advanced coating experts.
 We provide guaranteed, turn-key solutions from defect identification to the final protective layer.
 </p>

                        {/* Direct link to QA Process */}
                        <Button asChild 

                            className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12 shadow-xl"
               >
                            <Link href="/our-process-independent-qa" className="flex items-center space-x-2">
                                <ClipboardCheck className="w-5 h-5" />
                   
              <span>Our Independent QA Guarantee</span>
                            </Link>
                        </Button>
                    </div>
            
     </div>
            </section>

            {/* --- MODULE 2: AUDIENCE FUNNEL (Segmented UX) --- */}
            <section className="py-20 px-4 bg-primary text-white">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
     
                    <h2 className="text-4xl font-extrabold uppercase text-white mb-3">
                            Who We Serve
                        </h2>
                      
                  <p className="text-xl text-gray-400 font-light">
                            Select your role below to view the solutions, guarantees, and compliance you require.
 </p>
                    </header>

                    {/* 3-Column Audience Grid - High Contrast Links */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">

                        {/* Audience 1: Developers / Engineers */}
                        <Link href="/solutions/for-developers" className="group p-8 bg-gray-900 rounded-xl shadow-2xl border-b-4 border-secondary transform hover:scale-[1.03] transition-all duration-500">
                            <Factory className="w-10 h-10 text-secondary mb-3" />
                            <h3 className="text-2xl font-extrabold uppercase text-white mb-2">Developers & Engineers</h3>
                            <p className="text-gray-400 text-base mb-4">
                                Verifiable specifications, on-time delivery, and full compliance 
                        
                 to eliminate delays and hand-over issues.
 </p>
                            <span className="text-tertiary font-bold group-hover:text-white transition-colors">
                                View Technical Solutions &rarr;
 </span>
                        </Link>

                        {/* Audience 2: Body Corporates / HOAs */}
                        <Link href="/solutions/for-body-corporates" className="group p-8 bg-gray-900 rounded-xl shadow-2xl border-b-4 border-tertiary transform hover:scale-[1.03] transition-all duration-500">
         
                    <Layers className="w-10 h-10 text-tertiary mb-3" />
                            <h3 className="text-2xl font-extrabold uppercase text-white mb-2">Body Corporates & Trustees</h3>
                            <p className="text-gray-400 text-base mb-4">
         
                        Independent QA, co-signed guarantees, and minimal disturbance for long-term asset security and peace of mind.
 </p>
                            <span className="text-tertiary font-bold group-hover:text-white transition-colors">
                                View Maintenance Solutions &rarr;
 </span>
                        </Link>

                        {/* Audience 3: Homeowners / Industrial */}
                        <Link href="/solutions/for-homeowners" className="group p-8 bg-gray-900 rounded-xl shadow-2xl border-b-4 border-secondary transform hover:scale-[1.03] transition-all duration-500">
          
                   <Home className="w-10 h-10 text-secondary mb-3" />
                            <h3 className="text-2xl font-extrabold uppercase text-white mb-2">Homeowners & Facilities</h3>
                            <p className="text-gray-400 text-base mb-4">
           
                      Owner supervised excellence, guaranteed workmanship, and the highest standards of cleanliness and efficiency for your property.
 </p>
                            <span className="text-tertiary font-bold group-hover:text-white transition-colors">
                                View Project Solutions &rarr;
 </span>
                        </Link>
                    </div>
                </div>
            </section>


            {/* --- MODULE 3: THE SERVICE SILOS (Pillars Grid) --- */}

      
           <section className="py-24 md:py-32 px-4 bg-gray-900 text-white">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-5xl font-extrabold uppercase text-white mb-3">
                  
                     The Four Pillars of Asset Protection
                        </h2>
                        <p className="text-xl text-gray-400 font-light">
                            Select an expertise area below 
 
                            to see how we apply advanced methods and verifiable quality to your specific maintenance challenge.
 </p>
                    </header>

                    {/* 2x2 Layout with a Featured Item for a non-template look */}
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">

                        {servicePillars.map((pillar, 
 index) => {
                            const IconComponent = pillar.icon;

                            // Visual emphasis for the most complex service (Structural)
                            const isFeatured = 
 pillar.isFeatured;
                            const cardClass = isFeatured ? "lg:col-span-2 p-10 transform hover:scale-[1.01] transition-all duration-500" : 
                                                    "p-8 transform hover:scale-[1.03] transition-all duration-500";
    
                          const titleClass = isFeatured ? "text-3xl md:text-4xl" : "text-2xl";
                            const descriptionClass = isFeatured ? "text-lg text-secondary/80 mt-4" : "text-base text-gray-400 mt-2";
                            return (
                                <Link 
                                    key={index} 
                              
                   href={pillar.href}
                                    className={`group bg-primary rounded-xl shadow-2xl flex flex-col justify-between 
                                                ${cardClass} ${pillar.accentColor}`}
  
                                   style={{ borderTopWidth: isFeatured ?
 '8px' : '4px' }}
                                >
                                    <div>
                             
                          <IconComponent className="w-10 h-10 text-secondary mb-4 group-hover:text-tertiary transition-colors" />
                                        <h3 className={titleClass + 
                                       
                      " font-extrabold uppercase text-white mb-2 leading-snug"}>
                                            {pillar.title}
                                        </h3>
      
                                       <p className={descriptionClass}>
                                            {pillar.description}
                     
                    </p>
                                    </div>

                                    <div className="mt-8">
        
                                        <ul className="space-y-2 text-sm text-gray-400 list-inside border-t border-gray-700 pt-4 mb-4">
                                            {pillar.subServices.map((sub, i) => (
             
                                         <li key={i} className="flex items-start">
                                                    <span className="text-tertiary mr-2">‚Ä¢</span>
        
                                              <span className="flex-1 text-base font-medium">{sub}</span>
                                                </li>
     
                                         ))}
                                        </ul>
                     
                   <span className="text-lg font-bold text-secondary flex items-center group-hover:text-tertiary transition-colors">
                                            Explore Full Expertise &rarr;
 </span>
                                    </div>
                                </Link>
                            );
 })}
                    </div>
                </div>
            </section>

            {/* --- MODULE 4: THE PROCESS IN DEPTH (Trust Module) --- */}
            <QaProcessModule />


            {/* --- MODULE 5: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 6: FINAL CTA STRIP (Conversion Funnel) --- */}
            <section className="bg-header-dark py-12 px-4">
                <div className="max-w-7xl mx-auto text-center">

                    <h2 className="text-3xl font-extrabold text-white mb-4">
   
                      Don&apos;t Risk Your Asset.
 Talk to a Specialist.
                    </h2>
                    <p className="text-gray-400 text-lg mb-6">
                        Contact us today to schedule an on-site assessment and receive your substrate-specific specification.
 </p>
                    <Button asChild 
                        className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-xl h-14 shadow-2xl transform hover:scale-105"
                    >
                        <a 
 
                            href="tel:0826277082" className="flex items-center space-x-2">
                            <Phone className="w-6 h-6" />
                            <span>Call Lawrence Brooks: 082 627 7082</span>
      
                   </a>
                    </Button>
                </div>
            </section>

        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\solutions\for-body-corporates\page.tsx--------------------------------------------------------------------------------```// src/app/solutions/for-body-corporates/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { ClipboardCheck, MessageCircle, Scroll, Shield } from 'lucide-react'; // REMOVED: Users
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Painting & Waterproofing Solutions for Body Corporates & HOAs | Maverick',
    description: 'Specialized asset maintenance for Body Corporates and Homeowners\' Associations. We offer guaranteed compliance, minimal disturbance, and Independent QA for long-term asset security.',
    path: '/solutions/for-body-corporates',
});

// --- CORE PAIN POINTS DATA ---
const PainPoints = [
    {
        title: "Risk-Free Compliance",
        description: "Independent QA verifies film thickness and application quality, providing trustees with auditable proof of work for AGMs.",
        icon: ClipboardCheck,
        accentColor: "border-secondary",
    },
    {
        title: "Long-Term Security",
        description: "Our structural repairs and guaranteed waterproofing systems eliminate recurring defects, securing the long-term value of the entire block.",
        icon: Shield,
        accentColor: "border-tertiary",
    },
    {
        title: "Minimal Disturbance",
        description: "We use advanced high-access methods and strict project management protocols to ensure minimal disturbance and inconvenience to residents.",
        icon: MessageCircle,
        accentColor: "border-secondary",
    },
    {
        title: "Transparent Guarantees",
        description: "All guarantees are co-signed by the manufacturer, the contractor, and the independent inspector, providing unparalleled warranty transparency.",
        icon: Scroll,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function BodyCorporateSolutionsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: AUDIENCE HERO (BODY CORPORATE) --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        For Trustees & Facility Managers
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Guaranteed Asset Security for Body Corporates.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We specialize in large-scale residential asset maintenance, delivering **risk-free projects** with verifiable compliance and long-term structural security for every unit owner.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Compliance Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: PAIN POINTS GRID (Solution Focus) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Eliminating Trustee Risk
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our unique process addresses the key vulnerabilities faced by trustees and building managers.
                        </p>
                    </header>

                    {/* Solutions Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {PainPoints.map((point, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${point.accentColor}`}>
                                <point.icon className="w-8 h-8 text-tertiary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {point.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {point.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\solutions\for-developers\page.tsx--------------------------------------------------------------------------------```// src/app/solutions/for-developers/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Building, ClipboardCheck, Scroll, Wrench } from 'lucide-react'; // REMOVED: Hammer, Layers
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'New Build & Developer Painting Solutions | Technical Compliance & Auditable QA',
    description: 'Verifiable painting and coating specifications for developers, engineers, and quantity surveyors. We guarantee compliance with SANS standards and ensure zero hand-over risk through Independent 3rd Party QA.',
    path: '/solutions/for-developers',
});

// --- CORE PAIN POINTS DATA ---
const DeveloperValueProps = [
    {
        title: "Technical Compliance",
        description: "Application strictly adheres to manufacturer specifications and SANS 10047/10051 for verifiable film thickness and quality.",
        icon: Scroll,
        accentColor: "border-secondary",
    },
    {
        title: "Auditable Quality",
        description: "Independent QA provides fortnightly reports, eliminating contractor bias and giving the QS or engineer verifiable quality assurance documentation.",
        icon: ClipboardCheck,
        accentColor: "border-tertiary",
    },
    {
        title: "Structural Hand-over",
        description: "Our capability includes fixing spalling, crack injection, and waterproofing, ensuring the structure is sound before final coatings.",
        icon: Wrench,
        accentColor: "border-secondary",
    },
    {
        title: "High-Volume Efficiency",
        description: "Experienced in large-scale residential and commercial complex painting, ensuring on-time delivery without compromising on final quality.",
        icon: Building,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function DeveloperSolutionsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: AUDIENCE HERO (DEVELOPER FOCUS) --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        For Engineers & Quantity Surveyors
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Verifiable Quality. Zero Hand-over Risk.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We deliver **contractual compliance** and **auditable proof** of application quality, ensuring your project passes final inspection and eliminates costly delays and future warranty claims.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Technical Specification &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: VALUE PROPS GRID (Solution Focus) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            The Value We Bring to Your Site
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our process is engineered to integrate seamlessly into your project timeline and quality control systems.
                        </p>
                    </header>

                    {/* Solutions Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {DeveloperValueProps.map((point, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${point.accentColor}`}>
                                <point.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {point.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {point.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\solutions\for-homeowners\page.tsx--------------------------------------------------------------------------------```// src/app/solutions/for-homeowners/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
// import { QaProcessModule } from '@/components/qa-process-module'; // REMOVED: Unused - replaced by modular section below
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Users, CheckSquare, Shield, Clock } from 'lucide-react'; // REMOVED: Home, Paintbrush
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Owner Supervised Painting for High-End Homeowners | Guaranteed Quality',
    description: 'Premium exterior and interior painting services for homeowners. Benefit from daily owner supervision, guaranteed workmanship, and meticulous site cleanliness. Gauteng\'s trusted residential contractor.',
    path: '/solutions/for-homeowners',
});

// --- CORE PAIN POINTS DATA ---
const HomeownerAssurances = [
    {
        title: "Daily Owner Supervision",
        description: "The quality of your home is too important to leave to chance. A director is on-site daily to manage the project and quality control.",
        icon: Users,
        accentColor: "border-tertiary",
    },
    {
        title: "Meticulous Cleanliness",
        description: "We treat your home with the utmost respect. Dust control, masking, and daily site cleanup are non-negotiable parts of our service.",
        icon: Clock,
        accentColor: "border-secondary",
    },
    {
        title: "Guaranteed Workmanship",
        description: "We stand by our work. All projects come with a guaranteed warranty, backed by manufacturer-approved application methods.",
        icon: CheckSquare,
        accentColor: "border-tertiary",
    },
    {
        title: "Complete Property Protection",
        description: "Before painting, we fix leaks, cracks, and damp, providing a full structural envelope that protects your investment long-term.",
        icon: Shield,
        accentColor: "border-secondary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function HomeownerSolutionsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: AUDIENCE HERO (HOMEOWNER FOCUS) --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        For High-End Residential Properties
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Owner Supervised Painting. Trusted. Meticulous. Guaranteed.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We deliver a **premium service** focused on quality, detail, and protecting the integrity of your home&apos;s investment, from initial prep to the final coat.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Schedule Home Assessment &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: ASSURANCES GRID (Trust Focus) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            The Assurances You Deserve
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our process is built on integrity and a relentless pursuit of the perfect finish.
                        </p>
                    </header>

                    {/* Assurances Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {HomeownerAssurances.map((assurance, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${assurance.accentColor}`}>
                                <assurance.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {assurance.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {assurance.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module - Simplified) --- */}
            {/* The full QA module might be overkill for a homeowner, so we link to it. */}
             <section className="py-16 px-4 bg-gray-900">
                 <div className="max-w-7xl mx-auto text-center">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Our Commitment to Trust
                    </p>
                    <h2 className="text-4xl font-extrabold uppercase mb-3">
                        Quality Backed by Professional Audits
                    </h2>
                    <p className="text-lg text-gray-400 font-light max-w-3xl mx-auto">
                        Although typically reserved for our largest commercial projects, the same strict **Independent 3rd Party QA** principles are applied to your home. Quality is non-negotiable.
                    </p>
                    <Button asChild
                        className="mt-8 bg-tertiary hover:bg-[#9ED529] text-primary font-bold text-lg h-12 shadow-xl"
                    >
                         <Link href="/our-process-independent-qa">
                            See Our Full Auditing Process &rarr;
                        </Link>
                    </Button>
                 </div>
            </section>


            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\specialized-coatings\page.tsx--------------------------------------------------------------------------------```// src/app/specialized-coatings/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { FlaskConical, Layers, Shield, Building } from 'lucide-react'; // REMOVED: Rss, Phone
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Epoxy & Polyurethane Floor Coatings | Certified Specialized Applicators',
    description: 'Approved applicators for high-performance, industrial-grade floor and wall coatings. We provide guaranteed, chemical-resistant systems for food production, manufacturing, and commercial spaces.',
    path: '/specialized-coatings',
});

// --- TECHNICAL DATA FOR CONTENT MODULES ---
const CoatingSystems = [
    {
        title: "Epoxy & Polyurethane Floors",
        description: "Seamless, chemical-resistant systems for high-traffic industrial, commercial, and retail environments that require exceptional durability.",
        icon: FlaskConical,
        accentColor: "border-secondary",
    },
    {
        title: "Hygienic/Food-Grade Walls",
        description: "Application of specialized, smooth, and easily cleanable coatings required for food and beverage facilities to comply with health and safety regulations.",
        icon: Shield,
        accentColor: "border-tertiary",
    },
    {
        title: "Marmoran Decorative Finishes",
        description: "Certified application of Marmoran&apos;s architectural coatings, providing durable, specialized, and aesthetic wall finishes for high-end residential and commercial facades.",
        icon: Layers,
        accentColor: "border-secondary",
    },
    {
        title: "Industrial Corrosion Control",
        description: "Protective coating systems for steel structures, piping, and plant assets, designed to prevent rust and corrosion in harsh industrial and coastal environments.",
        icon: Building,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function SpecializedCoatingsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: INDUSTRIAL HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Technical Coatings Expertise
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        High-Performance Floor & Specialized Coating Systems.
                    </h1>
                    <p className="text-2xl font-light mt-6 max-w-4xl text-gray-400">
                        We are **certified applicators** for industrial-grade systems, providing a guaranteed protective shield against chemical wear, heavy traffic, and structural deterioration.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Coating Specification &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: SYSTEM BREAKDOWN (Technical Grid) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Certified Systems We Apply
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our team is factory-trained and approved for these specialized, industrial and architectural coating solutions.
                        </p>
                    </header>

                    {/* Coating Systems Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {CoatingSystems.map((system, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${system.accentColor}`}>
                                <system.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {system.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {system.description}
                                </p>
                            </div>
                        ))}
                    </div>
                    
                    <div className="mt-12 text-center">
                         <Button asChild
                            variant="link"
                            className="text-tertiary hover:text-white mt-4 pl-0 text-lg font-bold"
                        >
                            <Link href="/accreditations">
                                View All Approved Manufacturer Accreditations &rarr;
                            </Link>
                        </Button>
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\structural-repairs\page.tsx--------------------------------------------------------------------------------```// src/app/structural-repairs/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { Wrench, Shield, Layers, Users } from 'lucide-react';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Concrete Spalling, Structural Crack & Remedial Repair Specialists | Maverick',
    description: 'Expert structural repair contractors in Gauteng. We permanently fix concrete spalling, rising damp, and structural cracks before applying specialized protective coatings. Guaranteed quality assurance.',
    path: '/structural-repairs',
});

// --- TECHNICAL DATA FOR CONTENT MODULES ---
const RepairProcessSteps = [
    {
        title: "Defect Diagnosis & Technical Specification",
        description: "Our assessment team uses moisture meters and hammer tests to diagnose the root cause (e.g., carbonation, chloride ingress) and prepares a substrate-specific, engineer-approved specification.",
        icon: Wrench,
    },
    {
        title: "Spalling & Concrete Cancer Remediation",
        description: "Removal of delaminated concrete, passivation of rebar to stop rust, and repair using polymer-modified structural mortar. This is the permanent fix, not a cosmetic patch.",
        icon: Shield,
    },
    {
        title: "Structural Crack Injection & Sealing",
        description: "Low-viscosity epoxy resin injection into dormant structural cracks to restore integrity. This stops water ingress and prevents crack propagation.",
        icon: Layers,
    },
    {
        title: "Protealing Application",
        description: "Application of specialized, manufacturer-approved breathable membranes and elastomeric coatings that resist UV, prevent water ingress, and accommodate movement.",
        icon: Users,
    },
];

// --- MAIN PAGE COMPONENT ---
export default function StructuralRepairsPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: TECHNICAL HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Structural Integrity First
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-4xl">
                        Permanent Concrete Spalling & Structural Repair.
                    </h1>
                    <p className="text-2xl font-light mt-6 max-w-3xl text-gray-400">
                        We pivot from cosmetic paint to **Guaranteed Remedial Solutions**. Our process is designed by engineers to permanently de-risk your multi-million rand asset from structural failure.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Schedule Technical Assessment &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: THE PROCESS (Technical Grid) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-3xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Our Four-Phase Remedial Approach
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            We follow a strict manufacturer and engineer-approved protocol to ensure the repair is structural, not cosmetic.
                        </p>
                    </header>

                    {/* Technical Steps Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {RepairProcessSteps.map((step, index) => (
                            <div key={index} className="p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 border-tertiary">
                                <step.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {step.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {step.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\terms\page.tsx--------------------------------------------------------------------------------```// src/app/terms/page.tsx
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { FileText } from 'lucide-react';
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Terms of Service | Maverick Painting Contractors',
    description: 'Review the official Terms of Service for all contracting work and use of the Maverick Painting website.',
    path: '/terms',
});

// --- MAIN PAGE COMPONENT ---
export default function TermsPage() {
    return (
        <div className="bg-primary pt-32 pb-24 text-white min-h-screen">
            <div className="max-w-4xl mx-auto px-4">
                
                <header className="mb-12 border-b border-gray-700 pb-6">
                    <FileText className="w-10 h-10 text-secondary mb-3" />
                    <h1 className="text-5xl font-extrabold uppercase mb-3">
                        Terms of Service
                    </h1>
                    <p className="text-lg text-gray-400">
                        Last Updated: November 9, 2025
                    </p>
                </header>

                <div className="space-y-8 text-gray-300 leading-relaxed text-base">
                    
                    {/* SECTION 1: Introduction */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">1. Acceptance of Terms</h2>
                        <p>
                            By engaging Maverick Painting for services, or by using this website, you agree to be bound by these Terms and Conditions (&quot;Terms&quot;). These Terms govern your access to and use of our services and our website. If you disagree with any part of the terms then you may not access the Service.
                        </p>
                    </section>
                    
                    {/* SECTION 2: Service Provision */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">2. Service Provision and Scope of Work</h2>
                        <ul className="list-disc list-inside space-y-2 ml-4">
                            <li>All project work, including structural repairs, painting, and waterproofing, will be executed strictly in accordance with the signed quotation and technical specification provided to the client.</li>
                            <li>The scope of work is defined exclusively by the written agreement and does not include any verbal modifications unless formalized in writing.</li>
                            <li>Payment terms and conditions, including deposit schedules and final settlement, are outlined in the official quotation document.</li>
                        </ul>
                    </section>
                    
                    {/* SECTION 3: Quality Assurance and Guarantees */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">3. Quality Assurance and Guarantees</h2>
                        <p>
                            We warrant that the work will be performed in a professional and workmanlike manner. Product guarantees are issued by the respective material manufacturer (e.g., Plascon, Dulux, Sika) and are subject to their terms and conditions. Our **Independent 3rd Party QA** process is designed to mitigate risk but does not replace manufacturer guarantees.
                        </p>
                    </section>

                    {/* SECTION 4: Liability */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">4. Limitation of Liability</h2>
                        <p>
                            Maverick Painting&apos;s liability is limited to the total value of the contract price for the services rendered. We are not liable for consequential damages or latent defects in the original structure that were not identifiable during the initial inspection.
                        </p>
                    </section>

                    {/* SECTION 5: Governing Law */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">5. Governing Law</h2>
                        <p>
                            These Terms shall be governed and construed in accordance with the laws of South Africa, without regard to its conflict of law provisions.
                        </p>
                    </section>

                </div>

            </div>
            {/* The final CTA strip sits below the main content, outside the text container */}
            <div className="mt-20">
                <CtaFinalStrip />
            </div>
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\app\waterproofing-services\page.tsx--------------------------------------------------------------------------------```// src/app/waterproofing-services/page.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { QaProcessModule } from '@/components/qa-process-module';
import { AccreditationsStrip } from '@/components/accreditations-strip';
import { CtaFinalStrip } from '@/components/cta-final-strip';
import { Shield, Droplet, Layers, FileText } from 'lucide-react'; // REMOVED: Phone
import { buildPageMetadata } from '@/lib/metadata';

// --- METADATA (SEO) ---
export const metadata = buildPageMetadata({
    title: 'Flat Roof & Balcony Waterproofing Services | Guaranteed Membrane Systems',
    description: 'Specialist waterproofing contractors in Gauteng. We use guaranteed liquid-applied and torch-on membrane systems to permanently solve flat roof, balcony, and basement water ingress. Independent QA verified.',
    path: '/waterproofing-services',
});

// --- TECHNICAL DATA FOR CONTENT MODULES ---
const WaterproofingSolutions = [
    {
        title: "Torch-On Membrane Systems",
        description: "High-performance bituminous felt membranes, torch-applied by certified staff for flat concrete roofs and exposed areas requiring exceptional durability.",
        icon: FileText,
        accentColor: "border-secondary",
    },
    {
        title: "Liquid Applied Membranes (LAM)",
        description: "Seamless, cold-applied polyurethane and acrylic systems, ideal for complex areas like parapet walls, flashings, and under-tile balcony applications.",
        icon: Droplet,
        accentColor: "border-tertiary",
    },
    {
        title: "Basement & Below-Ground Waterproofing",
        description: "Specialized slurry and crystalline systems applied to negative-side structures to stop rising damp and water ingress in basements and lift pits.",
        icon: Layers,
        accentColor: "border-secondary",
    },
    {
        title: "Under-Tile Balcony Remediation",
        description: "Fixing leaking balconies without destructive tile removal, using targeted injection and re-grouting systems, providing a less disruptive and cost-effective fix.",
        icon: Shield,
        accentColor: "border-tertiary",
    },
];

// --- MAIN PAGE COMPONENT ---
export default function WaterproofingPage() {
    return (
        <div className="bg-primary pt-24 text-white">

            {/* --- MODULE 1: WATERPROOFING HERO --- */}
            <section className="relative py-24 md:py-40 px-4 bg-gray-900 border-b-4 border-secondary">
                <div className="max-w-7xl mx-auto">
                    <p className="text-xl font-medium uppercase tracking-widest text-tertiary mb-3">
                        Water Ingress Solutions
                    </p>
                    <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
                        Guaranteed Waterproofing. Eliminate Water Ingress Risk.
                    </h1>
                    <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
                        We provide **co-signed guarantees** on both our workmanship and the manufacturer&apos;s product, ensuring your high-value asset is protected from the single greatest cause of structural damage: water.
                    </p>

                    <Button asChild
                        className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
                    >
                        <Link href="/contact">
                            Request Guaranteed Quote &rarr;
                        </Link>
                    </Button>
                </div>
            </section>

            {/* --- MODULE 2: SYSTEM BREAKDOWN (Technical Grid) --- */}
            <section className="py-24 px-4 bg-primary">
                <div className="max-w-7xl mx-auto">
                    <header className="text-center max-w-4xl mx-auto mb-16">
                        <h2 className="text-4xl font-extrabold uppercase mb-3">
                            Certified Waterproofing Systems
                        </h2>
                        <p className="text-lg text-gray-400 font-light">
                            Our team is manufacturer-approved to apply both specialized liquid membranes and traditional torch-on systems.
                        </p>
                    </header>

                    {/* Solutions Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        {WaterproofingSolutions.map((system, index) => (
                            <div key={index} className={`p-6 bg-gray-900 rounded-xl shadow-xl border-t-4 ${system.accentColor}`}>
                                <system.icon className="w-8 h-8 text-secondary mb-4" />
                                <h3 className="text-xl font-bold uppercase mb-2 text-white">
                                    {system.title}
                                </h3>
                                <p className="text-gray-400 text-sm">
                                    {system.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* --- MODULE 3: THE QA PROCESS (Reusing Trust Module) --- */}
            <QaProcessModule />

            {/* --- MODULE 4: ACCREDITATIONS (Visual Trust) --- */}
            <AccreditationsStrip />

            {/* --- MODULE 5: FINAL CTA STRIP (Conversion Funnel) --- */}
            <CtaFinalStrip />
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\accreditations-strip.tsx--------------------------------------------------------------------------------```// src/components/accreditations-strip.tsx
import React from 'react';
import { Shield, Users } from 'lucide-react'; // 'Truck' removed

// Define the two most powerful proof points
const proofPoints = [
    { text: "MBA & NAMA Registered", icon: Users },
    { text: "Fully OHS Compliant", icon: Shield },
];

// This is a Server Component.
export function AccreditationsStrip() {
    // ... (rest of the component logic remains the same)
    const accreditationLogos = [
        { name: "Sika Approved Contractor", key: "sika" },
        { name: "Plascon Preferred Applicator", key: "plascon" },
        { name: "Dulux Accredited Painter", key: "dulux" },
        { name: "a.b.e. Approved Contractor", key: "abe" },
        { name: "Marmoran Master Applicator", key: "marmoran" },
    ];
    
    return (
        <section className="bg-primary text-primary-foreground py-10 px-4">
            <div className="container mx-auto">
                <div className="text-center mb-8">
                    <h3 className="text-sm font-semibold tracking-widest uppercase text-tertiary">
                        Verifiable Proof of Quality
                    </h3>
                    <p className="text-3xl font-light mt-1">
                        Certified Applicators & Industry Compliant
                    </p>
                </div>

                {/* --- 1. Main Logo Grid --- */}
                <div className="flex flex-wrap justify-center items-center gap-x-8 gap-y-4 max-w-5xl mx-auto">
                    {accreditationLogos.map((logo) => (
                        <div key={logo.key} className="h-10 w-32 relative flex items-center justify-center grayscale opacity-80 hover:opacity-100 transition-opacity duration-300">
                            {/* Placeholder for Manufacturer Logo */}
                            <span className="text-xs font-semibold uppercase text-primary-foreground/70">
                                {logo.name.split(' ')[0]} Logo
                            </span>
                        </div>
                    ))}
                </div>

                {/* --- 2. Secondary Trust Bar --- */}
                <div className="mt-10 pt-6 border-t border-secondary/50 flex justify-center space-x-12">
                    {proofPoints.map((point, index) => (
                        <div key={index} className="flex items-center space-x-3">
                            <point.icon className="h-5 w-5 text-secondary flex-shrink-0" />
                            <span className="text-base font-semibold">{point.text}</span>
                        </div>
                    ))}
                </div>

            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\client-logo-strip.tsx--------------------------------------------------------------------------------```// src/components/client-logo-strip.tsx
import React from 'react';
import { cn } from '@/lib/utils';
// The layout is a Server Component for performance.

// --- Data: Dealership Clients (Authority Signals) ---
const clientLogos = [
    { name: "Volkswagen" }, 
    { name: "Audi" },
    { name: "BMW" },
    { name: "Renault" },
    { name: "Hyundai" },
    // Removed specific brand colors for unified, monochromatic look
];

export function ClientLogoStrip() {
    // We duplicate the list to ensure a seamless, infinite scroll loop
    const doubledLogos = [...clientLogos, ...clientLogos];

    return (
        // Changed bg-primary to bg-gray-900 for subtle shade difference and added strong borders
        <section className="bg-gray-900 py-12 px-4 border-t-8 border-secondary border-b-2 border-primary/50"> 
            <div className="max-w-7xl mx-auto overflow-hidden">
                
                {/* Authority Headline (Wording Corrected) */}
                <header className="text-center mb-10">
                    <p className="text-lg font-bold tracking-wider uppercase text-tertiary">
                        Verifiable Project Experience
                    </p>
                    {/* FIXED WORDING: Emphasize 'Work Completed For' instead of 'Official Contractors' */}
                    <h3 className="text-3xl font-extrabold mt-1 text-white">
                        Work Completed For Leading Dealerships
                    </h3>
                </header>

                {/* Infinite Scrolling Container (Perspective Marquee) */}
                <div 
                    // cn utility applies the custom animation defined in tailwind.config.ts
                    className={cn(
                        "flex w-[250%] md:w-[150%] items-center", // Increased width for better scroll length
                        "animate-infinite-scroll",
                    )}
                >
                    {doubledLogos.map((client, index) => (
                        // Each logo item has a fixed width, heavy padding, and a vertical divider
                        <div 
                            key={index} 
                            className="flex-shrink-0 w-1/5 md:w-1/6 lg:w-1/10 p-4 
                                       flex items-center justify-center 
                                       border-r border-gray-700/50 last:border-r-0"
                        >
                            {/* Logo Text: Larger, Monochromatic, with a subtle 3D text-shadow effect */}
                            <span 
                                className={cn(
                                    "text-4xl font-black uppercase tracking-wider transition-colors duration-300",
                                    "text-white/20 hover:text-secondary", // Fixed: light grey to secondary on hover
                                    "shadow-lg text-shadow-sm" // Aesthetic effect
                                )}
                                // Added subtle animation delay based on index for a cascading effect
                                style={{ animationDelay: `${index * 0.05}s` }}
                            >
                                {client.name}
                            </span>
                        </div>
                    ))}
                </div>
                
            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\cta-final-strip.tsx--------------------------------------------------------------------------------```// src/components/cta-final-strip.tsx
import React from 'react';
import { Button } from '@/components/ui/button';
import { Phone } from 'lucide-react';

// This component centralizes the high-conversion, final Call-to-Action strip.
// It applies the mobile-specific text removal logic for better UX (using hidden md:inline).

export function CtaFinalStrip() {
    return (
        <section className="bg-header-dark py-12 px-4 border-t border-primary/50">
            <div className="max-w-7xl mx-auto text-center">
                <h2 className="text-3xl font-extrabold text-white mb-4">
                    Ready for Verifiable, Zero-Risk Quality?
                </h2>
                <p className="text-gray-400 text-lg mb-6">
                    Contact us today to schedule an on-site assessment and receive your substrate-specific specification.
                </p>
                 <Button asChild 
                    className="bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-xl h-14 shadow-2xl transform hover:scale-105"
                >
                    <a href="tel:0826277082" className="flex items-center space-x-2">
                         <Phone className="w-6 h-6" />
                         <span className="hidden md:inline">Call Lawrence Brooks:</span> 082 627 7082
                    </a>
                </Button>
            </div>
        </section>
    );
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\cta-strip-module.tsx--------------------------------------------------------------------------------```// src/components/cta-strip-module.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { Phone, ArrowRight } from 'lucide-react';

export function CtaStripModule() {
  return (
    <section className="relative -mt-4 mb-16 px-4">
        <div className="max-w-7xl mx-auto">
            {/* The main container uses the tertiary (green) accent color for high contrast */}
            <div className="bg-tertiary p-6 md:p-8 rounded-xl shadow-2xl 
                        flex flex-col 
md:flex-row items-center justify-between 
                        gap-4 md:gap-8 
                        transition-all duration-500 
                        transform scale-[1.01] hover:scale-[1.02] hover:shadow-tertiary/50" // Subtle lift and glow effect
            
>
                
                {/* --- LEFT: Headline/Value Proposition --- */}
                <div className="text-center md:text-left">
                    <h3 className="text-2xl font-extrabold text-primary leading-tight">
                    
Ready to De-Risk Your Next Project?
                    </h3>
                    <p className="text-sm font-medium text-primary/80 mt-1">
                        Schedule a free technical assessment or chat directly with our owner.
</p>
                </div>

                {/* --- RIGHT: Dual CTAs --- */}
                <div className="flex flex-col sm:flex-row gap-3">
                    
                    {/* 1. 
Primary CTA: Direct Call Button (Emphasized) */}
                    <Button asChild 
                        // FIX: Increased height from h-12 to h-14 and padding to p-4 (mobile fix)
                        className="h-14 py-4 px-6 text-base font-bold shadow-lg 
                                   bg-primary hover:bg-black/80 text-white" // Dark button for contrast
  
                   >
                         <a href="tel:0826277082" className="flex items-center space-x-2">
                             <Phone className="w-5 h-5" />
                     
         <span>Call Owner (082 627 7082)</span>
                         </a>
                    </Button>
                    
                    {/* 2. Secondary 
CTA: Quote/Form Button (Subtle Link) */}
                    <Button asChild 
                        // FIX: Increased height from h-12 to h-14 and padding to p-4 (mobile fix)
                        className="h-14 py-4 px-6 text-base font-bold bg-white hover:bg-gray-100 text-primary 
                                   border border-primary/20 shadow-md"
      
               >
                        <Link href="/contact" className="flex items-center space-x-2">
                            <span>Request a Comprehensive Quote</span>
                           
  <ArrowRight className="w-4 h-4 ml-1" />
                        </Link>
                    </Button>

                </div>
            </div>
        </div>
    </section>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\hero-contact-form.tsx--------------------------------------------------------------------------------```// src/components/hero-contact-form.tsx
"use client";

import React from "react"; 
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import * as z from "zod";
import { Loader2 } from "lucide-react";
import { Button } from "@/components/ui/button"; // Shadcn button
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
// Shadcn card components

// --- 1. Define Form Schema (Validation) ---
const ContactSchema = z.object({
  name: z.string().min(2, "Name must be at least 2 characters."),
  email: z.string().email("Invalid email address."), // Added email validation
  service: z.string().min(1, "Please select a service type."),
  problems: z.string().min(10, "Please describe your needs in more detail (min 10 characters)."), // Added textarea field
});
type ContactFormValues = z.infer<typeof ContactSchema>;

const serviceOptions = [
  "Developer/New Build",
  "Body Corporate Maintenance",
  "Specialized Coating",
  "Structural Repairs",
];
// --- 2. Main Form Component (Client) ---
export function HeroContactForm() {
  const [isSubmitting, setIsSubmitting] = React.useState(false);
  const {
    register,
    handleSubmit,
    formState: { errors },
    reset,
  } = useForm<ContactFormValues>({
    resolver: zodResolver(ContactSchema),
  });
  const onSubmit = async (data: ContactFormValues) => {
    setIsSubmitting(true);
// Simulate API call delay
    console.log("Form Data:", data);
    await new Promise(resolve => setTimeout(resolve, 1500));
    alert(`Thank you, ${data.name}! We have received your request for ${data.service}. We will contact you soon.`);
    
    reset();
    setIsSubmitting(false);
  };
  return (
    // Card matches the HTML structure: p-6 rounded-xl shadow-2xl bg-white
    <Card className="rounded-xl shadow-2xl bg-white border-none mx-auto w-full max-w-sm"> 
      
      <CardHeader className="pt-6 pb-2">
        <CardTitle className="text-2xl font-extrabold text-primary mb-2">
          Get Started
        </CardTitle>
        {/* FIX: Used &apos; */}
        <p className="text-gray-600 text-sm leading-relaxed">
          Describe your project or property maintenance needs for a swift and comprehensive quote.
        </p>
      </CardHeader>
      
      <CardContent className="pt-2 pb-6">
        <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
          
          {/* Name Field */}
          <div className="group relative">
            <label htmlFor="name" className="sr-only">Your Name</label> {/* Accessibility: Screen Reader Only Label */}
            <input
           
              id="name"
              {...register("name")}
              placeholder="Your Name"
              // Updated border and focus ring colors for better contrast
              className={`w-full border rounded-lg bg-white text-primary py-2.5 px-3 text-base focus:outline-none focus:ring-2 focus:ring-secondary 
transition duration-300 ${errors.name ?
'border-red-600' : 'border-gray-400 placeholder:text-gray-600'}`}
            />
            {errors.name && <p className="mt-1 text-xs text-red-600">{errors.name.message}</p>}
          </div>

          {/* Email Field (New field to match validation schema) */}
          <div className="group relative">
            <label htmlFor="email" className="sr-only">Your Email</label> {/* Accessibility: Screen Reader Only Label */}
            <input
            
              type="email"
  
              id="email"
              {...register("email")}
              placeholder="Your Email"
              // Updated border and focus ring colors for better contrast
              className={`w-full border rounded-lg bg-white text-primary py-2.5 px-3 text-base focus:outline-none focus:ring-2 focus:ring-secondary transition duration-300 ${errors.email ?
'border-red-600' : 'border-gray-400 placeholder:text-gray-600'}`}
            />
            {errors.email && <p className="mt-1 text-xs text-red-600">{errors.email.message}</p>}
          </div>

          {/* Service Dropdown */}
          <div className="group relative custom-select-wrapper">
            <label htmlFor="service" className="sr-only">Select Service Type</label> {/* Accessibility: Screen Reader Only Label */}
            <select
              id="service"
       
 
               {...register("service")}
              // Applied HTML styles
              className={`block w-full border rounded-lg bg-white text-primary py-2.5 px-3 text-base focus:outline-none focus:ring-2 focus:ring-secondary cursor-pointer custom-select-arrow ${errors.service ?
'border-red-600' : 'border-gray-400 placeholder:text-gray-600'}`}
            >
              <option value="" disabled>Select Service Type</option>
              {serviceOptions.map((option) => (
                <option key={option} value={option}>{option}</option>
              ))}
            </select>
        
 
            {/* Custom arrow container recreated for visual fidelity */}
            <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-600">
                <svg className="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.21 8.27a.75.75 0 01.02-1.06z" clipRule="evenodd" /></svg>
            </div>
      
          {errors.service && 
<p className="mt-1 text-xs text-red-600">{errors.service.message}</p>}
          </div>
          
          {/* Textarea Field (for 'problems') */}
          <div className="group relative">
            <label htmlFor="problems" className="sr-only">Describe your needs</label> {/* Accessibility: Screen Reader Only Label */}
            <textarea 
                id="problems" 
            
              {...register("problems")} 
   
             rows={2} 
                placeholder="Describe your needs (e.g., location, scope, deadline)"
                // Updated border and focus ring colors for better contrast
                className={`w-full border rounded-lg bg-white text-primary py-2.5 px-3 text-base focus:outline-none focus:ring-2 focus:ring-secondary resize-none transition duration-300 ${errors.problems ?
'border-red-600' : 'border-gray-400 placeholder:text-gray-600'}`}
            />
            {errors.problems && <p className="mt-1 text-xs text-red-600">{errors.problems.message}</p>}
          </div>

          {/* Submit Button */}
          <div className="pt-1">
            <Button 
                type="submit"
      
 
              disabled={isSubmitting}
                // Replicated HTML styling using Tailwind classes and form-gold color
                className="w-full py-2.5 px-6 rounded-lg text-base font-bold text-primary bg-form-gold hover:bg-[#ffb000] transition duration-300 shadow-xl transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-form-gold/50"
            >
                {isSubmitting 
?
(
                    <>
                        <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                        Processing Request...
                    </>
     
              ) : (
                    "Get Your Comprehensive Quote"
                )}
            </Button>
          </div>
        </form>
      </CardContent>
    </Card>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\hero-section.tsx--------------------------------------------------------------------------------```// src/components/hero-section.tsx
import Link from "next/link";
import { HeroContactForm } from "@/components/hero-contact-form";
// This is a Server Component, optimized for initial load speed.
export function HeroSection() {
  
  // Removed unused 'usps' array.
  return (
    // The pt-20 ensures the content starts below the fixed header
    <section className="relative pt-32 pb-12 overflow-hidden bg-gray-100">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-2 gap-8 lg:items-start lg:pt-8">
            
            {/* --- LEFT COLUMN: Marketing Headline & CTA (Server-Side Content) --- */}
            <div className="text-center md:text-left p-4">
       
 
                 <h1 className="text-4xl sm:text-5xl font-extrabold text-primary leading-tight mb-3 drop-shadow-sm uppercase tracking-tight">
                    Your High-Access Asset Maintenance Partner.
                </h1>
                <p className="text-lg sm:text-xl text-primary max-w-xl mx-auto md:mx-0 mb-3 font-semibold">
          
 
                     The proven specialist, Professional Paint Contractors for structural repair and complex high-rise coating projects.
                </p>
                <p className="text-base text-gray-700 max-w-xl mx-auto md:mx-0 mb-6 font-medium">
                    We eliminate 
risk on multi-million rand assets 
with Independent, 3rd Party Quality Assurance (QA) on every project.
                </p>
                
                {/* Non-interactive CTA Button (using basic HTML/Tailwind classes to match the design) 
                   For a link that doesn't need to be a shadcn Button/Client Component */}
                <Link href="/our-process-independent-qa" // <-- FIX APPLIED HERE
  
       
                     className="inline-block bg-primary hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg shadow-xl transition duration-300 transform hover:scale-105 text-lg focus:outline-none focus:ring-4 focus:ring-secondary/50"
                >
                    View Our Process
    
               
  </Link>
            </div>

  
           {/* --- RIGHT COLUMN: Contact Form (Client Component) --- */}
            <div className="mx-auto w-full max-w-sm pt-4 md:pt-0"> 
                <HeroContactForm />
            </div>
        
</div>
    </section>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\mobile-trust-carousel.tsx--------------------------------------------------------------------------------```"use client";

import React, { useState, useEffect, useCallback } from 'react';
import { LucideIcon, ClipboardCheck, Medal, Scroll, Stethoscope } from 'lucide-react';

// Map of all possible Lucide icon names to their imported components
const IconMap: { [key: string]: LucideIcon } = {
    ClipboardCheck: ClipboardCheck,
    Medal: Medal,
    Scroll: Scroll,
    Stethoscope: Stethoscope,
};

interface TrustSignal {
    id: number;
    text: string;
    icon: string; // Changed type from LucideIcon (Function) to string (Serializable)
    tailwindColor: string;
}

interface MobileTrustCarouselProps {
    signals: TrustSignal[];
}

// This Client Component handles the mobile-only cycling carousel logic
export function MobileTrustCarousel({ signals }: MobileTrustCarouselProps) {
    const [currentIndex, setCurrentIndex] = useState(0);

    const cycleItems = useCallback(() => {
        setCurrentIndex(prevIndex => (prevIndex + 1) % signals.length);
    }, [signals.length]);

    // Use useEffect to handle setInterval, which is a browser API.
    // This logic runs only on the client.
    useEffect(() => {
        const isMobile = window.innerWidth < 768;
        
        if (isMobile && signals.length > 0) {
            const intervalId = setInterval(cycleItems, 3000); 
            return () => clearInterval(intervalId); // Cleanup function
        }
    }, [signals, cycleItems]);
    
    // Ensure that if the window resizes above mobile size, the correct view is shown.
    useEffect(() => {
        const handleResize = () => {
            if (window.innerWidth >= 768) {
                setCurrentIndex(0); 
            }
        };
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
    }, []);

    // Return the mobile container (the carousel effect happens via position/opacity)
    return (
        <div id="mobile-trust-container" className="relative h-[30px] overflow-hidden text-white text-center text-sm font-medium">
            {signals.map((signal, index) => {
                // Look up the icon component using the string name
                const IconComponent = IconMap[signal.icon];
                
                return (
                    <div
                        key={signal.id}
                        className={`absolute top-0 left-0 w-full flex items-center justify-center space-x-2 transition-opacity duration-500 ease-in-out ${
                            index === currentIndex ? 'opacity-100 relative' : 'opacity-0' 
                        }`}
                        style={{ 
                            position: index === currentIndex ? 'relative' : 'absolute', 
                            height: '30px',
                        }}
                    >
                        {/* Only render if the component was found */}
                        {IconComponent && <IconComponent className={`w-5 h-5 ${signal.tailwindColor}`} />}
                        <span className="whitespace-nowrap">{signal.text}</span>
                    </div>
                );
            })}
        </div>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\project-showcase-image-card.tsx--------------------------------------------------------------------------------```// src/components/project-showcase-image-card.tsx
import Link from 'next/link';
import React from 'react';
import { ArrowRight } from 'lucide-react';
import Image from 'next/image'; // <-- ADDED: Next.js Image component

interface ProjectCardProps {
    name: string;
    location: string;
    href: string;
    imageSrc: string;
}

// FINAL FIX: We rename 'tags' to '_tags' in the parameters list.
export function ProjectShowcaseImageCard({ name, location, href, imageSrc }: ProjectCardProps) {
    return (
        <Link 
            href={href} 
            className="flex flex-col border border-gray-800 rounded-xl overflow-hidden group transition-all duration-500 
                       bg-primary/90 shadow-xl transform hover:scale-[1.02] hover:shadow-secondary/30"
        >
            {/* --- Image Area (Top) --- */}
            <div className="relative h-60 w-full overflow-hidden">
                {/* Image Placeholder with Hover Effect */}
                <Image
                    src={imageSrc} // Use the imageSrc prop
                    alt={`Project image for ${name}`} // Essential for SEO and Accessibility [cite: 1900]
                    fill // Fills the parent container (relative h-60 w-full)
                    sizes="(max-width: 768px) 100vw, 33vw" // Responsive image size definition
                    className="object-cover transition-transform duration-500 group-hover:scale-[1.05]"
                />
                
                {/* Dark Overlay for Text Clarity (fades out on hover) */}
                <div className="absolute inset-0 bg-primary/20 transition-all duration-300 group-hover:bg-primary/0" />
            </div>

            {/* --- Content Area (Bottom) --- */}
            <div className="p-6 md:p-8 flex flex-col flex-grow">
                <p className="text-sm font-medium uppercase tracking-wider text-secondary mb-1">
                    {location}
                </p>
                            
                <h3 className="text-2xl font-extrabold mb-3 text-white group-hover:text-tertiary transition-colors leading-tight">
                    {name}
                </h3>
                
                {/* Link/CTA with subtle motion */}
                <span className="mt-auto pt-2 text-base font-semibold text-tertiary flex items-center group-hover:text-secondary transition-colors">
                    View Project Details
                    <ArrowRight className="w-4 h-4 ml-2 transition-transform group-hover:translate-x-1" />
                </span>
            </div>
        </Link>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\project-showcase-module.tsx--------------------------------------------------------------------------------```// src/components/project-showcase-module.tsx
import React from 'react';
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { ProjectShowcaseImageCard } from './project-showcase-image-card'; // <-- NEW IMPORT
import { featuredProjects } from '@/data/projects';
export function ProjectShowcaseModule() {
    return (
        <section className="bg-primary py-24 md:py-32 px-4 border-t border-gray-800">
            <div className="max-w-7xl mx-auto">
                
                {/* --- HEADER: Bespoke, Magazine-Style Heading --- */}
                <header className="text-center max-w-4xl mx-auto mb-16 text-white">
                    {/* Subtext: Highlighting Local Authority (Local SEO Strategy) */}
                    <p className="text-xl font-medium uppercase tracking-wider text-secondary mb-2">
                        Verifiable Proof: Our Latest High-Value Projects
                    </p>
                    
                    {/* Headline: Uses large, confident typography */}
                    <h2 className="text-5xl md:text-6xl font-extrabold tracking-tight leading-tight">
                        Built for Gauteng&apos;s Premier Assets.
                    </h2>
                    <p className="text-lg font-light mt-4 text-gray-400">
                        Showcasing work in Midrand, Pretoria East, North Riding, and Benoni.
                    </p>
                </header>

                {/* --- PROJECT GRID: Elegant List with Image Cards --- */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    {featuredProjects.map((project) => (
                        <ProjectShowcaseImageCard
                            key={project.slug}
                            name={project.name}
                            location={project.location}
                            href={`/projects/${project.slug}`}
                            imageSrc={project.image}
                        />
                    ))}
                </div>

                {/* --- FINAL CTA BUTTON (View All Projects) --- */}
                <div className="text-center mt-16">
                    <Button asChild 
                        className="text-lg font-bold h-12 bg-secondary hover:bg-[#4AD5E2] text-white shadow-lg"
                    >
                        <Link href="/projects">
                            View All Projects and Portfolio
                        </Link>
                    </Button>
                </div>
            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\qa-process-module.tsx--------------------------------------------------------------------------------```// src/components/qa-process-module.tsx
import Link from 'next/link';
import { Button } from '@/components/ui/button';

// This component represents the De-Risking/QA Process section.
export function QaProcessModule() {
    return (
        <section className="py-20 bg-gray-50">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
                    
                    {/* --- LEFT COLUMN: Narrative & CTA --- */}
                    <div className="lg:col-span-5">
                        <span className="text-primary font-semibold uppercase text-sm tracking-widest">Our Unbeatable Guarantee</span>
                        <h2 className="text-4xl font-extrabold text-primary uppercase mb-4 mt-2 leading-tight">
                            De-Risking Your Multi-Million Rand Asset.
                        </h2>
                        <p className="text-lg text-gray-700 mb-6">
                            Unlike standard contractors who rely on biased, in-house quality checks, we utilize a trusted, independent 3rd party QA company on all projects. This is our commitment to verifiably superior quality.
                        </p>
                        {/* Button using shadcn/ui Button asChild */}
                        <Button asChild 
                            className="bg-primary hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg shadow-xl transition duration-300 transform hover:scale-105 text-lg h-auto"
                        >
                            <Link href="/our-process-independent-qa">
                                Read the Full QA Process
                            </Link>
                        </Button>
                    </div>
                    
                    {/* --- RIGHT COLUMN: QA Steps --- */}
                    <div className="lg:col-span-7 space-y-6">
                        {/* Step 1 */}
                        <div className="p-6 border-l-4 border-secondary bg-white shadow-xl rounded-lg transition duration-300 transform hover:scale-[1.01]">
                            <div className="text-5xl font-extrabold text-primary mb-2 leading-none">01</div>
                            <h3 className="text-xl font-bold text-primary mb-2">Substrate Specification & Assessment</h3>
                            <p className="text-gray-600">
                                A dedicated project manager and the independent body conduct an on-site assessment to determine the correct coating system and technical specification required for your specific asset.
                            </p>
                        </div>
                        {/* Step 2 */}
                        <div className="p-6 border-l-4 border-secondary bg-white shadow-xl rounded-lg transition duration-300 transform hover:scale-[1.01]">
                            <div className="text-5xl font-extrabold text-primary mb-2 leading-none">02</div>
                            <h3 className="text-xl font-bold text-primary mb-2">Continuous Application Inspection</h3>
                            <p className="text-gray-600">
                                The independent company performs continuous application inspections at every critical stage (surface prep, primer, film thickness) to ensure manufacturer requirements are met *before* the final coat.
                            </p>
                        </div>
                        {/* Step 3 */}
                        <div className="p-6 border-l-4 border-secondary bg-white shadow-xl rounded-lg transition duration-300 transform hover:scale-[1.01]">
                            <div className="text-5xl font-extrabold text-primary mb-2 leading-none">03</div>
                            <h3 className="text-xl font-bold text-primary mb-2">Verifiable Bi-Weekly Reporting</h3>
                            <p className="text-gray-600">
                                You receive bi-weekly progress and substrate reports providing a complete, recorded history of the project. This delivers objective proof of quality and total peace of mind for trustees and facility managers.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\service-expertise-grid.tsx--------------------------------------------------------------------------------```// src/components/service-expertise-grid.tsx
import Link from 'next/link';
import { ServiceGridItem } from './service-grid-item';
import { Button } from '@/components/ui/button';
// Import the actual Lucide components used for the data array
import { Wrench, Umbrella, AirVent, PersonStanding, FlaskConical, Stethoscope, Building } from 'lucide-react';
const servicesData = [
    // NOW PASSING THE ACTUAL COMPONENT TYPE (e.g., Wrench)
    { title: "Structural & Spalling Repairs", description: "Fixing concrete cancer and structural defects.", href: "/structural-repairs/", icon: Wrench },
    { title: "Roof & Balcony Waterproofing", description: "Guaranteed systems for flat roofs and under-tile leaks.", href: "/waterproofing-services/", icon: Umbrella },
    { title: "Rising Damp Treatment", description: "Permanent chemical injection DPC solutions.", href: "/damp-proofing-services/", icon: AirVent },
    { title: "Rope Access & High Access", description: "Cost-effective maintenance for high-rise buildings.", href: "/access-solutions/", icon: PersonStanding },
 
    { title: "Industrial Corrosion Control", description: "Protective coatings for factory assets and steelwork.", href: "/painting/industrial-painting/", icon: Wrench },
    { title: "Hygienic Food-Grade Floors", description: "Seamless, chemical-resistant systems for food plants.", href: "/coatings/hygienic-food-grade-flooring/", icon: FlaskConical },
    { title: "Body Corporate Painting", description: "Managing complex projects with minimal disturbance.", href: "/painting/body-corporate-painting/", icon: Building },
    { title: "Commercial & Healthcare", description: "Low-VOC, specialized coatings for sensitive environments.", href: "/painting/commercial-painting/", icon: Stethoscope },
];
// This is the main layout component for the service grid.
export function ServiceExpertiseGrid() {
    return (
        <section className="py-16 bg-white">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
                    
                    {/* --- LEFT PANEL: 
Headline & CTA --- */}
                    <div className="col-span-1 md:col-span-2 bg-primary p-10 rounded-xl shadow-2xl flex flex-col justify-between">
                        <header>
                            <h2 className="text-4xl font-extrabold text-white uppercase mb-4 tracking-tight">
         
                        Expertise in High-Performance Assets
                            </h2>
                            {/* FIX: Changed text-secondary to text-tertiary for better contrast on dark background */}
                            <p className="text-xl text-tertiary font-medium">
               
                          We offer advanced systems and specialized access to protect complex assets where others cannot reach.
                            </p>
                        </header>
                 
        
                        {/* CTA Button using shadcn/ui Button (Server-safe link structure) */}
                        <Button asChild 
                            // CORRECT: bg-secondary, text-white
   
                          className="mt-8 self-start bg-secondary hover:bg-[#4AD5E2] text-white font-bold py-3 px-6 rounded-lg shadow-xl transition duration-300 transform hover:scale-105 whitespace-nowrap text-lg h-auto"
                        >
                             <Link href="/services">
     
                            View All Technical Services
                            </Link>
                        </Button>
                  
          </div>
                    
                    {/* --- RIGHT GRID: Service Cards --- */}
                    <div className="col-span-1 md:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                        
{servicesData.map((service, index) => (
                            <ServiceGridItem 
                                key={index} 
                                title={service.title} 
  
                                description={service.description} 
                                href={service.href} 
                                // Pass the component 
                                icon={service.icon} 
                            />
                        ))}
               
             </div>
                </div>
            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\service-grid-item.tsx--------------------------------------------------------------------------------```// src/components/service-grid-item.tsx
import Link from 'next/link';
import React from 'react';
import { Wrench, Umbrella, AirVent, PersonStanding, FlaskConical, Stethoscope, Building, Tent } from 'lucide-react';
interface ServiceGridItemProps {
    title: string;
    description: string;
    href: string;
    icon: React.ElementType;
// The correct type for a component like 'Wrench'
}

// FIX: Corrected iconMap structure to map strings to the actual Lucide component imports.
const iconMap: { [key: string]: React.ElementType } = {
    // Structural Repairs (fa-house-crack) -> Wrench (for fixing)
    "Structural & Spalling Repairs": Wrench, 
    // Waterproofing (fa-umbrella) -> Umbrella
    "Roof & Balcony Waterproofing": Umbrella, 
    // Damp Treatment (fa-lungs-virus) -> AirVent (for air quality/moisture)
    "Rising Damp Treatment": AirVent, 
    // Rope Access (fa-person-hiking) -> PersonStanding (for high access)
    "Rope Access & High Access": PersonStanding, // Note: This uses PersonStanding, defined above
    // Industrial Corrosion (fa-wrench) -> Wrench (re-used for industrial)
    "Industrial Corrosion Control": Wrench, 
    // Hygienic Floors (fa-flask-vial) -> FlaskConical
    "Hygienic Food-Grade Floors": FlaskConical, 
    // Body Corporate (fa-building-user) -> Building
    "Body Corporate Painting": Building, 
    // Commercial/Healthcare (fa-hospital) -> Stethoscope
    "Commercial & Healthcare": Stethoscope,
};
// This is a reusable Server Component for each card.
export function ServiceGridItem({ title, description, href, icon: IconComponent }: ServiceGridItemProps) {
    
    // Fallback: If a valid Lucide component is passed, use it.
// Otherwise, attempt to look up by title.
    const FinalIconComponent = (typeof IconComponent === 'string' ? iconMap[title] : IconComponent) || Tent;
    return (
        <Link href={href} 
            // FIX: Increased vertical padding from p-4 to py-6 px-4 to increase touch target size for Accessibility (Touch Targets audit).
            className="group bg-white py-6 px-4 rounded-lg border-b-2 border-primary/50 flex flex-col justify-between 
                       transition-all duration-300 
                       hover:bg-gray-50 
                   
    hover:translate-y-[-4px] 
                       hover:shadow-xl 
                       hover:ring-2 hover:ring-secondary/50" // <-- ADDED HOVER EFFECTS
        >
            {/* ICON COLOR CHANGE: Handled by 'group-hover:text-secondary' */}
            <FinalIconComponent className="w-6 h-6 
text-tertiary transition duration-300 mb-2 group-hover:text-secondary" /> 
            
            <h3 className="text-base font-semibold text-primary leading-tight flex-grow">
                {title}
            </h3>
            <p className="text-xs text-gray-500 mt-1">
                {description}
      
            </p>
        </Link>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\trust-strip-mobile-carousel.tsx--------------------------------------------------------------------------------```// src/components/trust-strip-mobile-carousel.tsx
import React from 'react';
// FIX: Dynamically import the Client Component to remove it from the main bundle
import dynamic from 'next/dynamic';

// Dynamic import with SSR disabled to ensure it only loads on the client/when needed
const MobileTrustCarousel = dynamic(() => import('./mobile-trust-carousel').then(mod => mod.MobileTrustCarousel), {
    ssr: false, // Do not render on the server, which prevents unnecessary script evaluation on the main thread
    loading: () => <div className="h-[30px] text-white text-center text-sm font-medium">Loading Trust Signals...</div>,
});


// --- Data: Trust Signals (Passing String Names only) ---
interface TrustSignal {
    id: number;
    text: string;
    icon: string; 
    tailwindColor: string;
}

const trustSignals: TrustSignal[] = [
    // FIX: Changed tailwindColor from 'text-tertiary' to 'text-white' for contrast compliance
    { id: 1, text: "Independent 3rd Party QA", icon: 'ClipboardCheck', tailwindColor: 'text-white' }, 
    { id: 2, text: "50+ Years Combined Experience", icon: 'Medal', tailwindColor: 'text-white' }, 
    { id: 3, text: "Guarantees: 5/7/15 Year Available", icon: 'Scroll', tailwindColor: 'text-white' },
    { id: 4, text: "Fully OHS Compliant", icon: 'Stethoscope', tailwindColor: 'text-white' },
];
// This Server Component sets the container and passes data to the client logic.
export function TrustStripMobileCarousel() {
    return (
        <section className="bg-header-dark py-4 shadow-inner">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                
                {/* Desktop Grid: Always visible, grid layout */}
                <div className="hidden md:grid md:grid-cols-4 md:gap-4 text-white text-center text-sm font-medium">
 
                    {trustSignals.map((signal) => {
                        // Renders on the server using the string name for a simple data display
                        return (
                 
                            <div key={signal.id} className="flex items-center justify-center space-x-2">
                                {/* Placeholder icon display for server-side view */}
                                <span className={`w-5 h-5 ${signal.tailwindColor}`}>‚òÖ</span> 
         
                                <span className="whitespace-nowrap">{signal.text}</span>
                            </div>
                        );
})}
                </div>

                {/* Mobile Container: Passes serializable string data to the Client Component */}
                <div className="md:hidden">
                    {/* Dynamic import is used here */}
                    <MobileTrustCarousel signals={trustSignals} />
                </div>
  
               
            </div>
        </section>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\analytics\gtm-partytown.tsx--------------------------------------------------------------------------------```'use client'

import Script from 'next/script'

export function GoogleTagManager({ containerId }: { containerId: string }) {
  return (
    <>
      <Script
        id="gtm-partytown"
        type="text/partytown"
        dangerouslySetInnerHTML={{
          __html: `
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','${containerId}');
          `,
        }}
      />
    </>
  )
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\layout\footer.tsx--------------------------------------------------------------------------------```// src/components/layout/footer.tsx
import Link from 'next/link';
// ADDED ClipboardCheck to the import list
import { Phone, Mail, MessageCircle, Facebook, Linkedin, ClipboardCheck } from 'lucide-react';
import React from 'react';

// NOTE: This component needs to be rendered OUTSIDE of the main content area 
// to ensure it is correctly placed at the bottom of the page structure.
export function Footer() {
    // Get current year for copyright text
    const currentYear = new Date().getFullYear();
// Reusable utility class for footer links to match the HTML design
    // FIX: Changed text-gray-400 to text-gray-300 for contrast compliance
    const footerLinkClass = "text-gray-300 hover:text-secondary transition duration-300";
// SVG Path for the Maverick Logo (reused from header)
    const logoSvgPath = "m423.5,40h-0.5v-8.5c0-17.369-14.131-31.5-31.5-31.5h-288c-17.369,0-31.5,14.131-31.5,31.5v8.5h-0.5c-12.958,0-23.5,10.542-23.5,23.5v8.5h-0.5c-17.369,0-31.5,14.131-31.5,31.5v64c0,17.369 14.131,31.5 31.5,31.5h176c9.098,0 16.5,7.402 16.5,16.5v16.5h-8.5c-12.958,0-23.5,10.542-23.5,23.5v168c0,21.78 17.72,39.5 39.5,39.5s39.5-17.72 39.5-39.5v-168c0-12.958-10.542-23.5-23.5-23.5h-8.5v-16.5c0-17.369-14.131-31.5-31.5-31.5h-176c-9.098,0-16.5-7.402-16.5-16.5v-64c0-9.098 7.402-16.5 16.5-16.5h0.5v8.5c0,12.958 10.542,23.5 23.5,23.5h0.5v8.5c0,17.369 14.131,31.5 31.5,31.5h288c17.369,0 31.5-14.131 31.5-31.5v-8.5h0.5c12.958,0 23.5-10.542 23.5-23.5v-32c0-12.958-10.542-23.5-23.5-23.5zm-176,408c-13.509,0-24.5-10.99-24.5-24.5v-144.5h49v144.5c0,13.51-10.991,24.5-24.5,24.5zm24.5-192.5v8.5h-49v-8.5c0-4.687 3.813-8.5 8.5-8.5h32c4.687,0 8.5,3.813 8.5,8.5zm-200.5-151.5c-4.687,0-8.5-3.813-8.5-8.5v-32c0-4.687 3.813-8.5 8.5-8.5h0.5v49h-0.5zm336.5,23.5c0,9.098-7.402,16.5-16.5,16.5h-288c-9.098,0-16.5-7.402-16.5-16.5v-96c0-9.098 7.402-16.5 16.5-16.5h288c9.098,0 16.5,7.402 16.5,16.5v96zm24-32c0,4.687-3.813,8.5-8.5,8.5h-0.5v-49h0.5c4.687,0 8.5,3.813 8.5,8.5v32zM247.5,416c-1.98,0-3.91,0.8-5.3,2.2-1.4,1.39-2.2,3.319-2.2,5.3 0,1.97 0.8,3.91 2.2,5.3 1.39,1.4 3.33,2.2 5.3,2.2 1.97,0 3.91-0.8 5.3-2.2 1.4-1.4 2.2-3.33 2.2-5.3 0-1.971-0.8-3.91-2.2-5.3-1.39-1.4-3.33-2.2-5.3-2.2z";
return (
        <footer className="bg-footer-dark pt-16 pb-8 border-t border-primary/50">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                
                {/* --- TOP SECTION: Grid of Links and Contact Info --- */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 border-b border-gray-700/50 pb-10 mb-8">
 
                    
                    {/* COLUMN 1: Brand & Mission */}
                    <div>
                        <Link href="/" className="flex items-center text-white space-x-2 mb-4">
     
                        {/* Logo SVG (Green Roller, White Text) */}
                            <svg className="w-7 h-7" fill="#A9D834" height="800px" width="800px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 463 463" xmlnsXlink="http://www.w3.org/1999/xlink" enableBackground="new 0 0 463 463">
                         
                        <g>
                                    <path d={logoSvgPath} />
                                </g>
                       
             </svg>
                            <span className="font-extrabold text-2xl tracking-tight leading-none text-white">MAVERICK</span>
                        </Link>
                        {/* FIX: Changed text-gray-400 to text-gray-300 */}
                        <p className="text-gray-300 text-sm mb-4">
           
                          The trusted Asset Maintenance Partner for high-value properties in Gauteng.
                        We solve problems from the structure up.
                        </p>
                        <Link href="/our-process-independent-qa" className="inline-flex items-center text-secondary hover:text-white transition duration-300 font-semibold text-sm space-x-2">
                            <ClipboardCheck className="w-4 h-4" />
                            
                            <span>Independent QA Process</span>
                        </Link>
                    </div>

                    {/* COLUMN 2: Quick Links */}
                    <div>
         
                        <h3 className="text-lg font-bold text-white uppercase mb-4 tracking-wider">Quick Links</h3>
                        <ul className="space-y-3">
                            <li><Link href="/" className={footerLinkClass}>Home</Link></li>
                       
             <li><Link href="/about-us" className={footerLinkClass}>About Us & Experience</Link></li>
                            <li><Link href="/projects" className={footerLinkClass}>Portfolio (Key Projects)</Link></li>
                            <li><Link href="/accreditations" className={footerLinkClass}>Approved Applicators</Link></li>
                           
                            <li><Link href="/blog" className={footerLinkClass}>Expertise Hub (Blog)</Link></li>
                            <li><Link href="/contact" className={footerLinkClass}>Get a Quote</Link></li>
                        </ul>
                    </div>

                   
                    {/* COLUMN 3: Specialist Services */}
                    <div>
                        <h3 className="text-lg font-bold text-white uppercase mb-4 tracking-wider">Specialist Services</h3>
                        <ul className="space-y-3">
                  
             <li><Link href="/waterproofing-services" className={footerLinkClass}>Roof & Balcony Waterproofing</Link></li>
                            <li><Link href="/structural-repairs" className={footerLinkClass}>Structural & Spalling Repair</Link></li>
                            {/* NEW LINK: Hygienic Flooring */}
                   
             <li><Link href="/coatings/hygienic-food-grade-flooring" className={footerLinkClass}>Hygienic Floor Coatings</Link></li>
                            <li><Link href="/access-solutions" className={footerLinkClass}>Rope Access Painting</Link></li>
                            <li><Link href="/painting/body-corporate-painting" className={footerLinkClass}>Body Corporate Painting</Link></li>
                       
             {/* NEW LINK: Industrial Corrosion */}
                            <li><Link href="/painting/industrial-painting" className={footerLinkClass}>Industrial Corrosion Control</Link></li>
                        </ul>
                    </div>

              
                    {/* COLUMN 4: Contact & Social */}
                    <div>
                        <h3 className="text-lg font-bold text-white uppercase mb-4 tracking-wider">Contact & Connect</h3>
                        <ul className="space-y-4">
           
                          <li className="flex items-start space-x-3">
                                <Phone className="w-5 h-5 text-secondary flex-shrink-0 mt-0.5" />
                                <div>
          
                           {/* FIX: Changed text-gray-400 to text-gray-300 */}
                                    <span className="text-gray-300 text-sm block">Call Lawrence Brooks:</span>
                                    <a href="tel:0826277082" className="text-white hover:text-secondary font-semibold transition duration-300">082 627 7082</a>
                         
                        </div>
                            </li>
                            <li className="flex items-start space-x-3">
                                <Mail className="w-5 
h-5 text-secondary flex-shrink-0 mt-0.5" />
                                <div>
                                    <span className="text-gray-300 text-sm block">Email for Quotes:</span>
                       
             <a href="mailto:maverickpainters1984@gmail.com" className="text-white hover:text-secondary transition duration-300 text-sm md:text-base">maverickpainters1984@gmail.com</a>
                                </div>
                            </li>
                    
                         <li className="flex space-x-4 pt-2">
                                <a href="#" className="text-white hover:text-tertiary transition duration-300 text-2xl" aria-label="Connect on Facebook"><Facebook /></a>
                                <a href="#" className="text-white hover:text-tertiary transition duration-300 text-2xl" aria-label="Connect on LinkedIn"><Linkedin /></a>
     
                            <a href="https://wa.me/27826277082" target="_blank" rel="noopener noreferrer" className="text-white hover:text-tertiary transition duration-300 text-2xl" aria-label="WhatsApp Maverick Painting"><MessageCircle /></a>
                            </li>
                        </ul>
        
             </div>
                </div>

                {/* --- BOTTOM SECTION: Copyright & Legal Links + Custom Credit --- */}
                {/* FIX: Changed text-gray-500/600 to text-gray-300/400 for contrast */}
                <div className="flex flex-col md:flex-row justify-between items-center text-gray-400 text-xs md:text-sm">
                    
<p className="mb-3 md:mb-0">&copy;{currentYear} Maverick Painting. All rights reserved. Registered in Gauteng, South Africa.</p>
                    <div className="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4 items-center">
                         <p className="order-2 md:order-1 text-gray-400 text-xs">
                             Designed, Developed & 
                             <a href="https://www.endpointmedia.co.za/" target="_blank" rel="noopener noreferrer" className="text-secondary hover:text-tertiary transition duration-300 font-semibold"> Maintained by Endpoint Media.</a>
                         </p>
                        <div className="flex space-x-4 order-1 md:order-2">
                            <Link href="/terms" className="hover:text-secondary transition duration-300">Terms of Service</Link>
 
                            <span className="text-gray-600">|</span> {/* Note: Keeping gray-600 for separator contrast is acceptable */}
                            <Link href="/privacy" className="hover:text-secondary transition duration-300">Privacy Policy</Link>
                        </div>
               
             </div>
                </div>
            </div>
        </footer>
    );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\layout\header.tsx--------------------------------------------------------------------------------```// src/components/layout/header.tsx
"use client"; // *** ADDED: Must be a client component to handle click state and screen width ***

import Link from "next/link";
import Image from "next/image";
import { Button } from "@/components/ui/button";
import 
{ Phone, ChevronDown } from "lucide-react"; // ADDED ChevronDown
import { MobileNav } from "@/components/layout/mobile-nav";
import { cn } from "@/lib/utils";
import { getPillars } from "@/lib/pillars";
import React, { useState } from 'react'; // ADDED useState

// Note: SVG icon path is complex and included directly here.
export function Header() {
  const [isDropdownOpen, setIsDropdownOpen] = useState(false); // State for click handling
  const navItems = [
    { name: "Home", href: "/" },
    { name: "About Us", href: "/about-us" },
    { name: "Services", href: "/services" },
    { name: "Projects", href: "/projects" },
    { name: "Contact", href: "/contact" },
  ];
  const pillars = getPillars();
  const toggleDropdown = () => setIsDropdownOpen(!isDropdownOpen);
  const closeDropdown = () => setIsDropdownOpen(false);

  return (
    <header 
        id="header-nav" 
        className={cn(
      
            "fixed top-0 left-0 w-full z-50 transition-all duration-300",
            "bg-footer-dark", // Removed backdrop-blur and transparency
            "shadow-lg"
        )}
    >
        <div 
className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="flex items-center justify-between h-20">
                
                {/* --- 1. LOGO & ICON (Left) --- */}
                <Link href="/" className="flex-shrink-0 flex items-center text-white rounded-lg p-1 transition 
duration-300 hover:text-secondary space-x-2">
             
{/* SVG Icon - Remains Green/tertiary (fill="#A9D34") */}
                    <svg className="w-7 h-7 animate-shake" fill="#A9D34" height="800px" width="800px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 463 463" xmlnsXlink="http://www.w3.org/1999/xlink" enableBackground="new 0 0 463 463">
                        <g>
                        
<path d="m423.5,40h-0.5v-8.5c0-17.369-14.131-31.5-31.5-31.5h-288c-17.369,0-31.5,14.131-31.5,31.5v8.5h-0.5c-12.958,0-23.5,10.542-23.5,23.5v8.5h-0.5c-17.369,0-31.5,14.131-31.5,31.5v64c0,17.369 14.131,31.5 31.5,31.5h176c9.098,0 16.5,7.402 16.5,16.5v16.5h-8.5c-12.958,0-23.5,10.542-23.5,23.5v168c0,21.78 17.72,39.5 
39.5,39.5s39.5-17.72 39.5-39.5v-168c0-12.958-10.542-23.5-23.5-23.5h-8.5v-16.5c0-17.369-14.131-31.5-31.5-31.5h-176c-9.098,0-16.5-7.402-16.5-16.5v-64c0-9.098 7.402-16.5 16.5-16.5h0.5v8.5c0,12.958 10.542,23.5 23.5,23.5h0.5v8.5c0,17.369 14.131,31.5 31.5,31.5h288c17.369,0 31.5-14.131 31.5-31.5v-8.5h0.5c12.958,0 23.5-10.542 23.5-23.5v-32c0-12.958-10.542-23.5-23.5-23.5zm-176,408c-13.509,0-24.5-10.99-24.5-24.5v-144.5h49v144.5c0,13.51-10.991,24.5-24.5,24.5zm24.5-192.5v8.5h-49v-8.5c0-4.687 3.813-8.5 8.5-8.5h32c4.687,0 8.5,3.813 8.5,8.5zm-200.5-151.5c-4.687,0-8.5-3.813-8.5-8.5v-32c0-4.687 3.813-8.5 8.5-8.5h0.5v49h-0.5zm336.5,23.5c0,9.098-7.402,16.5-16.5,16.5h-288c-9.098,0-16.5-7.402-16.5-16.5v-96c0-9.098 7.402-16.5 16.5-16.5h288c9.098,0 16.5,7.402 16.5,16.5v96zm24-32c0,4.687-3.813,8.5-8.5,8.5h-0.5v-49h0.5c4.687,0 8.5,3.813 8.5,8.5v32z"/>
   
<path d="m247.5,416c-1.98,0-3.91,0.8-5.3,2.2-1.4,1.39-2.2,3.319-2.2,5.3 0,1.97 0.8,3.91 2.2,5.3 1.39,1.4 3.33,2.2 5.3,2.2 1.97,0 3.91-0.8 5.3-2.2 1.4-1.4 2.2-3.33 2.2-5.3 0-1.971-0.8-3.91-2.2-5.3-1.39-1.4-3.33-2.2-5.3-2.2z"/>
                        
</g>
           
          </svg>
                    {/* Text remains white */}
                    <span className="font-extrabold text-2xl tracking-tight leading-none text-white">MAVERICK</span>
        
         </Link>

               
{/* --- 2. DESKTOP NAVIGATION (Center) --- */}
    
             <nav className="hidden md:flex flex-grow justify-center px-4 space-x-4">
                    {navItems.map((item) => (
                        <Link
                            key={item.name}
              
               href={item.href}
                            className="text-white hover:text-secondary transition duration-300 font-medium py-2 px-3 rounded-lg"
                            onClick={closeDropdown} // Close dropdown on any nav click
                        >
                            {item.name}
                        </Link>
                
     ))}

                    <div className="relative group">
                        {/* Dropdown Toggle Button (Handles click on desktop/tablet) */}
                        <button
                            type="button"
                            onClick={toggleDropdown}
                            className="text-white hover:text-secondary transition duration-300 font-medium py-2 px-3 rounded-lg cursor-pointer flex items-center gap-1 focus:outline-none focus:ring-1 focus:ring-secondary"
                        >
                            Guides
                            <ChevronDown className={cn(
                                "w-3 h-3 transition-transform duration-200",
                                isDropdownOpen ? "rotate-180" : "rotate-0"
                            )} />
                        </button>
                        
                        {/* Dropdown Content Container */}
                        <div 
                            className={cn(
                                "absolute left-0 top-full mt-3 w-[420px] transition-opacity duration-200",
                                // Conditional visibility based on click state
                                isDropdownOpen ? "opacity-100 pointer-events-auto" : "opacity-0 pointer-events-none"
                            )}
                            // *** FIX APPLIED HERE: Added max-h and overflow-y for scrollability on desktop ***
                            style={{ maxHeight: isDropdownOpen ? '80vh' : '0', overflowY: isDropdownOpen ? 'auto' : 'hidden' }}
                        >
                            <div className="rounded-2xl bg-header-dark/95 border border-white/10 shadow-2xl p-5 grid grid-cols-1 gap-4">
                                {pillars.map((pillar) => (
                                    <div key={pillar.slug} className="flex flex-col gap-2">
                                        <Link
                 
                                            href={`/blog/${pillar.slug}`}
                                            className="text-white font-semibold tracking-tight hover:text-secondary transition"
                                            onClick={closeDropdown} // Close on click
                                        >
                          
                                           {pillar.title}
                                        </Link>
                                        <p className="text-sm text-white/70">
                                         
                                             {pillar.summary}
                                        </p>
                                        <div className="flex flex-wrap gap-2 text-xs text-white/60">
                                            {pillar.clusters.slice(0, 3).map((cluster) => (
                                                <Link
                                                    key={cluster.slug}
                                               
                                                    href={cluster.metadata.path}
                                                    className="px-2 py-1 rounded-full bg-white/10 hover:bg-secondary/80 hover:text-primary transition"
                                                    onClick={closeDropdown} // Close on click
                                                >
                              
                                                    {cluster.title}
                                                </Link>
                                            ))}
                           
              </div>
                                    </div>
                                ))}
                                <Link
                            
                                    href="/blog"
                                    className="text-secondary text-sm font-semibold underline underline-offset-4"
                                    onClick={closeDropdown} // Close on click
                                >
                                    View all expert guides ‚Üí
                     
            </Link>
                            </div>
                        </div>
                    </div>
                </nav>

                {/* --- 3. DESKTOP CTAS (Right) --- */}
                <div className="hidden md:flex 
space-x-6 items-center flex-shrink-0">
            
                 {/* Phone Number Section (Simplified using Lucide Icons) */}
                    <Link href="tel:0826277082" className="flex items-center text-white/90 transition duration-300 hover:text-secondary space-x-2">
                   
<div className="p-2 border border-white/50 rounded-full">
                            <Phone className="w-5 h-5" />
  
                  
      </div>
                        <div className="text-left">
           
<span className="text-xs font-light block text-white/70">Lawrence Brooks</span>
                            <span className="text-base font-semibold block whitespace-nowrap text-white">082 627 7082</span>
  
                       </div>
                   
</Link>
                
    
                    {/* WhatsApp Button - NEW ICON IMPLEMENTATION */}
            
                 <Button asChild 
                        className="bg-whatsapp-green hover:bg-[#25C356] text-primary font-bold text-lg py-3 px-6 
rounded-lg shadow-xl transition duration-300 transform hover:scale-105 whitespace-nowrap"
                    >
                      
                   <a href="https://wa.me/27826277082" target="_blank" rel="noopener noreferrer" className="flex items-center space-x-2">
  
                           {/* Use next/image for optimized performance */}
                            <Image 
                                src="/images/WhatsApp.svg.webp" 
                                alt="WhatsApp Icon" 
               
      className="w-5 h-5"
                                width={20} // Required by next/image
                                height={20} // Required by next/image
                            
         priority // Mark as high priority for LCP
                            
/>
            
                            <span>WhatsApp</span>
                        </a>
                    </Button>
                
</div>

                {/* --- 4. MOBILE MENU TOGGLE (Right, Mobile Only) --- */}
                <div className="md:hidden">
                    {/* Pass the pillar data to the mobile nav */}
                    <MobileNav pillars={pillars} />
                </div>

            </div>
    
</div> 
        {/* Mobile menu content container will be handled by MobileNav Client Component */}
    </header>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\layout\mobile-nav.tsx--------------------------------------------------------------------------------```// src/components/layout/mobile-nav.tsx
"use client";

import React from 'react';
import Link from 'next/link';
import Image from 'next/image'; 
import { Menu, X, Phone, ChevronDown } from 'lucide-react'; // ADDED ChevronDown
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils'; 
// NOTE: We now receive pillars as a prop from the parent Header component
import type { PillarDefinition } from '@/lib/pillars'; 
import { useState } from 'react'; // ADDED useState

interface MobileNavProps {
    pillars: PillarDefinition[]; // Receive Pillar data as prop
}

export function MobileNav({ pillars }: MobileNavProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [isGuidesOpen, setIsGuidesOpen] = useState(false); // State for mobile accordion

const navItems = [
    { name: 'Home', href: '/' },
    { name: 'About Us', href: '/about-us' },
    { name: 'Services', href: '/services' },
    { name: 'Projects', href: '/projects' },
    { name: 'Contact', href: '/contact' },
  ];
  // const pillars = getPillars(); // REMOVED: Now comes from props
const toggleMenu = () => setIsOpen(!isOpen);

  return (
    <>
      {/* Hamburger Icon Button (Mobile Only) */}
      <Button 
        variant="ghost"
        size="icon"
        // Use custom Tailwind colors defined in config
        className="text-white hover:text-secondary p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary ml-auto"
        onClick={toggleMenu}
        aria-label="Toggle Menu"
      >
 
{isOpen ? <X className="h-6 w-6" /> : <Menu className="h-6 w-6" />}
      </Button>

      {/* Mobile Menu Overlay */}
      <div
        className={cn(
          "fixed inset-0 top-20 z-40 transition-transform duration-300 ease-in-out lg:hidden",
          "bg-footer-dark", 
          "overflow-y-auto", // FIX: Added scrollability
          
          isOpen ? "translate-x-0" : "translate-x-full"
        )}
      >
        <nav className="flex flex-col border-t border-gray-700/50">
          
          {/* Nav Links */}
          {navItems.map((item) => (
            <Link
              key={item.name}
 
              href={item.href}
              className="block px-3 py-3 text-base font-medium text-white hover:bg-black/50"
              onClick={toggleMenu} 
 // Close menu on click
            >
              {item.name}
            </Link>
          
))}
        
            {/* Guides Dropdown (Accordion for Mobile) */}
            <div className="border-t border-gray-700/50">
                <button
                    type="button"
                    onClick={() => setIsGuidesOpen(!isGuidesOpen)}
                    className="flex justify-between items-center w-full px-3 py-3 text-base font-medium text-white hover:bg-black/50 focus:outline-none"
                >
                    Guides
                    <ChevronDown className={cn(
                        "w-4 h-4 transition-transform duration-200",
                        isGuidesOpen ? "rotate-180" : "rotate-0"
                    )} />
                </button>
                {/* Accordion Content */}
                <div
                    className={cn(
                        "overflow-hidden transition-all duration-300",
                        isGuidesOpen ? "max-h-screen opacity-100" : "max-h-0 opacity-0"
                    )}
                >
                    <Link
                        href="/blog"
                        className="block px-6 py-2 text-sm font-medium text-secondary hover:bg-black/50 border-b border-white/5"
                        onClick={toggleMenu}
                    >
                        View All Guides ‚Üí
                    </Link>

                    {pillars.map((pillar) => (
                        <div key={pillar.slug} className="px-6 py-3 border-b border-white/10">
                            <Link
                                href={`/blog/${pillar.slug}`}
                                className="text-white font-semibold"
                                onClick={toggleMenu}
                            >
                                {pillar.title}
                            </Link>
                            <p className="mt-1 text-sm text-white/70">{pillar.summary}</p>
                            <div className="mt-2 flex flex-wrap gap-2 text-xs text-white/60">
                                {pillar.clusters.slice(0, 3).map((cluster) => (
                                    <Link
                                        key={cluster.slug}
                                        // *** FIX APPLIED: Provides a fallback string if metadata.path is undefined ***
                                        href={cluster.metadata.path || `/blog/${pillar.slug}/${cluster.slug}`}
                                        className="px-2 py-1 rounded-full bg-white/10"
                                        onClick={toggleMenu}
                                    >
                                        {cluster.title}
                                    </Link>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            </div>
          
          {/* Mobile CTAs (Bottom of Menu) */}
          <div className="pt-6 space-y-3">
            {/* Call Lawrence */}
            <Link 
              href="tel:0826277082" 
              className="block px-3 py-3 text-base font-medium 
text-white hover:bg-black/50"
              onClick={toggleMenu}
           
  >
              <Phone className="w-4 h-4 mr-2 inline-block" /> Call Lawrence (082 627 7082)
            </Link>
            
            {/* WhatsApp Link (Using Green Text) - NEW ICON IMPLEMENTATION */}
       
            <Link 
              href="https://wa.me/27826277082" 
              target="_blank" 
              rel="noopener noreferrer" 
    
           className="block px-3 py-3 text-base font-medium text-tertiary hover:bg-black/50"
              onClick={toggleMenu}
            >
  
                {/* Use next/image for optimized performance */}
                <Image 
                    src="/images/WhatsApp.svg.webp" 
                    alt="WhatsApp Icon" 
               
      className="w-4 h-4 mr-2 inline-block"
                    width={16} // Must be defined for Image component
                    height={16} // Must be defined for Image component
                />
             WhatsApp Us
            </Link>
          </div>

        </nav>
      </div>
    </>
  );
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\ui\button.tsx--------------------------------------------------------------------------------```// src/components/ui/button.tsx
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        // FIX: Change h-9 w-9 (36px) to h-12 w-12 (48px) to fix the touch target audit (WCAG 2.5.5)
        icon: "h-12 w-12",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\components\ui\card.tsx--------------------------------------------------------------------------------```import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars.json--------------------------------------------------------------------------------```{
  "pillars": [
    {
      "slug": "waterproofing",
      "title": "Waterproofing & Damp Proofing Guides",
      "subtitle": "Flat roofs, balconies, and moisture diagnostics.",
      "summary": "Technical playbooks for liquid-applied vs. torch-on membranes, chemical damp proofing, and low-disruption balcony repairs.",
      "icon": "Layers",
      "heroCta": {
        "label": "Consult a Waterproofing Expert",
        "href": "/contact"
      },
      "metadata": {
        "title": "Waterproofing & Damp Proofing Guides | Flat Roof, Balcony, and Basement Solutions",
        "description": "Expert guides on selecting liquid-applied vs. torch-on membranes, preventing rising damp, and troubleshooting water ingress in balconies and basements.",
        "path": "/blog/waterproofing"
      },
      "clusters": [
        {
          "slug": "liquid-vs-torch-on",
          "title": "Liquid Applied vs. Torch-On: Which System is Superior?",
          "description": "Durability, installation, and warranty differences between polyurethane membranes and traditional torch-on systems.",
          "icon": "Droplet",
          "metadata": {
            "title": "Technical Comparison: Liquid Applied vs. Torch-On Waterproofing Membranes",
            "description": "An expert technical guide comparing the durability, installation process, and long-term cost-effectiveness of liquid applied polyurethane membranes against traditional torch-on felt systems for flat roofs and balconies.",
            "path": "/blog/waterproofing/liquid-vs-torch-on"
          },
          "relatedSlugs": ["rising-damp-guide", "leaking-balcony-fixes"]
        },
        {
          "slug": "leaking-balcony-fixes",
          "title": "Low-Disruption Balcony Leak Repair",
          "description": "Diagnose and remediates under-tile leaks using injection and re-grouting systems.",
          "icon": "Shield",
          "metadata": {
            "title": "How to Fix a Leaking Balcony Without Removing Tiles (Low-Disruption Repair)",
            "description": "A practical guide on diagnosing and repairing leaking under-tile balconies using low-disruption injection and re-grouting systems.",
            "path": "/blog/waterproofing/leaking-balcony-fixes"
          },
          "relatedSlugs": ["liquid-vs-torch-on"]
        },
        {
          "slug": "rising-damp-guide",
          "title": "Chemical DPC Injection Guide",
          "description": "Diagnosing rising damp vs. condensation and executing the chemical DPC + plaster remediation process.",
          "icon": "Layers",
          "metadata": {
            "title": "The Permanent Fix for Rising Damp: Chemical DPC Injection Guide",
            "description": "A comprehensive guide on diagnosing rising damp versus condensation, detailing the chemical DPC method and plaster remediation.",
            "path": "/blog/waterproofing/rising-damp-guide"
          },
          "relatedSlugs": ["liquid-vs-torch-on"]
        }
      ]
    },
    {
      "slug": "industrial",
      "title": "Industrial Painting & Maintenance Guides",
      "subtitle": "Corrosion control, floor systems, and plant liability.",
      "summary": "Expert industrial guides on corrosion control, abrasive blasting prep, hygienic flooring, and OHS compliance for factories and plant assets.",
      "icon": "Factory",
      "heroCta": {
        "label": "Request a technical consultation",
        "href": "/contact"
      },
      "metadata": {
        "title": "Industrial Painting & Maintenance Blog | Corrosion Control & Plant Asset Guides",
        "description": "Expert industrial guides on corrosion control, abrasive blasting preparation, epoxy flooring systems, and protective coatings for factories and plant assets.",
        "path": "/blog/industrial"
      },
      "clusters": [
        {
          "slug": "zinc-primer-corrosion-control",
          "title": "The Science of Stopping Rust",
          "description": "Technical comparison of sacrificial vs. barrier protection for structural steel.",
          "icon": "Wrench",
          "metadata": {
            "title": "The Science of Stopping Rust: Choosing the Right Zinc Primer",
            "description": "A technical guide to sacrificial and barrier protection systems for structural steel and exposed plant assets.",
            "path": "/blog/industrial/zinc-primer-corrosion-control"
          },
          "relatedSlugs": ["fast-curing-floors", "ohs-access-liability"]
        },
        {
          "slug": "fast-curing-floors",
          "title": "Fast-Curing Floors for Food Production",
          "description": "How polyurethane screeds minimize downtime and ensure HACCP compliance.",
          "icon": "Factory",
          "metadata": {
            "title": "Minimizing Downtime: Fast-Curing Floors for Food Production",
            "description": "How fast-curing polyurethane screeds minimize disruption and ensure HACCP compliance in processing plants.",
            "path": "/blog/industrial/fast-curing-floors"
          },
          "relatedSlugs": ["zinc-primer-corrosion-control"]
        },
        {
          "slug": "ohs-access-liability",
          "title": "OHS Compliance for High Access",
          "description": "Compliance checklists for rope access and elevated work on industrial sites.",
          "icon": "Shield",
          "metadata": {
            "title": "OHS Compliance: Managing High-Access Liability on Industrial Sites",
            "description": "A checklist for facility managers to ensure contractors meet all OHS requirements for work performed at height.",
            "path": "/blog/industrial/ohs-access-liability"
          },
          "relatedSlugs": ["zinc-primer-corrosion-control"]
        }
      ]
    },
    {
      "slug": "structural-remediation",
      "title": "Structural Remediation Guides",
      "subtitle": "Concrete spalling, crack injection, and QA workflows.",
      "summary": "Engineering-led playbooks covering defect diagnostics, steel passivation, polymer-modified mortars, and protective coatings.",
      "icon": "ShieldCheck",
      "heroCta": {
        "label": "Book a remediation assessment",
        "href": "/structural-repairs"
      },
      "metadata": {
        "title": "Technical Guide: How to Permanently Repair Concrete Spalling & Cancer",
        "description": "An expert guide to structural remediation, detailing concrete spalling repair, rebar passivation, crack injection, and protective coatings.",
        "path": "/blog/structural-remediation"
      },
      "clusters": [
        {
          "slug": "concrete-spalling-repair",
          "title": "Concrete Spalling Repair Workflow",
          "description": "Four-phase remediation covering defect breakout, rebar treatment, structural mortars, and breathable coatings.",
          "icon": "Wrench",
          "metadata": {
            "title": "Concrete Spalling Repair: Permanent, Engineering-Led Workflow",
            "description": "Step-by-step remediation process that prevents recurring failure by addressing rebar corrosion and protective top coats.",
            "path": "/blog/structural-remediation/concrete-spalling-repair"
          }
        },
        {
          "slug": "peeling-paint-repair",
          "title": "Why is My Paint Peeling? Complete Diagnostic Guide",
          "description": "Diagnose and fix peeling paint by identifying root causes: moisture intrusion, poor preparation, or adhesion failure.",
          "icon": "Wrench",
          "metadata": {
            "title": "Why is My Paint Peeling? The Complete Diagnostic & Repair Guide",
            "description": "Expert guide to diagnosing and permanently fixing peeling paint. Learn to identify moisture intrusion, poor surface preparation, and adhesion failures before repainting.",
            "path": "/blog/structural-remediation/peeling-paint-repair"
          }
        }
      ]
    }
  ]
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\industrial\index.ts--------------------------------------------------------------------------------```export { IndustrialPillarPage } from "./pillar";
export { ZincPrimerCorrosionControlArticle } from "./clusters/zinc-primer-corrosion-control";
export { FastCuringFloorsArticle } from "./clusters/fast-curing-floors";
export { OhsAccessLiabilityArticle } from "./clusters/ohs-access-liability";

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\industrial\pillar.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Factory, Shield, Wrench } from "lucide-react";

const FEATURED = [
  {
    title: "The Science of Stopping Rust: Choosing the Right Zinc Primer",
    description:
      "A technical guide to sacrificial and barrier protection systems for structural steel and exposed plant assets.",
    icon: Wrench,
    href: "/blog/industrial/zinc-primer-corrosion-control",
  },
  {
    title: "Minimizing Downtime: Fast-Curing Floors for Food Production",
    description:
      "How fast-curing polyurethane screeds minimize disruption and ensure HACCP compliance in processing plants.",
    icon: Factory,
    href: "/blog/industrial/fast-curing-floors",
  },
  {
    title: "OHS Compliance: Managing High-Access Liability on Industrial Sites",
    description:
      "A checklist for facility managers to ensure contractors meet all OHS requirements for work performed at height.",
    icon: Shield,
    href: "/blog/industrial/ohs-access-liability",
  },
];

export function IndustrialPillarPage() {
  return (
    <div className="bg-primary pt-24 text-white min-h-screen">
      <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
        <div className="max-w-7xl mx-auto">
          <Factory className="w-12 h-12 text-tertiary mb-4" />
          <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
            Industrial Asset Protection Insights.
          </h1>
          <p className="text-2xl font-light mt-6 max-w-4xl text-gray-400">
            Technical articles dedicated to <strong>corrosion control, high-performance coatings</strong>,
            floor systems, and structural preservation for manufacturing assets.
          </p>

          <Button
            asChild
            className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
          >
            <Link href="/contact">Request a Technical Consultation &rarr;</Link>
          </Button>
        </div>
      </section>

      <section className="py-24 px-4 bg-primary">
        <div className="max-w-7xl mx-auto">
          <header className="mb-16">
            <h2 className="text-4xl font-extrabold uppercase mb-3">
              Featured Technical Guides
            </h2>
            <p className="text-lg text-gray-400 font-light">
              Deep-dive analysis on the highest-risk areas of industrial asset maintenance.
            </p>
          </header>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {FEATURED.map((article) => (
              <Link
                key={article.href}
                href={article.href}
                className="p-8 bg-gray-900 rounded-xl shadow-xl border-t-4 border-tertiary transition-all duration-300 transform hover:scale-[1.03] hover:shadow-secondary/50 group"
              >
                <article.icon className="w-8 h-8 text-secondary mb-4 group-hover:text-tertiary" />
                <h3 className="text-xl font-bold uppercase mb-2 text-white leading-snug">
                  {article.title}
                </h3>
                <p className="text-gray-400 text-sm">{article.description}</p>
                <span className="text-tertiary font-bold mt-4 block group-hover:text-white transition-colors">
                  Read Article &rarr;
                </span>
              </Link>
            ))}
          </div>
        </div>
      </section>

      <CtaFinalStrip />
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\industrial\clusters\fast-curing-floors.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Factory, TimerReset } from "lucide-react";

export function FastCuringFloorsArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-200 pb-6">
          <div className="flex items-center gap-3 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/industrial"
              className="hover:text-secondary font-semibold uppercase"
            >
              <Factory className="w-4 h-4 inline-block mr-1" />
              Industrial Guides
            </Link>
            <span>|</span>
            <span className="flex items-center gap-1">
              <TimerReset className="w-4 h-4" /> Fast-Curing Systems
            </span>
          </div>
          <h1 className="text-4xl md:text-5xl font-extrabold text-primary leading-tight uppercase">
            Minimizing Downtime: Fast-Curing Floors for Food Production
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Why Polyurethane Screeds Beat Epoxy in Hygienic Zones
            </h2>
            <p>
              Food processors cannot afford multi-day shutdowns. Polyurethane cement screeds deliver
              chemical resistance, steam-clean tolerance, and walk-on readiness in as little as 6 hours.
              That combination makes them ideal for cook lines, blast freezers, and wash bays where HACCP compliance
              is non-negotiable.
            </p>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Program for Zero Production Interruptions
            </h2>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li>Phase work by aisle or zone and use mobile hoarding.</li>
              <li>Specify slip-resistant top coats (R11+) without trapping debris.</li>
              <li>Coordinate QA sign-offs with swab testing before reopening the line.</li>
            </ul>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Implementation Snapshot
            </h3>
            <p>
              A recent retrofit swapped 1,200 m¬≤ of delaminated epoxy with 9mm PU screed, executed over
              a single weekend shift. Production resumed Monday morning with documented temperature logs
              and cure certificates for the client&apos;s auditors.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/coatings/hygienic-food-grade-flooring">
                Plan my floor replacement &rarr;
              </Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\industrial\clusters\ohs-access-liability.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Shield, Factory } from "lucide-react";

export function OhsAccessLiabilityArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-200 pb-6">
          <div className="flex items-center gap-3 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/industrial"
              className="hover:text-secondary font-semibold uppercase"
            >
              <Factory className="w-4 h-4 inline-block mr-1" />
              Industrial Guides
            </Link>
            <span>|</span>
            <span className="flex items-center gap-1">
              <Shield className="w-4 h-4" /> OHS & Access
            </span>
          </div>
          <h1 className="text-4xl md:text-5xl font-extrabold text-primary leading-tight uppercase">
            OHS Compliance: Managing High-Access Liability on Industrial Sites
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Liability Chain
            </h2>
            <p>
              Even when work-at-height is outsourced, the facility owner retains residual liability.
              South African OHS Act requirements mandate that clients verify training, rescue plans,
              and equipment inspection records for every contractor. Failure to do so can invalidate
              insurance coverage after an incident.
            </p>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Mandatory Documentation Checklist
            </h2>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li>Letter of Good Standing and rope-access certifications.</li>
              <li>Method statements referencing SANS 50795.</li>
              <li>Daily toolbox talks logged and signed by all personnel.</li>
              <li>Emergency rescue drills recorded before work commences.</li>
            </ul>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Building an Audit Trail
            </h3>
            <p>
              We supply a cloud-based compliance pack so facility managers can prove due diligence
              within minutes. Each job card logs anchor inspections, PPE serial numbers, and altitude
              permits, making third-party audits painless.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/access-solutions">Review our access protocols &rarr;</Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\industrial\clusters\zinc-primer-corrosion-control.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Factory, Shield } from "lucide-react";

export function ZincPrimerCorrosionControlArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-200 pb-6">
          <div className="flex items-center gap-3 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/industrial"
              className="hover:text-secondary font-semibold uppercase"
            >
              <Factory className="w-4 h-4 inline-block mr-1" />
              Industrial Guides
            </Link>
            <span>|</span>
            <span className="flex items-center gap-1">
              <Shield className="w-4 h-4" /> Corrosion Control
            </span>
          </div>
          <h1 className="text-4xl md:text-5xl font-extrabold text-primary leading-tight uppercase">
            The Science of Stopping Rust: Choosing the Right Zinc Primer
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Sacrificial vs. Barrier Protection
            </h2>
            <p>
              A zinc-rich primer is more than a coating‚Äîit is an engineered, sacrificial system.
              When the coating contains &gt;80% metallic zinc by weight, it becomes conductive and
              sacrifices itself before the structural steel corrodes. Barrier primers, by contrast,
              rely purely on film build to keep oxygen and moisture away from the substrate.
            </p>
            <p>
              Asset owners should evaluate the service environment: immersion, splash zones,
              or atmospheric C5 locations almost always warrant a zinc-rich epoxy or inorganic zinc
              primer beneath the build-coat system.
            </p>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Specification Checklist
            </h3>
            <ul className="list-disc list-inside space-y-2 text-base text-white">
              <li>Confirm the zinc loading (minimum 80% by weight in dry film).</li>
              <li>Verify compatibility between the zinc primer and intermediate coats.</li>
              <li>Measure surface profile (Sa 2.5 / 50‚Äì75Œºm) before priming.</li>
              <li>Document DFT readings for each layer to satisfy warranty requirements.</li>
            </ul>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/industrial-painting">Request a plant coating audit &rarr;</Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\structural-remediation\index.ts--------------------------------------------------------------------------------```export { StructuralRemediationPillarPage } from "./pillar";
export { ConcreteSpallingRepairArticle } from "./clusters/concrete-spalling-repair";
export { PeelingPaintRepairArticle } from "./clusters/peeling-paint-repair";

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\structural-remediation\pillar.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Layers, ShieldCheck, Wrench } from "lucide-react";

export function StructuralRemediationPillarPage() {
  return (
    <div className="bg-primary pt-24 text-white min-h-screen">
      <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
        <div className="max-w-6xl mx-auto">
          <Layers className="w-12 h-12 text-tertiary mb-4" />
          <p className="text-sm uppercase tracking-[0.3em] text-gray-400">
            Structural Remediation ‚Ä¢ Concrete Restoration
          </p>
          <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-4xl">
            Permanent Repairs for Concrete Spalling &amp; Structural Defects.
          </h1>
          <p className="text-xl mt-6 max-w-3xl text-gray-300">
            Engineering-led playbooks covering defect diagnostics, rebar passivation, polymer-modified mortars,
            and the protective coatings that lock in the repair. Designed for trustees, developers, and consulting engineers.
          </p>

          <Button
            asChild
            className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12 shadow-2xl transform hover:scale-105"
          >
            <Link href="/structural-repairs">Book a remediation assessment &rarr;</Link>
          </Button>
        </div>
      </section>

      <section className="py-20 px-4 bg-primary">
        <div className="max-w-6xl mx-auto grid gap-8 md:grid-cols-2">
          <article className="p-8 bg-gray-900 rounded-2xl border border-white/10">
            <h2 className="text-3xl font-extrabold uppercase mb-4 flex items-center gap-3">
              <ShieldCheck className="w-8 h-8 text-tertiary" /> Engineering Discipline
            </h2>
            <p className="text-gray-300">
              Every guide inside this pillar maps back to a tested inspection &amp; repair workflow:
              hammer testing, chloride profiling, structural mortar selection, and QA documentation that satisfies insurers.
            </p>
          </article>
          <article className="p-8 bg-gray-900 rounded-2xl border border-white/10">
            <h2 className="text-3xl font-extrabold uppercase mb-4 flex items-center gap-3">
              <Wrench className="w-8 h-8 text-tertiary" /> Field-Proven Specs
            </h2>
            <p className="text-gray-300">
              Downloadable checklists and scopes ensure the site crew follows the exact same steps:
              defect breakout, steel prep, passivation, rebuild, and breathable coatings.
            </p>
          </article>
        </div>
      </section>

      <CtaFinalStrip />
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\structural-remediation\clusters\concrete-spalling-repair.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Wrench, BookOpen, Clock, Users, Layers } from "lucide-react";

export function ConcreteSpallingRepairArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-300 pb-6">
          <div className="flex items-center space-x-4 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/structural-remediation"
              className="hover:text-secondary font-semibold uppercase"
            >
              <BookOpen className="w-4 h-4 mr-1 inline-block" /> Structural Remediation
            </Link>
            <span>|</span>
            <span className="flex items-center space-x-1">
              <Clock className="w-4 h-4" /> 10 Min Read
            </span>
            <span className="flex items-center space-x-1">
              <Users className="w-4 h-4" /> Maverick Technical Team
            </span>
          </div>

          <h1 className="text-5xl font-extrabold text-primary leading-tight uppercase mb-4">
            The Core Problem: Why Painting Over Concrete Spalling Fails.
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Failure of Cosmetic Patches
            </h2>
            <p>
              Concrete spalling (often called &quot;concrete cancer&quot;) is not a surface flaw; it&apos;s a symptom of
              internal structural degradation. It occurs when moisture and carbon dioxide penetrate the concrete,
              causing the reinforcing steel (rebar) to rust and expand, exerting immense pressure that pops the
              concrete off the surface.
            </p>
            <p>
              Painting over this defect or using non-structural plaster patches only provides a temporary, cosmetic fix.
              The underlying corrosion process continues, and the patched area will fail again, often within 12 to 18 months,
              leading to costly recurring repairs.
            </p>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Four-Phase Structural Solution
            </h2>
            <p>
              A permanent repair must follow a strict engineering protocol that addresses the steel corrosion and restores
              the concrete&apos;s alkalinity. Our four-phase process includes:
            </p>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li className="flex items-center space-x-2">
                <Wrench className="w-5 h-5 text-secondary" /> Defect removal and rebar cleaning to a bright metal finish.
              </li>
              <li className="flex items-center space-x-2">
                <Layers className="w-5 h-5 text-secondary" /> Passivation of the rebar (applying an anti-corrosive coating) to halt the rusting process.
              </li>
              <li className="flex items-center space-x-2">
                <Wrench className="w-5 h-5 text-secondary" /> Application of polymer-modified structural mortar to replace the spalled concrete.
              </li>
              <li className="flex items-center space-x-2">
                <Layers className="w-5 h-5 text-secondary" /> Final application of a breathable, elastomeric coating to prevent future moisture ingress.
              </li>
            </ul>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Key Takeaway for Trustees &amp; Developers
            </h3>
            <p className="text-lg">
              Always demand an assessment that includes moisture readings and hammer testing. A true structural solution is an{" "}
              <strong>investment</strong> that reduces long-term liability, whereas a patch is merely an <strong>expense</strong>.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/structural-repairs">
                View Our Structural Repair Service Page &rarr;
              </Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\waterproofing\index.ts--------------------------------------------------------------------------------```export { WaterproofingPillarPage } from "./pillar";
export { LiquidVsTorchOnArticle } from "./clusters/liquid-vs-torch-on";
export { LeakingBalconyFixesArticle } from "./clusters/leaking-balcony-fixes";
export { RisingDampGuideArticle } from "./clusters/rising-damp-guide";

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\waterproofing\pillar.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Shield, Droplet, Layers } from "lucide-react";

const FeaturedArticles = [
  {
    title:
      "Liquid Applied Membranes vs. Torch-On: Which System is Right for Your Roof?",
    description:
      "A technical comparison of durability, installation complexity, and warranty implications for flat concrete roofs.",
    icon: Droplet,
    href: "/blog/waterproofing/liquid-vs-torch-on",
  },
  {
    title: "The Ultimate Guide to Eliminating Rising Damp Permanently",
    description:
      "Detailing the chemical DPC injection process and the necessary subsequent plastering and finishing work.",
    icon: Layers,
    href: "/blog/waterproofing/rising-damp-guide",
  },
  {
    title: "Why Your Under-Tile Balcony Keeps Leaking (and how to fix it)",
    description:
      "Diagnosing failed joint sealants and applying low-disruption remediation methods to save your tiles.",
    icon: Shield,
    href: "/blog/waterproofing/leaking-balcony-fixes",
  },
];

export function WaterproofingPillarPage() {
  return (
    <div className="bg-primary pt-24 text-white min-h-screen">
      <section className="relative py-24 md:py-32 px-4 bg-gray-900 border-b-4 border-secondary">
        <div className="max-w-7xl mx-auto">
          <Layers className="w-12 h-12 text-tertiary mb-4" />
          <h1 className="text-5xl md:text-7xl font-extrabold leading-tight uppercase max-w-5xl">
            Waterproofing & Structural Protection Guides.
          </h1>
          <p className="2xl font-light mt-6 max-w-4xl text-gray-400">
            In-depth articles from our specialists on <strong>solving structural
            water ingress</strong>, chemical damp proofing, and selecting
            certified membrane systems.
          </p>

          <Button
            asChild
            className="mt-10 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-14 shadow-2xl transform hover:scale-105"
          >
            <Link href="/contact">Consult a Waterproofing Expert &rarr;</Link>
          </Button>
        </div>
      </section>

      <section className="py-24 px-4 bg-primary">
        <div className="max-w-7xl mx-auto">
          <header className="mb-16">
            <h2 className="text-4xl font-extrabold uppercase mb-3">
              Essential Guides to Moisture Control
            </h2>
            <p className="text-lg text-gray-400 font-light">
              Protect your investment by understanding the critical technical
              differences between systems.
            </p>
          </header>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {FeaturedArticles.map((article) => (
              <Link
                key={article.href}
                href={article.href}
                className="p-8 bg-gray-900 rounded-xl shadow-xl border-t-4 border-tertiary transition-all duration-300 transform hover:scale-[1.03] hover:shadow-secondary/50 group"
              >
                <article.icon className="w-8 h-8 text-secondary mb-4 group-hover:text-tertiary" />
                <h3 className="text-xl font-bold uppercase mb-2 text-white leading-snug">
                  {article.title}
                </h3>
                <p className="text-gray-400 text-sm">{article.description}</p>
                <span className="text-tertiary font-bold mt-4 block group-hover:text-white transition-colors">
                  Read Article &rarr;
                </span>
              </Link>
            ))}
          </div>
        </div>
      </section>

      <CtaFinalStrip />
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\waterproofing\clusters\leaking-balcony-fixes.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Shield, BookOpen, Droplet, Wrench } from "lucide-react";

export function LeakingBalconyFixesArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-300 pb-6">
          <div className="flex items-center space-x-4 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/waterproofing"
              className="hover:text-secondary font-semibold uppercase"
            >
              <BookOpen className="w-4 h-4 mr-1 inline-block" /> Waterproofing
              Guides
            </Link>
            <span>|</span>
            <span className="flex items-center space-x-1">
              <Droplet className="w-4 h-4" /> Balcony Remediation
            </span>
          </div>

          <h1 className="text-5xl font-extrabold text-primary leading-tight uppercase mb-4">
            The Low-Disruption Fix: Leaking Balconies Without Tile Removal.
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Balcony Leak Problem: Usually the Grout, Not the Slab
            </h2>
            <p>
              In many cases, water ingress in a tiled balcony is not caused by a
              failed slab, but by a <strong>failed or cracked grout and joint
              sealant system</strong>. Water penetrates these joints, saturates
              the screed beneath the tiles, and then migrates laterally until it
              reaches the substrate below or the room below. The key is to stop
              the water at the surface without the destructive, expensive process
              of removing all the tiles.
            </p>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Our Low-Disruption Remediation Process
            </h2>
            <p>
              We specialize in targeted, low-disruption systems that save time,
              money, and most importantly, the original aesthetics of the balcony.
            </p>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li className="flex items-center space-x-2">
                <Wrench className="w-5 h-5 text-secondary" />{" "}
                <strong>Grout Removal:</strong> Carefully remove old, cracked, or
                compromised grout lines.
              </li>
              <li className="flex items-center space-x-2">
                <Droplet className="w-5 h-5 text-secondary" />{" "}
                <strong>Injection/Sealing:</strong> Injecting specialized flexible
                epoxy sealants into critical joints and re-grouting with
                high-performance, water-repellent grout.
              </li>
              <li className="flex items-center space-x-2">
                <Shield className="w-5 h-5 text-secondary" />{" "}
                <strong>Final Finish:</strong> Applying an invisible, penetrating
                sealer over the entire tile surface to reduce porosity.
              </li>
            </ul>
            <p>
              This method minimizes disruption to residents and is significantly
              faster and more cost-effective than full demolition and
              re-waterproofing.
            </p>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              A Note for Body Corporates
            </h3>
            <p className="text-lg">
              When dealing with multiple balconies, the low-disruption fix is
              essential to manage budgets and resident inconvenience. Always
              prioritize a solution that <strong>guarantees against water
              migration</strong> into the screed layer.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/waterproofing-services">
                View All Our Guaranteed Waterproofing Systems &rarr;
              </Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\waterproofing\clusters\liquid-vs-torch-on.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Droplet, BookOpen, Layers, CheckSquare } from "lucide-react";

export function LiquidVsTorchOnArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-300 pb-6">
          <div className="flex items-center space-x-4 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/waterproofing"
              className="hover:text-secondary font-semibold uppercase"
            >
              <BookOpen className="w-4 h-4 mr-1 inline-block" /> Waterproofing
              Guides
            </Link>
            <span>|</span>
            <span className="flex items-center space-x-1">
              <Layers className="w-4 h-4" /> Technical Specification
            </span>
          </div>

          <h1 className="text-5xl font-extrabold text-primary leading-tight uppercase mb-4">
            Liquid Applied vs. Torch-On: Which Waterproofing System is Superior?
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Seamless Advantage of Liquid Membranes
            </h2>
            <p>
              <strong>Liquid Applied Membranes (LAMs)</strong>, particularly
              polyurethane systems, offer a fundamentally superior seal for
              complex flat roofs and structures. Unlike felt-based systems, LAMs
              cure to form a single, seamless, monolithic barrier. This
              eliminates the weakest point of any traditional system: the joins
              and overlaps.
            </p>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li className="flex items-center space-x-2">
                <Droplet className="w-5 h-5 text-secondary" /> Forms a single,
                monolithic, and joint-free barrier.
              </li>
              <li className="flex items-center space-x-2">
                <CheckSquare className="w-5 h-5 text-secondary" /> Adheres fully
                to substrates, reducing risk of water migration beneath the
                membrane.
              </li>
              <li className="flex items-center space-x-2">
                <Droplet className="w-5 h-5 text-secondary" /> Ideal for complex
                details like parapet walls, vents, and flashings where torch-on
                often fails.
              </li>
            </ul>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Trade-offs of Torch-On Systems
            </h2>
            <p>
              <strong>Torch-On Systems</strong> (bituminous felt) are robust and
              widely used, but their reliance on heat application introduces site
              risks and inherent limitations. Every overlap is a potential point
              of failure. While they offer excellent resistance to foot traffic
              and puncture, the system&apos;s performance is entirely dependent
              on the skill and precision of the applicator fusing the seams.
            </p>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Maverick&apos;s Specification Recommendation
            </h3>
            <p className="text-lg">
              For critical, high-value assets (like multi-story commercial roofs
              and balconies), we generally specify{" "}
              <strong>high-quality polyurethane LAMs</strong> due to their
              seamless, long-term integrity. For large, open, and accessible
              industrial roofs, an expertly applied torch-on system can still be
              cost-effective. The choice is always substrate and project-specific.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/waterproofing-services">
                Request a Waterproofing Specification Audit &rarr;
              </Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\content\pillars\waterproofing\clusters\rising-damp-guide.tsx--------------------------------------------------------------------------------```import Link from "next/link";
import { Button } from "@/components/ui/button";
import { CtaFinalStrip } from "@/components/cta-final-strip";
import { Layers, BookOpen, CheckSquare, Droplet, Wrench } from "lucide-react";

export function RisingDampGuideArticle() {
  return (
    <div className="bg-gray-50 pt-32 pb-24 text-primary min-h-screen">
      <div className="max-w-4xl mx-auto px-4">
        <header className="mb-12 border-b border-gray-300 pb-6">
          <div className="flex items-center space-x-4 text-sm text-gray-500 mb-2">
            <Link
              href="/blog/waterproofing"
              className="hover:text-secondary font-semibold uppercase"
            >
              <BookOpen className="w-4 h-4 mr-1 inline-block" /> Waterproofing
              Guides
            </Link>
            <span>|</span>
            <span className="flex items-center space-x-1">
              <Droplet className="w-4 h-4" /> Moisture Control
            </span>
          </div>

          <h1 className="text-5xl font-extrabold text-primary leading-tight uppercase mb-4">
            The Permanent Fix for Rising Damp: Chemical DPC Injection.
          </h1>
        </header>

        <div className="space-y-8 text-lg text-gray-700 leading-relaxed">
          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              Rising Damp vs. Condensation: The Correct Diagnosis
            </h2>
            <p>
              The first mistake is treating all internal dampness as rising damp.
              Rising damp draws moisture up from the ground via capillary action,
              typically affecting only the lowest meter of the wall. Condensation
              is an airborne moisture problem, usually appearing in high-humidity
              areas like bathrooms. We use <strong>moisture profiling
              equipment</strong> to definitively diagnose the source before
              recommending treatment.
            </p>
          </section>

          <section>
            <h2 className="text-3xl font-bold text-primary mb-4">
              The Chemical DPC Injection Process
            </h2>
            <p>
              Since many older properties have failed or absent damp-proof courses,
              the modern solution is a <strong>Chemical DPC</strong>. This involves
              drilling a series of holes into the lowest mortar course, injecting a
              water-repellent (silane or siloxane-based) cream under pressure, and
              allowing it to cure.
            </p>
            <ul className="list-disc list-inside space-y-2 ml-6 font-semibold">
              <li className="flex items-center space-x-2">
                <Wrench className="w-5 h-5 text-secondary" />{" "}
                <strong>Injection:</strong> Forming a new, permanent, horizontal
                barrier within the wall fabric.
              </li>
              <li className="flex items-center space-x-2">
                <Layers className="w-5 h-5 text-secondary" />{" "}
                <strong>Plaster Remediation:</strong> All contaminated plaster must
                be removed and replaced with salt-retardant render to prevent salt
                migration.
              </li>
              <li className="flex items-center space-x-2">
                <CheckSquare className="w-5 h-5 text-secondary" />{" "}
                <strong>Finishing:</strong> Applying a final coat of breathable,
                decorative paint.
              </li>
            </ul>
          </section>

          <section className="bg-primary text-white p-6 rounded-xl shadow-xl">
            <h3 className="text-2xl font-bold text-tertiary mb-3">
              Why DIY Damp Proofing Fails
            </h3>
            <p className="text-lg">
              The failure of DIY or non-specialized damp proofing usually occurs in
              the <strong>plaster remediation</strong> phase. If salt-contaminated
              plaster is not fully removed, the salts will continue to draw moisture
              from the air, causing the damp to reappear. Always use a professional
              who guarantees the entire process.
            </p>
            <Button
              asChild
              className="mt-4 bg-secondary hover:bg-[#4AD5E2] text-primary font-bold text-lg h-12"
            >
              <Link href="/damp-proofing-services">
                View Our Full Damp Proofing Solutions &rarr;
              </Link>
            </Button>
          </section>
        </div>
      </div>

      <div className="mt-20">
        <CtaFinalStrip />
      </div>
    </div>
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\data\locations.ts--------------------------------------------------------------------------------```export type ServiceLocation = {
  slug: string;
  name: string;
  metaTitle: string;
  metaDescription: string;
  landmarks: string[];
};

export const serviceLocations: ServiceLocation[] = [
  {
    slug: "midrand",
    name: "Midrand",
    metaTitle: "Commercial Painting & Waterproofing Contractors Midrand",
    metaDescription: "Specialized structural repairs and industrial painting in Midrand. Serving Waterfall City, Kyalami, and surrounding business parks. Independent QA guaranteed.",
    landmarks: ["Waterfall City", "Mall of Africa", "Kyalami Business Park"],
  },
  {
    slug: "sandton",
    name: "Sandton",
    metaTitle: "Sandton Body Corporate Painting & Maintenance",
    metaDescription: "Premium painting contractors for Sandton residential complexes and office blocks. We maintain assets in Morningside, Bryanston, and the CBD.",
    landmarks: ["Sandton City", "The Leonardo", "Alice Lane Precinct"],
  },
  {
    slug: "centurion",
    name: "Centurion",
    metaTitle: "Centurion Industrial Coatings & Damp Proofing",
    metaDescription: "Approved applicators for industrial parks in Centurion. We fix rising damp and corrosion in Highveld, Irene, and Rooihuiskraal.",
    landmarks: ["Centurion Mall", "Highveld Techno Park", "Irene Link"],
  },
  {
    slug: "pretoria-east",
    name: "Pretoria East",
    metaTitle: "Pretoria East Waterproofing & Painting Specialists",
    metaDescription: "Solving water ingress and spalling issues in Pretoria East. Expert contractors for Faerie Glen, Menlyn, and luxury estates.",
    landmarks: ["Menlyn Maine", "Woodhill Estate", "The Grove"],
  },
  {
    slug: "benoni",
    name: "Benoni",
    metaTitle: "Benoni Painting Contractors | Structural Repairs & Waterproofing",
    metaDescription: "Expert painting and waterproofing services in Benoni. Serving Farrarmere, Rynfield, Lakefield, Northmead, and Eastlands. Owner-supervised quality guaranteed.",
    landmarks: ["Farrarmere", "Rynfield", "Lakefield", "Northmead", "Eastlands"],
  },
  {
    slug: "kempton-park",
    name: "Kempton Park",
    metaTitle: "Kempton Park Industrial Painting & Coating Specialists",
    metaDescription: "Professional painting contractors in Kempton Park. We serve Allen Grove, Aston Manor, Birch Acres, Glen Marais, and surrounding industrial areas.",
    landmarks: ["Allen Grove", "Aston Manor", "Birch Acres", "Glen Marais"],
  },
  {
    slug: "alberton",
    name: "Alberton",
    metaTitle: "Alberton Painting & Waterproofing | Estate Specialists",
    metaDescription: "Premium painting contractors for Alberton estates and commercial properties. Expert services in Meyersdal, Brackenhurst, Randhart, and surrounding areas.",
    landmarks: ["Meyersdal Eco Estate", "Brackenhurst", "Randhart"],
  },
  {
    slug: "johannesburg-north",
    name: "Johannesburg North",
    metaTitle: "Johannesburg North Painting Contractors | Melville & Rosebank",
    metaDescription: "Specialized painting and waterproofing services in Johannesburg North. Serving Melville, Rosebank, Parktown, and surrounding affluent suburbs.",
    landmarks: ["Melville", "Rosebank", "Parktown", "Parkhurst"],
  },
  {
    slug: "serengeti-estate",
    name: "Serengeti Golf & Wildlife Estate",
    metaTitle: "Serengeti Estate Painters | HOA Compliant Painting Services",
    metaDescription: "Fully compliant painting contractors for Serengeti Golf & Wildlife Estate. We understand HOA guidelines and use approved color palettes and finishes.",
    landmarks: ["Serengeti Golf Course", "Wildlife Reserve"],
  },
  {
    slug: "ebotse-estate",
    name: "Ebotse Golf Estate",
    metaTitle: "Ebotse Estate Painting Contractors | Luxury Estate Specialists",
    metaDescription: "Premium painting and waterproofing services for Ebotse Golf Estate. Expert contractors familiar with estate security protocols and architectural guidelines.",
    landmarks: ["Ebotse Golf Course", "Luxury Estates"],
  },
  {
    slug: "meyersdal-estate",
    name: "Meyersdal Eco Estate",
    metaTitle: "Meyersdal Estate Painters | Eco-Friendly Coating Solutions",
    metaDescription: "Specialized painting contractors for Meyersdal Eco Estate. We use low-VOC paints and eco-friendly coatings compliant with estate environmental standards.",
    landmarks: ["Meyersdal Eco Estate", "Nature Reserve"],
  },
];

export function getLocation(slug: string) {
  return serviceLocations.find((loc) => loc.slug === slug);
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\data\pillars.ts--------------------------------------------------------------------------------```import pillarsJson from "@/content/pillars.json";
import type { LucideIcon } from "lucide-react";
import { Layers, Droplet, Shield, Factory, ShieldCheck, Wrench } from "lucide-react";

const iconMap: Record<string, LucideIcon> = {
  Layers,
  Droplet,
  Shield,
  Factory,
  ShieldCheck,
  Wrench,
};

export type PillarContent = typeof pillarsJson["pillars"][number];
export type ClusterContent = PillarContent["clusters"][number];

export function getPillarsData() {
  return pillarsJson.pillars.map((pillar) => ({
    ...pillar,
    icon: iconMap[pillar.icon] ?? Layers,
    clusters: pillar.clusters.map((cluster) => ({
      ...cluster,
      icon: iconMap[cluster.icon] ?? Layers,
    })),
  }));
}

export function getPillarContent(slug: string) {
  return getPillarsData().find((pillar) => pillar.slug === slug);
}

export function getClusterContent(pillarSlug: string, clusterSlug: string) {
  const pillar = getPillarContent(pillarSlug);
  if (!pillar) return undefined;
  return pillar.clusters.find((cluster) => cluster.slug === clusterSlug);
}

export function getPillarStaticParams() {
  return getPillarsData().map((pillar) => ({ pillar: pillar.slug }));
}

export function getClusterStaticParams() {
  return getPillarsData().flatMap((pillar) =>
    pillar.clusters.map((cluster) => ({
      pillar: pillar.slug,
      cluster: cluster.slug,
    }))
  );
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\data\projects.ts--------------------------------------------------------------------------------```import type { LucideIcon } from "lucide-react";
import {
  Layers,
  Wrench,
  CheckSquare,
  PersonStanding,
  Droplet,
  Shield,
  Factory,
  Clock,
  Building,
} from "lucide-react";

export type ProjectDetail = {
  icon: LucideIcon;
  text: string;
};

export type ProjectCaseStudy = {
  slug: string;
  name: string;
  location: string;
  scope: string;
  date: string;
  value?: string;
  image: string;
  details: ProjectDetail[];
  lastModified?: string;
};

export const projectCaseStudies: ProjectCaseStudy[] = [
  {
    slug: "munyaka",
    name: "Munyaka Lifestyle Estate",
    location: "Midrand, Gauteng",
    scope:
      "Full exterior repaint, polyurethane waterproofing and structural crack remediation across luxury lifestyle blocks.",
    date: "2023 Q4 ‚Äì 2024 Q2",
    value: "R7.5 Million",
    image: "/images/munyaka-midrand.jpg",
    details: [
      {
        icon: Layers,
        text: "Installed 5,000 m¬≤ of liquid-applied polyurethane membrane on flat roofs and podium decks.",
      },
      {
        icon: Wrench,
        text: "Repaired severe concrete spalling across three residential blocks using engineer-approved mortars.",
      },
      {
        icon: CheckSquare,
        text: "Independent QA issued bi-weekly film thickness and adhesion reports for the developer.",
      },
    ],
    lastModified: "2024-10-02",
  },
  {
    slug: "the-blyde",
    name: "The Blyde Riverwalk Estate",
    location: "Pretoria East, Gauteng",
    scope:
      "High-access facade repainting, balcony remediation and elastomeric coating application for coastal-grade protection.",
    date: "2022 Q3",
    value: "R4.2 Million",
    image: "/images/the-blyde-pretorria.jpg",
    details: [
      {
        icon: PersonStanding,
        text: "Used IRATA rope access to coat difficult-to-reach elevations without scaffolding delays.",
      },
      {
        icon: Droplet,
        text: "Fixed multiple leaking under-tile balconies with low-disruption injection and regouting systems.",
      },
      {
        icon: Shield,
        text: "Applied UV-stable, anti-fungal elastomeric coatings to all high-exposure facades.",
      },
    ],
    lastModified: "2024-05-18",
  },
  {
    slug: "celebration",
    name: "Celebration Retirement Estate",
    location: "North Riding, Gauteng",
    scope:
      "Turn-key repaint with on-site damp remediation, roof restoration and resident-friendly scheduling.",
    date: "2024 Q1",
    image: "/images/celebration-retirement.jpg",
    details: [
      {
        icon: Clock,
        text: "Executed a multi-phase programme to minimise disruption for elderly residents.",
      },
      {
        icon: Droplet,
        text: "Installed new chemical DPC and re-plastered 1,200 m¬≤ of rising damp zones before painting.",
      },
      {
        icon: CheckSquare,
        text: "Delivered photographic QA packs for trustee sign-off at every milestone.",
      },
    ],
    lastModified: "2024-07-09",
  },
  {
    slug: "eastlands",
    name: "Eastlands Mature Lifestyle Estate",
    location: "Benoni, Gauteng",
    scope:
      "Structural repairs, waterproofing, and repainting of common property and high-exposure boundary walls.",
    date: "2023 Q2",
    image: "/images/eastlands-benoni.jpg",
    details: [
      {
        icon: Wrench,
        text: "Injected structural cracks and sealed 350 linear metres of expansion joints.",
      },
      {
        icon: Shield,
        text: "Applied torch-on membranes on clubhouse roofs with 15-year manufacturer guarantees.",
      },
      {
        icon: Layers,
        text: "Completed full facade repaint with breathable elastomeric coatings for long-term durability.",
      },
    ],
    lastModified: "2023-11-21",
  },
  {
    slug: "kikuyu",
    name: "Kikuyu Lifestyle Centre",
    location: "Midrand, Gauteng",
    scope:
      "Industrial-grade corrosion protection and decorative coatings for the flagship lifestyle centre.",
    date: "2022 Q4",
    image: "/images/kikuyu-lifestyle.jpg",
    details: [
      {
        icon: Factory,
        text: "Abrasive blasted structural steel to SA 2.5 profile prior to zinc-rich priming.",
      },
      {
        icon: Layers,
        text: "Installed hygienic epoxy floor systems throughout the food court and back-of-house areas.",
      },
      {
        icon: CheckSquare,
        text: "Issued joint manufacturer + contractor guarantees covering corrosion and hygienic finishes.",
      },
    ],
    lastModified: "2023-02-14",
  },
  {
    slug: "greencreek",
    name: "Green Creek Eco-Estate",
    location: "Pretoria East, Gauteng",
    scope:
      "Eco-focused repaint and waterproofing programme covering residential blocks, guard houses and lifestyle amenities.",
    date: "2023 Q1",
    image: "/images/greencreek-estate.jpg",
    details: [
      {
        icon: Building,
        text: "Coated 18 multi-storey apartment blocks with low-VOC, high-cover masonry systems.",
      },
      {
        icon: Droplet,
        text: "Remediated chronic balcony leaks using liquid-applied membranes and new drainage detail.",
      },
      {
        icon: Shield,
        text: "Rope access teams sealed parapets and coping stones to protect the estate against driving rain.",
      },
    ],
    lastModified: "2023-08-30",
  },
];

export const featuredProjects = projectCaseStudies.map(
  ({ name, location, slug, image }) => ({
    name,
    location,
    slug,
    image,
  })
);

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\auth.ts--------------------------------------------------------------------------------```// src/lib/auth.ts
// ADDED: Module augmentation for NextAuth types
declare module "next-auth" {
    interface Session {
        user: {
            id: string; // Add the 'id' property to the User interface
            name?: string | null;
            email?: string | null;
            image?: string | null;
        };
    }
}

import { getServerSession } from "next-auth";
import { DrizzleAdapter } from "@auth/drizzle-adapter";
import type { NextAuthOptions } from "next-auth";
import GitHubProvider from "next-auth/providers/github";
import { db } from "./db"; // Placeholder for actual database connection

// NOTE: We rely on the developer setting environment variables:
// GITHUB_ID, GITHUB_SECRET, AUTH_SECRET (for NextAuth)
// and DATABASE_URL (for Drizzle/Postgres)

export const authOptions: NextAuthOptions = {
    // Adapter connects Auth.js to the database schema
    adapter: DrizzleAdapter(db), 
    
    // Configure authentication providers
    providers: [
        GitHubProvider({
            clientId: process.env.GITHUB_ID!,
            clientSecret: process.env.GITHUB_SECRET!,
        }),
        // Add more providers here (e.g., Google, Credentials)
    ],

    // Strategy for managing sessions (using JWTs for statelessness is common for Next.js/Vercel)
    session: {
        strategy: "jwt",
    },

    // Secret is required for signing the session cookie
    secret: process.env.AUTH_SECRET,
    
    // Pages configuration (optional, but good practice for protected routes)
    pages: {
        signIn: '/auth/signin', // Custom sign-in page path
        error: '/auth/error', // Error page path
    },

    // Callbacks can be used to customize session and JWT data
    callbacks: {
        async session({ session, token }) {
            // Include user ID in the session object (now safe due to augmentation)
            if (token.sub && session.user) {
                session.user.id = token.sub; 
            }
            return session;
        },
        async jwt({ token, user }) {
             // Pass user ID from sign-in to the token
            if (user) {
                token.sub = user.id;
            }
            return token;
        }
    },
};

// Helper function to get the session on the server (used in API handlers and Server Components)
export const getAuthSession = () => getServerSession(authOptions);```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\cache-tags.ts--------------------------------------------------------------------------------```export const GLOBAL_SITEMAP_TAG = "sitemap:global";

export const pillarTag = (slug: string) => `pillar:${slug}`;

export const clusterTag = (pillarSlug: string, clusterSlug: string) =>
  `pillar:${pillarSlug}:cluster:${clusterSlug}`;

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\db.ts--------------------------------------------------------------------------------```// src/lib/db.ts
// FIX: Using the direct package name, relying on npm resolution
import { drizzle } from "drizzle-orm/postgres-js";
import postgres from "postgres"; 
import * as schema from "./db/schema"; // Import your schema definitions

// Drizzle ORM requires the developer to define the DATABASE_URL environment variable.
if (!process.env.DATABASE_URL) {
  throw new Error("DATABASE_URL is missing in environment variables.");
}

// Create a connection pool using postgres-js
const client = postgres(process.env.DATABASE_URL);

// Initialize Drizzle with the client and your schema files
export const db = drizzle(client, { schema });```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\metadata.ts--------------------------------------------------------------------------------```import type { Metadata } from "next";

import { siteConfig } from "@/lib/seo";

export type BuildMetadataParams = {
  title: string;
  description: string;
  path?: string;
  image?: string;
};

const baseUrl = siteConfig.url.replace(/\/$/, "");

const toAbsoluteUrl = (value?: string) => {
  if (!value) {
    return `${baseUrl}${siteConfig.defaultOgImage}`;
  }

  if (value.startsWith("http://") || value.startsWith("https://")) {
    return value;
  }

  return `${baseUrl}${value.startsWith("/") ? value : `/${value}`}`;
};

export function buildPageMetadata({
  title,
  description,
  path = "/",
  image,
}: BuildMetadataParams): Metadata {
  const canonical =
    path === "/" ? baseUrl : `${baseUrl}${path.startsWith("/") ? path : `/${path}`}`;
  const ogImage = toAbsoluteUrl(image);

  return {
    title,
    description,
    metadataBase: new URL(baseUrl),
    alternates: {
      canonical,
    },
    openGraph: {
      title,
      description,
      url: canonical,
      siteName: siteConfig.name,
      type: "website",
      images: [
        {
          url: ogImage,
        },
      ],
    },
    twitter: {
      card: "summary_large_image",
      title,
      description,
      site: siteConfig.twitterHandle,
      images: [ogImage],
    },
  };
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\pillars.ts--------------------------------------------------------------------------------```import type { LucideIcon } from "lucide-react";
import { Layers, Droplet, Shield, Factory, ShieldCheck, Wrench } from "lucide-react";
import type { BuildMetadataParams } from "@/lib/metadata";
import {
  getPillarsData,
  getPillarContent,
  getClusterContent,
  getPillarStaticParams as getPillarStaticContent,
  getClusterStaticParams as getClusterStaticContent,
} from "@/data/pillars";
import {
  WaterproofingPillarPage,
  LiquidVsTorchOnArticle,
  LeakingBalconyFixesArticle,
  RisingDampGuideArticle,
} from "@/content/pillars/waterproofing";
import {
  IndustrialPillarPage,
  ZincPrimerCorrosionControlArticle,
  FastCuringFloorsArticle,
  OhsAccessLiabilityArticle,
} from "@/content/pillars/industrial";
import {
  StructuralRemediationPillarPage,
  ConcreteSpallingRepairArticle,
  PeelingPaintRepairArticle,
} from "@/content/pillars/structural-remediation";

type Component = () => JSX.Element;

export type ClusterDefinition = {
  slug: string;
  title: string;
  description: string;
  icon: LucideIcon;
  metadata: BuildMetadataParams;
  component: Component;
  relatedSlugs?: string[];
};

export type PillarDefinition = {
  slug: string;
  title: string;
  subtitle: string;
  summary: string;
  icon: LucideIcon;
  heroCta?: {
    label: string;
    href: string;
  };
  metadata: BuildMetadataParams;
  component: Component;
  clusters: ClusterDefinition[];
};

const waterproofingPillar: PillarDefinition = {
  slug: "waterproofing",
  title: "Waterproofing & Damp Proofing Guides",
  subtitle: "Flat roofs, balconies, and moisture diagnostics.",
  summary:
    "Technical playbooks for liquid-applied vs. torch-on membranes, chemical damp proofing, and low-disruption balcony repairs.",
  icon: Layers,
  heroCta: {
    label: "Consult a Waterproofing Expert",
    href: "/contact",
  },
  metadata: {
    title:
      "Waterproofing & Damp Proofing Guides | Flat Roof, Balcony, and Basement Solutions",
    description:
      "Expert guides on selecting liquid-applied vs. torch-on membranes, preventing rising damp, and troubleshooting water ingress in balconies and basements.",
    path: "/blog/waterproofing",
  },
  component: WaterproofingPillarPage,
  clusters: [
    {
      slug: "liquid-vs-torch-on",
      title:
        "Liquid Applied Membranes vs. Torch-On: Which System is Right for Your Roof?",
      description:
        "Durability, installation, and warranty differences between polyurethane membranes and traditional torch-on systems.",
      icon: Droplet,
      metadata: {
        title:
          "Technical Comparison: Liquid Applied vs. Torch-On Waterproofing Membranes",
        description:
          "An expert technical guide comparing the durability, installation process, and long-term cost-effectiveness of liquid applied polyurethane membranes against traditional torch-on felt systems for flat roofs and balconies.",
        path: "/blog/waterproofing/liquid-vs-torch-on",
      },
      component: LiquidVsTorchOnArticle,
      relatedSlugs: ["rising-damp-guide", "leaking-balcony-fixes"],
    },
    {
      slug: "leaking-balcony-fixes",
      title:
        "How to Fix a Leaking Balcony Without Removing Tiles (Low-Disruption Repair)",
      description:
        "Diagnosis and remediation workflow for under-tile balcony leaks using injection and re-grouting systems.",
      icon: Shield,
      metadata: {
        title:
          "How to Fix a Leaking Balcony Without Removing Tiles (Low-Disruption Repair)",
        description:
          "A practical guide for body corporates and homeowners on diagnosing and repairing leaking under-tile balconies using low-disruption injection and re-grouting systems, avoiding costly demolition.",
        path: "/blog/waterproofing/leaking-balcony-fixes",
      },
      component: LeakingBalconyFixesArticle,
      relatedSlugs: ["liquid-vs-torch-on"],
    },
    {
      slug: "rising-damp-guide",
      title: "The Permanent Fix for Rising Damp: Chemical DPC Injection Guide",
      description:
        "Diagnosing rising damp vs. condensation and executing the full chemical DPC + plaster remediation process.",
      icon: Layers,
      metadata: {
        title:
          "The Permanent Fix for Rising Damp: Chemical DPC Injection Guide",
        description:
          "A comprehensive guide on diagnosing rising damp versus condensation, detailing the chemical DPC (Damp Proof Course) injection method, and the essential subsequent plaster remediation.",
        path: "/blog/waterproofing/rising-damp-guide",
      },
      component: RisingDampGuideArticle,
      relatedSlugs: ["liquid-vs-torch-on"],
    },
  ],
};

const industrialPillar: PillarDefinition = {
  slug: "industrial",
  title: "Industrial Painting & Maintenance Guides",
  subtitle: "Corrosion control, floor systems, and plant liability.",
  summary:
    "Expert industrial guides on corrosion control, abrasive blasting prep, hygienic flooring, and OHS compliance for factories and plant assets.",
  icon: Factory,
  heroCta: {
    label: "Request a technical consultation",
    href: "/contact",
  },
  metadata: {
    title:
      "Industrial Painting & Maintenance Blog | Corrosion Control & Plant Asset Guides",
    description:
      "Expert industrial guides on corrosion control, abrasive blasting preparation, epoxy flooring systems, and protective coatings for factories and plant assets.",
    path: "/blog/industrial",
  },
  component: IndustrialPillarPage,
  clusters: [
    {
      slug: "zinc-primer-corrosion-control",
      title: "The Science of Stopping Rust: Choosing the Right Zinc Primer",
      description:
        "Technical comparison of sacrificial vs. barrier protection for structural steel and exposed plant assets.",
      icon: Wrench,
      metadata: {
        title:
          "The Science of Stopping Rust: Choosing the Right Zinc Primer",
        description:
          "A technical guide to sacrificial and barrier protection systems for structural steel and exposed plant assets.",
        path: "/blog/industrial/zinc-primer-corrosion-control",
      },
      component: ZincPrimerCorrosionControlArticle,
      relatedSlugs: ["fast-curing-floors", "ohs-access-liability"],
    },
    {
      slug: "fast-curing-floors",
      title: "Minimizing Downtime: Fast-Curing Floors for Food Production",
      description:
        "How polyurethane screeds minimize disruption and secure HACCP compliance in high-throughput facilities.",
      icon: Factory,
      metadata: {
        title: "Minimizing Downtime: Fast-Curing Floors for Food Production",
        description:
          "How fast-curing polyurethane screeds minimize disruption and ensure HACCP compliance in processing plants.",
        path: "/blog/industrial/fast-curing-floors",
      },
      component: FastCuringFloorsArticle,
      relatedSlugs: ["zinc-primer-corrosion-control"],
    },
    {
      slug: "ohs-access-liability",
      title: "OHS Compliance: Managing High-Access Liability on Industrial Sites",
      description:
        "A compliance checklist for facility managers coordinating rope access and elevated work.",
      icon: Shield,
      metadata: {
        title:
          "OHS Compliance: Managing High-Access Liability on Industrial Sites",
        description:
          "A checklist for facility managers to ensure contractors meet all OHS requirements for work performed at height.",
        path: "/blog/industrial/ohs-access-liability",
      },
      component: OhsAccessLiabilityArticle,
      relatedSlugs: ["zinc-primer-corrosion-control"],
    },
  ],
};

const structuralRemediationPillar: PillarDefinition = {
  slug: "structural-remediation",
  title: "Structural Remediation Guides",
  subtitle: "Concrete spalling, crack injection, and QA workflows.",
  summary:
    "Engineering-led playbooks covering defect diagnostics, steel passivation, polymer-modified mortars, and breathable protective coatings.",
  icon: ShieldCheck,
  heroCta: {
    label: "Book a remediation assessment",
    href: "/structural-repairs",
  },
  metadata: {
    title: "Technical Guide: How to Permanently Repair Concrete Spalling & Cancer",
    description:
      "An expert guide to structural remediation, detailing the process of concrete spalling repair, rebar passivation, crack injection, and final protective coating application.",
    path: "/blog/structural-remediation",
  },
  component: StructuralRemediationPillarPage,
  clusters: [
    {
      slug: "concrete-spalling-repair",
      title: "Concrete Spalling Repair: Permanent, Engineering-Led Workflow",
      description:
        "A four-phase remediation blueprint covering defect breakout, rebar treatment, structural mortars, and breathable coatings.",
      icon: Wrench,
      metadata: {
        title: "Concrete Spalling Repair: Permanent, Engineering-Led Workflow",
        description:
          "Step-by-step remediation process that prevents recurring failure by addressing rebar corrosion and protective top coats.",
        path: "/blog/structural-remediation/concrete-spalling-repair",
      },
      component: ConcreteSpallingRepairArticle,
    },
    {
      slug: "peeling-paint-repair",
      title: "Why is My Paint Peeling? Complete Diagnostic Guide",
      description:
        "Diagnose and fix peeling paint by identifying root causes: moisture intrusion, poor preparation, or adhesion failure.",
      icon: Wrench,
      metadata: {
        title: "Why is My Paint Peeling? The Complete Diagnostic & Repair Guide",
        description:
          "Expert guide to diagnosing and permanently fixing peeling paint. Learn to identify moisture intrusion, poor surface preparation, and adhesion failures before repainting.",
        path: "/blog/structural-remediation/peeling-paint-repair",
      },
      component: PeelingPaintRepairArticle,
    },
  ],
};

const contentToComponentMap: Record<string, PillarDefinition> = {
  waterproofing: waterproofingPillar,
  industrial: industrialPillar,
  "structural-remediation": structuralRemediationPillar,
};

const detailComponentMap: Record<string, ClusterDefinition> = {
  "waterproofing:liquid-vs-torch-on": {
    ...waterproofingPillar.clusters[0],
    component: LiquidVsTorchOnArticle,
  },
  "waterproofing:leaking-balcony-fixes": {
    ...waterproofingPillar.clusters[1],
    component: LeakingBalconyFixesArticle,
  },
  "waterproofing:rising-damp-guide": {
    ...waterproofingPillar.clusters[2],
    component: RisingDampGuideArticle,
  },
  "industrial:zinc-primer-corrosion-control": {
    ...industrialPillar.clusters[0],
    component: ZincPrimerCorrosionControlArticle,
  },
  "industrial:fast-curing-floors": {
    ...industrialPillar.clusters[1],
    component: FastCuringFloorsArticle,
  },
  "industrial:ohs-access-liability": {
    ...industrialPillar.clusters[2],
    component: OhsAccessLiabilityArticle,
  },
  "structural-remediation:concrete-spalling-repair": {
    ...structuralRemediationPillar.clusters[0],
    component: ConcreteSpallingRepairArticle,
  },
  "structural-remediation:peeling-paint-repair": {
    ...structuralRemediationPillar.clusters[1],
    component: PeelingPaintRepairArticle,
  },
};

export function getPillars() {
  return getPillarsData().map((pillar) => ({
    ...contentToComponentMap[pillar.slug],
    metadata: pillar.metadata,
    summary: pillar.summary,
    clusters: pillar.clusters.map((cluster) => ({
      ...detailComponentMap[`${pillar.slug}:${cluster.slug}`],
      metadata: cluster.metadata,
      description: cluster.description,
    })),
  }));
}

export function getPillarBySlug(slug: string) {
  const pillar = contentToComponentMap[slug];
  if (!pillar) return undefined;
  return {
    ...pillar,
    metadata: getPillarContent(slug)?.metadata ?? pillar.metadata,
    clusters: pillar.clusters,
  };
}

export function getClusterBySlugs(pillarSlug: string, clusterSlug: string) {
  const key = `${pillarSlug}:${clusterSlug}`;
  const cluster = detailComponentMap[key];
  if (!cluster) return undefined;
  return {
    ...cluster,
    metadata: getClusterContent(pillarSlug, clusterSlug)?.metadata ?? cluster.metadata,
  };
}

export function getPillarStaticParams() {
  return getPillarStaticContent();
}

export function getClusterStaticParams() {
  return getClusterStaticContent();
}

export function getPillarJsonLd(pillarSlug: string) {
  const pillar = getPillarBySlug(pillarSlug);
  if (!pillar) return undefined;

  return {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    name: pillar.title,
    description: pillar.summary,
    url: pillar.metadata.path,
    hasPart: pillar.clusters.map((cluster) => ({
      "@type": "Article",
      name: cluster.title,
      description: cluster.description,
      url: cluster.metadata.path,
    })),
  };
}

export function getClusterJsonLd(pillarSlug: string, clusterSlug: string) {
  const cluster = getClusterBySlugs(pillarSlug, clusterSlug);
  const pillar = getPillarBySlug(pillarSlug);
  if (!cluster || !pillar) return undefined;

  return {
    "@context": "https://schema.org",
    "@type": "Article",
    headline: cluster.title,
    description: cluster.description,
    url: cluster.metadata.path,
    isPartOf: {
      "@type": "CollectionPage",
      name: pillar.title,
      url: pillar.metadata.path,
    },
    breadcrumb: {
      "@type": "BreadcrumbList",
      itemListElement: [
        {
          "@type": "ListItem",
          position: 1,
          name: "Blog",
          item: "/blog",
        },
        {
          "@type": "ListItem",
          position: 2,
          name: pillar.title,
          item: pillar.metadata.path,
        },
        {
          "@type": "ListItem",
          position: 3,
          name: cluster.title,
          item: cluster.metadata.path,
        },
      ],
    },
  };
}

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\seo.ts--------------------------------------------------------------------------------```export type SocialProfiles = {
  linkedin: string;
  facebook: string;
  instagram?: string;
  youtube?: string;
};

export type SiteAddress = {
  street: string;
  suburb: string;
  city: string;
  region: string;
  postalCode: string;
  country: string;
  latitude?: number;
  longitude?: number;
};

export const siteConfig = {
  name: "Maverick Painting Contractors",
  shortName: "Maverick Painting",
  legalName: "Maverick Painting Contractors",
  slogan: "Owner supervised structural repairs, coatings & waterproofing",
  url: process.env.NEXT_PUBLIC_SITE_URL ?? "https://www.maverickpainting.co.za",
  defaultOgImage: "/images/munyaka-midrand.jpg",
  description:
    "Owner supervised painting contractors in Gauteng specialising in structural repairs, waterproofing, industrial coatings and independent QA for body corporates, developers and high-end homeowners.",
  keywords: [
    "painting contractors gauteng",
    "commercial painting johannesburg",
    "industrial coatings south africa",
    "body corporate waterproofing",
    "structural repairs maverick painting",
    "rope access painters gauteng",
    "independent qa coating inspection",
    "roof painting contractors",
    "interior painting services",
    "dustless sanding",
    "low-VOC paints",
    "tile roof restoration",
    "heat-reflective roof paint",
    "parking garage painting",
    "road marking contractors",
    "warehouse painting",
    "after-hours painting",
    "concrete spalling repair",
    "rising damp treatment",
    "peeling paint repair",
    "parapet wall waterproofing",
    "balcony sealing",
    "concrete cancer repair",
  ],
  email: "maverickpainters1984@gmail.com",
  phoneNumber: "+27 82 627 7082",
  whatsapp: "https://wa.me/27826277082",
  twitterHandle: "@maverickpainting",
  social: {
    linkedin: "https://www.linkedin.com/company/maverickpainting",
    facebook: "https://www.facebook.com/maverickpaintingcontractors",
    instagram: "https://www.instagram.com/maverickpainting",
  } satisfies SocialProfiles,
  address: {
    street: "15 Highveld Techno Park",
    suburb: "Centurion",
    city: "Pretoria",
    region: "Gauteng",
    postalCode: "0157",
    country: "ZA",
    latitude: -25.89052,
    longitude: 28.18904,
  } satisfies SiteAddress,
  serviceAreas: [
    "Johannesburg",
    "Pretoria",
    "Midrand",
    "Centurion",
    "Sandton",
    "Benoni",
    "East Rand",
  ],
  primaryPages: [
    "/",
    "/about-us",
    "/services",
    "/solutions/for-body-corporates",
    "/solutions/for-developers",
    "/solutions/for-homeowners",
    "/painting-services",
    "/painting/body-corporate-painting",
    "/painting/commercial-painting",
    "/painting/high-volume-commercial-painting",
    "/painting/industrial-painting",
    "/painting/roof-painting",
    "/painting/interior-painting",
    "/painting/parking-garage-painting",
    "/painting/road-marking",
    "/painting/warehouse-painting",
    "/waterproofing-services",
    "/damp-proofing-services",
    "/access-solutions",
    "/specialized-coatings",
    "/structural-repairs",
    "/coatings/hygienic-food-grade-flooring",
    "/our-process-independent-qa",
    "/projects",
    "/blog",
    "/blog/industrial",
    "/blog/waterproofing",
    "/blog/waterproofing/leaking-balcony-fixes",
    "/blog/waterproofing/liquid-vs-torch-on",
    "/blog/waterproofing/rising-damp-guide",
    "/blog/structural-remediation",
    "/blog/structural-remediation/peeling-paint-repair",
    "/privacy",
    "/terms",
    "/contact",
  ],
};

export const defaultChangeFrequency = "monthly";

```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\utils.ts--------------------------------------------------------------------------------```import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\db\schema.ts--------------------------------------------------------------------------------```// src/lib/db/schema.ts
import {
  timestamp,
  pgTable,
  text,
  primaryKey,
  integer,
  serial,
  // REMOVED: Unnecessary explicit Drizzle types that caused the error
} from "drizzle-orm/pg-core";
import type { AdapterAccount } from "@auth/core/adapters";

// --- CORE TABLES FOR NEXT-AUTH INTEGRATION (Auth.js) ---

export const users = pgTable("user", {
  id: text("id").notNull().primaryKey(),
  name: text("name"),
  email: text("email").notNull(),
  emailVerified: timestamp("emailVerified", { mode: "date" }),
  image: text("image"),
});

export const accounts = pgTable(
  "account",
  {
    userId: text("userId")
      .notNull()
      .references(() => users.id, { onDelete: "cascade" }),
    type: text("type").$type<AdapterAccount["type"]>().notNull(),
    provider: text("provider").notNull(),
    providerAccountId: text("providerAccountId").notNull(),
    refresh_token: text("refresh_token"),
    access_token: text("access_token"),
    expires_at: integer("expires_at"),
    token_type: text("token_type"),
    scope: text("scope"),
    id_token: text("id_token"),
    session_state: text("session_state"),
  },
  (account) => ({ // FIX: Removed explicit type casting (PgTableFn<any>)
    compoundKey: primaryKey({
      columns: [account.provider, account.providerAccountId],
    }),
  })
);

export const sessions = pgTable("session", {
  sessionToken: text("sessionToken").notNull().primaryKey(),
  userId: text("userId")
    .notNull()
    .references(() => users.id, { onDelete: "cascade" }),
  expires: timestamp("expires", { mode: "date" }).notNull(),
});

export const verificationTokens = pgTable(
  "verificationToken",
  {
    identifier: text("identifier").notNull(),
    token: text("token").notNull(),
    expires: timestamp("expires", { mode: "date" }).notNull(),
  },
  (vt) => ({ // FIX: Removed explicit type casting (PgTableFn<any>)
    compoundKey: primaryKey({ columns: [vt.identifier, vt.token] }),
  })
);

// --- APPLICATION-SPECIFIC TABLES (Example) ---

// Placeholder table for Blog Articles (to enable dynamic content later)
export const articles = pgTable("article", {
    id: serial("id").primaryKey(),
    title: text("title").notNull(),
    slug: text("slug").notNull().unique(),
    content: text("content").notNull(),
    createdAt: timestamp("createdAt", { mode: "date" }).defaultNow().notNull(),
    updatedAt: timestamp("updatedAt", { mode: "date" }).defaultNow().notNull(),
    // Link to the user who authored the article
    authorId: text("authorId").references(() => users.id, { onDelete: "set null" }), 
});```

--------------------------------------------------------------------------------üìÑ FILE PATH: src\lib\hooks\useIntervalWhenVisible.ts--------------------------------------------------------------------------------```// src/lib/hooks/useIntervalWhenVisible.ts
"use client" ; 

import { useState, useEffect, useRef } from 'react'
//
export function useIntervalWhenVisible(
  callback: () => void,
  delay: number | null,
) {
  const savedCallback = useRef(callback);
 const [isVisible, setIsVisible] = useState(false);
  const observerRef = useRef<IntersectionObserver | null>(null);
 const targetRef = useRef<Element | null>(null);

// Save the latest callback 
  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

// Set up the IntersectionObserver 
  useEffect(() => {
    // Ensure this only runs in the browser
    if (typeof window === 'undefined' || !window.IntersectionObserver) {
      // Fallback for old browsers or SSR: just run the interval
      setIsVisible(true);
      return;
    }

    observerRef.current = new IntersectionObserver(
      (entries) => {
        const [entry] = entries;
        if (entry.isIntersecting) {
          setIsVisible(true);
          // Optional: Disconnect observer after first intersection 
          if (observerRef.current && targetRef.current) {
            observerRef.current.unobserve(targetRef.current);
          }
        }
      },
      { rootMargin: '0px', threshold: 0.1 } // Trigger when 10% is visible
    );

    if (targetRef.current) {
      observerRef.current.observe(targetRef.current);
    }

    const obs = observerRef.current;
    const target = targetRef.current;
    return () => {
      if (obs && target) {
        obs.unobserve(target);
      }
    };
  }, []);

// Set up the interval 
  useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    // Only run the interval if delay is not null AND the element is visible
    if (delay !== null && isVisible) {
      // FIX: Change 'let id' to 'const id' to satisfy the ESLint prefer-const rule.
      const id = setInterval(tick, delay);
      return () => clearInterval(id);
    }
  }, [delay, isVisible]);

// Return a ref-setter function for the target element
  const setTargetRef = (node: Element | null) => {
    if (targetRef.current) {
      observerRef.current?.unobserve(targetRef.current);
 }
    targetRef.current = node;
    if (targetRef.current) {
      observerRef.current?.observe(targetRef.current);
    }
  };

  return { setTargetRef };
}```

--------------------------------------------------------------------------------üìÑ FILE PATH: types\partytown.d.ts--------------------------------------------------------------------------------```declare module "@builder.io/partytown/react" {
  import type { ComponentType } from "react";

  export const Partytown: ComponentType<{
    debug?: boolean;
    forward?: string[];
  }>;
}

```

